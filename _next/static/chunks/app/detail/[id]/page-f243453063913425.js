(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{6765:function(e,t,s){Promise.resolve().then(s.bind(s,3761)),Promise.resolve().then(s.bind(s,8445))},2474:function(e,t,s){"use strict";s.d(t,{AT:function(){return c},DA:function(){return i},PQ:function(){return a},i3:function(){return o},k2:function(){return r},lB:function(){return l},tZ:function(){return d}});var n=s(9977);async function c(){return n.Z.request({url:"/web/genealogy-guide/article-category/list",method:"get"})}async function i(e){return n.Z.request({url:"/web/genealogy-guide/article/list",method:"get",params:e})}async function r(e){return n.Z.request({url:"/web/genealogy-guide/article/hot-list",method:"get",params:e})}async function a(e){return n.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/detail"),method:"get",params:e})}async function l(e){return n.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/recommend-list"),method:"get",params:e})}async function o(e){return n.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/nice"),method:"post",data:e})}async function d(e){return n.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/cancel-nice"),method:"post",data:e})}},3761:function(e,t,s){"use strict";s.d(t,{default:function(){return K}});var n=s(864),c=s(759),i=s(3472),r=s(2474),a=s(125),l=s(1174),o=s(9967),d=s.n(o),h=s(7839),u=s.n(h);function m(e){let{categoryName:t}=e;return(0,n.jsx)("nav",{className:u().breadcrumb,children:(0,n.jsx)("div",{className:u().container,children:(0,n.jsxs)("div",{className:u().breadcrumbList,children:[(0,n.jsxs)(l.default,{href:"/",className:u().breadcrumbItem,children:[(0,n.jsx)(d(),{className:u().icon}),"首页"]}),(0,n.jsx)("span",{className:u().separator,children:"/"}),(0,n.jsx)(l.default,{href:"/news",className:u().breadcrumbItem,children:"修谱攻略"}),(0,n.jsx)("span",{className:u().separator,children:"/"}),t?(0,n.jsx)("span",{className:u().breadcrumbItemActive,children:t}):(0,n.jsx)("span",{className:u().breadcrumbItemActive,children:"文章详情"})]})})})}var _=s(7429),x=s.n(_);function v(e){let{progress:t}=e;return(0,n.jsx)("div",{className:x().readingProgress,style:{transform:"scaleX(".concat(t,")")}})}var g=s(2887),j=s.n(g);function p(e){let{show:t,onClick:s}=e;return(0,n.jsx)("button",{className:"".concat(j().backToTop," ").concat(t?j().show:""),onClick:s,"aria-label":"返回顶部",children:(0,n.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M7 14L12 9L17 14",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})}var f=s(7846),N=s.n(f),w=s(785),b=s.n(w),C=s(869),y=s.n(C),A=s(205),k=s.n(A);function I(e){var t;let{article:s,readTime:c}=e;return(0,n.jsxs)("header",{className:k().header,children:[(0,n.jsxs)("div",{className:k().meta,children:[(0,n.jsx)("span",{className:k().category,children:s.categoryName}),s.authorName&&(0,n.jsxs)("span",{className:k().metaItem,children:[(0,n.jsx)(y(),{className:k().icon}),s.authorName]}),(0,n.jsx)("span",{className:k().metaItem,children:(t=s.publishedAt)?new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):""}),(0,n.jsxs)("span",{className:k().metaItem,children:[(0,n.jsx)(N(),{className:k().icon}),s.viewCount.toLocaleString()]}),c&&(0,n.jsxs)("span",{className:k().metaItem,children:[(0,n.jsx)(b(),{className:k().icon}),"阅读时间 ",c,"分钟"]})]}),(0,n.jsx)("h1",{className:k().title,children:s.title})]})}var B=s(827),L=s(9006),S=s.n(L);function T(e){let{coverUrl:t,title:s}=e,[i,r]=(0,c.useState)(!1);if(!t)return null;let a=()=>{r(!1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:S().cover,onClick:()=>{r(!0)},children:(0,n.jsx)(B.default,{src:t,alt:s,fill:!0,className:S().image,priority:!0,sizes:"100vw"})}),i&&(0,n.jsxs)("div",{className:S().previewOverlay,onClick:e=>{e.target===e.currentTarget&&a()},children:[(0,n.jsx)("button",{className:S().closeButton,onClick:a,children:"\xd7"}),(0,n.jsx)("img",{src:t,alt:s,className:S().previewImage})]})]})}var P=s(7016),R=s.n(P);function M(e){let{content:t,onTocUpdate:s}=e;(0,c.useEffect)(()=>{let e;let n=/<h([1-6])([^>]*)>(.*?)<\/h[1-6]>/gi,c=[],i=0;for(;null!==(e=n.exec(t));){let t=parseInt(e[1]),s=e[3].replace(/<[^>]*>/g,""),n="section".concat(i+1);c.push({id:n,title:s,level:t}),i++}s&&s(c)},[t,s]);let i=(0,c.useMemo)(()=>t.replace(/<h([1-6])([^>]*)>(.*?)<\/h[1-6]>/gi,(e,t,s,n,c,i)=>{let r=(i.substring(0,c).match(/<h[1-6][^>]*>/gi)||[]).length+1;return"<h".concat(t).concat(s,' id="').concat("section".concat(r),'">').concat(n,"</h").concat(t,">")}),[t]);return(0,n.jsx)("div",{className:R().content,children:(0,n.jsx)("div",{className:R().articleContent,dangerouslySetInnerHTML:{__html:i}})})}var O=s(6997),H=s.n(O),Z=s(3113),E=s.n(Z);function W(e){let{articleId:t,likeCount:s,isLiked:i,onLike:r,onShare:a}=e,[l,o]=(0,c.useState)(i),[d,h]=(0,c.useState)(s),[u,m]=(0,c.useState)(!1),_=async()=>{if(!u){m(!0);try{await r(),o(!l),h(e=>l?e-1:e+1)}catch(e){console.error("点赞失败:",e)}finally{m(!1)}}};return(0,n.jsxs)("div",{className:E().actions,children:[(0,n.jsxs)("div",{className:E().leftActions,children:[(0,n.jsxs)("button",{className:"".concat(E().actionBtn," ").concat(l?E().liked:""),onClick:_,disabled:u,children:[(0,n.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:l?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:(0,n.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})}),(0,n.jsx)("span",{children:"点赞"}),(0,n.jsxs)("span",{className:E().count,children:["(",d,")"]})]}),(0,n.jsxs)("button",{className:E().actionBtn,onClick:()=>{navigator.share?navigator.share({title:document.title,url:window.location.href}).catch(()=>{a()}):a()},children:[(0,n.jsx)(H(),{className:E().icon}),(0,n.jsx)("span",{children:"分享"})]})]}),(0,n.jsx)("div",{className:E().rightActions,children:(0,n.jsxs)("div",{className:E().viewCount,children:[(0,n.jsx)(N(),{className:E().icon}),(0,n.jsxs)("span",{children:["阅读 ",s.toLocaleString()]})]})})]})}var D=s(7038),z=s.n(D);function q(e){let{items:t,activeId:s,onItemClick:c,content:i}=e;return(0,n.jsxs)("div",{className:z().toc,children:[(0,n.jsxs)("h3",{className:z().title,children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:z().icon,children:[(0,n.jsx)("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),(0,n.jsx)("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),(0,n.jsx)("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),(0,n.jsx)("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),(0,n.jsx)("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),(0,n.jsx)("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),"文章目录"]}),(0,n.jsx)("div",{className:z().tocList,children:0===t.length?(0,n.jsx)("div",{className:z().contentPreview,children:(e=>{if(!e)return"";let t=e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&apos;/g,"'"),s=t.substring(0,100);return t.length>100?s+"...":s})(i)}):t.map(e=>(0,n.jsx)("div",{className:"".concat(z().tocItem," ").concat(e.level>2?z().subItem:""," ").concat(s===e.id?z().active:""),onClick:()=>c(e.id),children:e.title},e.id))})]})}var U=s(5867),V=s.n(U);function X(e){let{onConsult:t}=e;return(0,n.jsxs)("div",{className:V().promotion,children:[(0,n.jsxs)("h3",{className:V().title,children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:V().icon,children:[(0,n.jsx)("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),(0,n.jsx)("circle",{cx:"9",cy:"7",r:"4"}),(0,n.jsx)("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),(0,n.jsx)("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"专业服务"]}),(0,n.jsxs)("div",{className:V().serviceList,children:[(0,n.jsxs)("div",{className:V().serviceItem,children:[(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:V().checkIcon,children:(0,n.jsx)("polyline",{points:"20 6 9 17 4 12"})}),(0,n.jsx)("span",{children:"专业族谱编修"})]}),(0,n.jsxs)("div",{className:V().serviceItem,children:[(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:V().checkIcon,children:(0,n.jsx)("polyline",{points:"20 6 9 17 4 12"})}),(0,n.jsx)("span",{children:"数字化处理"})]}),(0,n.jsxs)("div",{className:V().serviceItem,children:[(0,n.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:V().checkIcon,children:(0,n.jsx)("polyline",{points:"20 6 9 17 4 12"})}),(0,n.jsx)("span",{children:"文化咨询"})]})]}),(0,n.jsx)("button",{className:V().consultBtn,onClick:t,children:"立即咨询"})]})}var Q=s(7432),F=s.n(Q);function G(e){let{articles:t,loading:s}=e;if(s)return(0,n.jsxs)("div",{className:F().container,children:[(0,n.jsxs)("h3",{className:F().title,children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:F().icon,children:[(0,n.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,n.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"相关文章推荐"]}),(0,n.jsx)("div",{className:F().loading,children:"加载中..."})]});if(!t||0===t.length)return null;let c=e=>e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):"";return(0,n.jsxs)("div",{className:F().container,children:[(0,n.jsxs)("h3",{className:F().title,children:[(0,n.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:F().icon,children:[(0,n.jsx)("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),(0,n.jsx)("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"})]}),"相关文章推荐"]}),(0,n.jsx)("div",{className:F().articleList,children:t.map(e=>(0,n.jsxs)(l.default,{href:"/detail/".concat(e.id),className:F().articleCard,children:[(0,n.jsx)("div",{className:F().imageContainer,children:e.coverUrl?(0,n.jsx)(B.default,{src:e.coverUrl,alt:e.title,fill:!0,className:F().image,sizes:"(max-width: 768px) 100vw, 50vw"}):(0,n.jsx)("div",{className:F().placeholderImage,children:(0,n.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,n.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),(0,n.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),(0,n.jsx)("polyline",{points:"21 15 16 10 5 21"})]})})}),(0,n.jsxs)("div",{className:F().content,children:[(0,n.jsx)("h4",{className:F().articleTitle,children:e.title}),(0,n.jsx)("p",{className:F().excerpt,children:"专业的族谱修谱服务，为您传承家族文化..."}),(0,n.jsxs)("div",{className:F().meta,children:[(0,n.jsx)("span",{className:F().date,children:c(e.publishedAt)}),(0,n.jsxs)("span",{className:F().views,children:[(0,n.jsx)(N(),{className:F().icon}),e.viewCount]})]})]})]},e.id))})]})}function K(e){let{articleId:t}=e,[s,l]=(0,c.useState)(null),[o,d]=(0,c.useState)([]),[h,u]=(0,c.useState)([]),[_,x]=(0,c.useState)(""),[g,j]=(0,c.useState)(0),[f,N]=(0,c.useState)(!1),[w,b]=(0,c.useState)(!1),[C,y]=(0,c.useState)(!0),[A,k]=(0,c.useState)(!1),B=(0,c.useCallback)(async()=>{try{y(!0);let e=await (0,r.PQ)({articleId:Number(t)});200===e.code?l(e.data):i.y.error("获取文章详情失败")}catch(e){console.error("获取文章详情失败:",e),i.y.error("获取文章详情失败")}finally{y(!1)}},[t]),L=(0,c.useCallback)(e=>{u(e)},[]),S=(0,c.useCallback)(async()=>{try{k(!0);let e=await (0,r.lB)({articleId:Number(t),page:1,pageSize:5});200===e.code&&d(e.data.list||[])}catch(e){console.error("获取推荐文章失败:",e)}finally{k(!1)}},[t]),P=(0,c.useCallback)(async()=>{if(s)try{w?await (0,r.tZ)({articleId:s.id}):await (0,r.i3)({articleId:s.id})}catch(e){throw console.error("点赞操作失败:",e),i.y.error(w?"取消点赞失败":"点赞失败"),e}},[s,w]),R=(0,c.useCallback)(()=>{navigator.share?navigator.share({title:null==s?void 0:s.title,url:window.location.href}).catch(()=>{}):navigator.clipboard.writeText(window.location.href).then(()=>{i.y.success("链接已复制到剪贴板")})},[s]),O=(0,c.useCallback)(()=>{i.y.info("咨询功能开发中...")},[]),H=(0,c.useCallback)(()=>{let e=window.pageYOffset,t=window.innerHeight,s=document.documentElement.scrollHeight;e+t>=s-10?j(1):s>t?j(Math.min(e/(s-t),.99)):j(0)},[]),Z=(0,c.useCallback)(e=>{let t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},[]),E=(0,c.useCallback)(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),D=(0,c.useCallback)(()=>{if(N(window.pageYOffset>300),h.length>0)for(let e=h.length-1;e>=0;e--){let t=document.getElementById(h[e].id);if(t&&t.getBoundingClientRect().top<=100){x(h[e].id);break}}},[h]),z=(0,a.Z)(D,100),U=(0,c.useMemo)(()=>s?Math.ceil(s.content.replace(/<[^>]*>/g,"").length/200):0,[s]);return((0,c.useEffect)(()=>{B()},[B]),(0,c.useEffect)(()=>{s&&S()},[s,S]),(0,c.useEffect)(()=>(window.addEventListener("scroll",H),window.addEventListener("scroll",z),()=>{window.removeEventListener("scroll",H),window.removeEventListener("scroll",z)}),[H,z]),C)?(0,n.jsx)("div",{className:"container mx-auto px-6 py-12",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{children:"加载中..."})})}):s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{progress:g}),(0,n.jsx)(m,{categoryName:s.categoryName}),(0,n.jsx)(T,{coverUrl:s.coverUrl,title:s.title}),(0,n.jsx)("main",{className:"container mx-auto px-6 py-12",children:(0,n.jsxs)("div",{className:"grid grid-cols-3 gap-8",children:[(0,n.jsxs)("div",{className:"col-span-1 -mt-16 space-y-8",children:[(0,n.jsx)(q,{items:h,activeId:_,onItemClick:Z,content:s.content}),(0,n.jsx)(X,{onConsult:O})]}),(0,n.jsxs)("div",{className:"col-span-2",children:[(0,n.jsxs)("article",{className:"bg-white rounded-lg shadow-lg overflow-hidden -mt-16 relative z-10",children:[(0,n.jsx)(I,{article:s,readTime:U}),(0,n.jsx)(M,{content:s.content,onTocUpdate:L})]}),(0,n.jsxs)("div",{className:"mt-8",children:[(0,n.jsx)(G,{articles:o,loading:A}),(0,n.jsx)(W,{articleId:s.id,likeCount:s.likeCount,isLiked:w,onLike:P,onShare:R})]})]})]})}),(0,n.jsx)(p,{show:f,onClick:E})]}):(0,n.jsx)("div",{className:"container mx-auto px-6 py-12",children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)("p",{children:"文章不存在"})})})}},3113:function(e){e.exports={actions:"ArticleActions_actions__UT_WM",leftActions:"ArticleActions_leftActions__Ij1CK",actionBtn:"ArticleActions_actionBtn__KfZ8n",liked:"ArticleActions_liked__XBse9",icon:"ArticleActions_icon__MhoSc",count:"ArticleActions_count__z6xia",rightActions:"ArticleActions_rightActions__FU0DP",viewCount:"ArticleActions_viewCount__WophL"}},7016:function(e){e.exports={content:"ArticleContent_content__oTi4O",articleContent:"ArticleContent_articleContent__d2rWl"}},9006:function(e){e.exports={cover:"ArticleCover_cover__ZXWfl",image:"ArticleCover_image__cVs7O",previewOverlay:"ArticleCover_previewOverlay__iXbYX",previewImage:"ArticleCover_previewImage__AB9r_",closeButton:"ArticleCover_closeButton__m5NJG"}},205:function(e){e.exports={header:"ArticleDetailHeader_header__TtI1_",meta:"ArticleDetailHeader_meta__BbBeQ",category:"ArticleDetailHeader_category__jjexo",metaItem:"ArticleDetailHeader_metaItem__sfGNu",icon:"ArticleDetailHeader_icon__2S_Ag",title:"ArticleDetailHeader_title__wsoQD"}},2887:function(e){e.exports={backToTop:"BackToTop_backToTop__XBjh5",show:"BackToTop_show__5iLzu"}},7839:function(e){e.exports={breadcrumb:"BreadCrumb_breadcrumb__K2VAG",container:"BreadCrumb_container__CgJZV",breadcrumbList:"BreadCrumb_breadcrumbList__fn0My",breadcrumbItem:"BreadCrumb_breadcrumbItem__VVC7J",breadcrumbItemActive:"BreadCrumb_breadcrumbItemActive__pt8_f",icon:"BreadCrumb_icon__VCdlU",separator:"BreadCrumb_separator__fgdtV"}},7429:function(e){e.exports={readingProgress:"ReadingProgress_readingProgress__8tjes"}},7432:function(e){e.exports={container:"RelatedArticles_container__587H9",title:"RelatedArticles_title__O1R8b",icon:"RelatedArticles_icon__j5Hrr",loading:"RelatedArticles_loading__jE9Uu",articleList:"RelatedArticles_articleList__uuj5R",articleCard:"RelatedArticles_articleCard__vfu08",articleTitle:"RelatedArticles_articleTitle__uCaKb",imageContainer:"RelatedArticles_imageContainer__zVNhl",image:"RelatedArticles_image__8gRq_",placeholderImage:"RelatedArticles_placeholderImage__XDvul",content:"RelatedArticles_content__d5YPB",excerpt:"RelatedArticles_excerpt__sA1Q9",meta:"RelatedArticles_meta__jxHZK",date:"RelatedArticles_date__hltSt",views:"RelatedArticles_views__ffMpj"}},5867:function(e){e.exports={promotion:"ServicePromotion_promotion__tQIRO",title:"ServicePromotion_title__eIxzA",icon:"ServicePromotion_icon__oFMBV",serviceList:"ServicePromotion_serviceList__GCg__",serviceItem:"ServicePromotion_serviceItem__qZ3y6",checkIcon:"ServicePromotion_checkIcon__BMFqU",consultBtn:"ServicePromotion_consultBtn__R9fx3"}},7038:function(e){e.exports={toc:"TableOfContents_toc__oSrW8",title:"TableOfContents_title__W_NMP",icon:"TableOfContents_icon__sAd4u",tocList:"TableOfContents_tocList__Q_zYt",contentPreview:"TableOfContents_contentPreview__POZN4",tocItem:"TableOfContents_tocItem__3d5r3",active:"TableOfContents_active___GXXE",subItem:"TableOfContents_subItem__DZ8p6"}}},function(e){e.O(0,[352,340,732,697,517,259,973,744],function(){return e(e.s=6765)}),_N_E=e.O()}]);