(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[834],{2456:function(e,t,a){Promise.resolve().then(a.bind(a,8445)),Promise.resolve().then(a.bind(a,3055))},2474:function(e,t,a){"use strict";a.d(t,{AT:function(){return n},DA:function(){return l},PQ:function(){return i},i3:function(){return o},k2:function(){return s},lB:function(){return c},tZ:function(){return d}});var r=a(9977);async function n(){return r.Z.request({url:"/web/genealogy-guide/article-category/list",method:"get"})}async function l(e){return r.Z.request({url:"/web/genealogy-guide/article/list",method:"get",params:e})}async function s(e){return r.Z.request({url:"/web/genealogy-guide/article/hot-list",method:"get",params:e})}async function i(e){return r.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/detail"),method:"get",params:e})}async function c(e){return r.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/recommend-list"),method:"get",params:e})}async function o(e){return r.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/nice"),method:"post",data:e})}async function d(e){return r.Z.request({url:"/web/genealogy-guide/article/".concat(e.articleId,"/cancel-nice"),method:"post",data:e})}},3055:function(e,t,a){"use strict";a.d(t,{default:function(){return ee}});var r=a(864),n=a(759),l=a(8195),s=a(2929),i=a(8067),c=a(2383),o=a.n(c),d=e=>{let{keyword:t,onKeywordChange:a,onSearch:l}=e,[s,c]=(0,n.useState)(t),d=(0,n.useRef)(null);return(0,n.useEffect)(()=>{c(t)},[t]),(0,r.jsx)("div",{className:o().searchBar,children:(0,r.jsx)("div",{className:o().searchContainer,children:(0,r.jsxs)("div",{className:o().searchBox,children:[(0,r.jsx)("input",{ref:d,type:"text",value:s,onChange:e=>{let t=e.target.value;c(t),a(t)},onKeyPress:e=>{"Enter"===e.key&&l()},placeholder:"搜索修谱攻略、关键词...",className:o().searchInput}),(0,r.jsx)("button",{onClick:()=>{l()},className:o().searchButton,"aria-label":"搜索",children:(0,r.jsx)(i.Z,{})})]})})})},_=a(827),u=a(5285),m=a(3807),h=a(7840),g=a(1426),x=a.n(g);let v={修谱入门:{bg:"bg-red-100",text:"text-red-800"},家谱制作:{bg:"bg-blue-100",text:"text-blue-800"},文化传承:{bg:"bg-green-100",text:"text-green-800"},数字化修谱:{bg:"bg-purple-100",text:"text-purple-800"},案例分析:{bg:"bg-yellow-100",text:"text-yellow-800"},常见问题:{bg:"bg-gray-100",text:"text-gray-800"}},p=e=>e?e.charAt(0).toUpperCase():"专",N=e=>e?new Date(e).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):"";var j=n.memo(e=>{let{article:t,onArticleClick:a}=e,n=v[t.categoryName]||{bg:"bg-gray-100",text:"text-gray-800"},l=N(t.publishedAt);return(0,r.jsx)("article",{className:x().articleCard,onClick:()=>a(t.id),children:(0,r.jsxs)("div",{className:x().cardContent,children:[t.coverUrl?(0,r.jsx)("div",{className:x().coverImage,children:(0,r.jsx)(_.default,{src:t.coverUrl,alt:t.title,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 33vw, 25vw",style:{objectFit:"cover"},priority:!1})}):(0,r.jsx)("div",{className:x().coverPlaceholder,children:(0,r.jsx)("div",{className:x().placeholderIcon,children:(0,r.jsx)("i",{className:"fas fa-book-open"})})}),(0,r.jsxs)("div",{className:x().articleContent,children:[(0,r.jsxs)("div",{className:x().metaInfo,children:[(0,r.jsx)("span",{className:"".concat(x().categoryTag," ").concat(n.bg," ").concat(n.text),children:t.categoryName}),l&&(0,r.jsx)("span",{className:x().metaItem,children:l}),(0,r.jsxs)("span",{className:x().metaItem,children:[(0,r.jsx)(u.Z,{className:x().metaIcon}),t.viewCount.toLocaleString()]}),(0,r.jsxs)("span",{className:x().metaItem,children:[(0,r.jsx)(m.Z,{className:x().metaIcon}),t.likeCount.toLocaleString()]})]}),(0,r.jsx)("h2",{className:x().title,children:t.title}),t.content&&(0,r.jsx)("p",{className:x().summary,children:t.content.length>120?"".concat(t.content.substring(0,120),"..."):t.content}),(0,r.jsxs)("div",{className:x().footer,children:[(0,r.jsxs)("div",{className:x().authorInfo,children:[(0,r.jsx)("div",{className:x().authorAvatar,children:p(t.authorName)}),(0,r.jsx)("span",{className:x().authorName,children:t.authorName||"专业修谱师"})]}),(0,r.jsxs)("div",{className:x().readMore,children:["阅读全文",(0,r.jsx)(h.Z,{className:x().arrowIcon})]})]})]})]})})}),C=a(1531),S=a.n(C),k=e=>{let{show:t=!0}=e;return t?(0,r.jsx)("div",{className:S().skeletonCard,children:(0,r.jsxs)("div",{className:S().cardContent,children:[(0,r.jsx)("div",{className:S().coverSkeleton}),(0,r.jsxs)("div",{className:S().contentSkeleton,children:[(0,r.jsxs)("div",{className:S().metaSkeleton,children:[(0,r.jsx)("div",{className:S().categorySkeleton}),(0,r.jsx)("div",{className:S().dateSkeleton}),(0,r.jsx)("div",{className:S().statsSkeleton}),(0,r.jsx)("div",{className:S().statsSkeleton})]}),(0,r.jsx)("div",{className:S().titleSkeleton}),(0,r.jsxs)("div",{className:S().summarySkeleton,children:[(0,r.jsx)("div",{className:S().line}),(0,r.jsx)("div",{className:S().line})]}),(0,r.jsxs)("div",{className:S().footerSkeleton,children:[(0,r.jsxs)("div",{className:S().authorSkeleton,children:[(0,r.jsx)("div",{className:S().avatarSkeleton}),(0,r.jsx)("div",{className:S().nameSkeleton})]}),(0,r.jsx)("div",{className:S().readMoreSkeleton})]})]})]})}):null},y=a(4017),b=a.n(y),f=e=>{let{articles:t,loading:a,onArticleClick:n}=e;return a&&0===t.length?(0,r.jsx)("div",{className:b().articleList,children:Array.from({length:5}).map((e,t)=>(0,r.jsx)(k,{},t))}):a||0!==t.length?(0,r.jsxs)("div",{className:b().articleList,children:[t.map(e=>(0,r.jsx)(j,{article:e,onArticleClick:n},e.id)),a&&t.length>0&&(0,r.jsx)("div",{className:b().loadingMore,children:(0,r.jsx)(k,{})})]}):(0,r.jsxs)("div",{className:b().emptyState,children:[(0,r.jsx)("div",{className:b().emptyIcon,children:(0,r.jsx)("i",{className:"fas fa-file-alt"})}),(0,r.jsx)("h3",{className:b().emptyTitle,children:"暂无文章"}),(0,r.jsx)("p",{className:b().emptyDescription,children:"当前分类下还没有文章，请尝试其他分类或搜索关键词"})]})},I=a(518),A=a.n(I),w=e=>{let{categories:t,selectedCategoryId:a,onCategoryChange:n}=e;return(0,r.jsxs)("div",{className:A().categoryFilter,children:[(0,r.jsx)("div",{className:A().header,children:(0,r.jsx)("span",{className:A().label,children:"分类："})}),(0,r.jsx)("div",{className:A().tagsContainer,children:t.map(e=>(0,r.jsx)("button",{onClick:()=>n(0===e.id?null:e.id),className:"".concat(A().categoryTag," ").concat(null===a&&0===e.id||a===e.id?A().active:""),children:e.name},e.id))})]})},B=a(3507),P=a(6129),T=a.n(P),Z=e=>{let{articles:t,onArticleClick:a}=e;return(0,r.jsxs)("div",{className:T().hotArticles,children:[(0,r.jsxs)("h3",{className:T().title,children:[(0,r.jsx)(B.Z,{className:T().titleIcon}),"热门文章"]}),(0,r.jsx)("div",{className:T().articleList,children:t.map((e,t)=>(0,r.jsxs)("div",{className:T().articleItem,onClick:()=>a(e.id),children:[(0,r.jsxs)("h4",{className:T().articleTitle,children:[(0,r.jsxs)("span",{className:T().rankNumber,children:[t+1,"."]}),e.title]}),(0,r.jsxs)("p",{className:T().articleMeta,children:[(0,r.jsx)(u.Z,{className:T().metaIcon}),e.viewCount.toLocaleString()," 阅读"]})]},e.id))})]})},M=a(4388),L=a(4250),R=a.n(L),z=()=>(0,r.jsxs)("div",{className:R().recommendedServices,children:[(0,r.jsxs)("h3",{className:R().title,children:[(0,r.jsx)(M.Z,{className:R().titleIcon}),"推荐服务"]}),(0,r.jsx)("div",{className:R().serviceList,children:["专业族谱编修服务","家谱数字化处理","家族文化咨询","修谱培训课程"].map((e,t)=>(0,r.jsxs)("div",{className:R().serviceItem,children:[(0,r.jsx)("i",{className:"fas fa-check-circle"}),(0,r.jsx)("span",{children:e})]},t))}),(0,r.jsx)("button",{className:R().consultButton,children:"立即咨询"})]}),D=a(1642),F=a.n(D);let K=["族谱修谱","家谱制作","文化传承","数字化","家族历史","修谱入门","案例分析","传统文化","亲情纽带"];var H=e=>{let{hotArticles:t,popularTags:a=K,onArticleClick:n,onTagClick:l}=e;return(0,r.jsx)("aside",{className:F().sidebar,children:(0,r.jsxs)("div",{className:F().sidebarContainer,children:[(0,r.jsx)(Z,{articles:t,onArticleClick:n}),(0,r.jsx)(z,{})]})})},U=a(150),E=a(5228),q=a(9923),O=a.n(q),X=e=>{let{current:t,total:a,pageSize:l,onChange:s,disabled:i=!1}=e,c=Math.ceil(a/l);if(c<=1)return null;let o=(()=>{let e=[];if(c>7){if(t<=4){for(let t=1;t<=5;t++)e.push(t);e.push("..."),e.push(c)}else if(t>=c-3){e.push(1),e.push("...");for(let t=c-4;t<=c;t++)e.push(t)}else{e.push(1),e.push("...");for(let a=t-1;a<=t+1;a++)e.push(a);e.push("..."),e.push(c)}}else for(let t=1;t<=c;t++)e.push(t);return e})(),d=e=>{e===t||i||s(e)};return(0,r.jsxs)("div",{className:O().pagination,children:[(0,r.jsx)("button",{onClick:()=>{t>1&&!i&&s(t-1)},disabled:1===t||i,className:"".concat(O().pageButton," ").concat(O().navButton," ").concat(1===t||i?O().disabled:""),"aria-label":"上一页",children:(0,r.jsx)(U.Z,{})}),o.map((e,a)=>(0,r.jsx)(n.Fragment,{children:"..."===e?(0,r.jsx)("span",{className:O().ellipsis,children:"..."}):(0,r.jsx)("button",{onClick:()=>d(e),disabled:i,className:"".concat(O().pageButton," ").concat(t===e?O().active:""),children:e})},a)),(0,r.jsx)("button",{onClick:()=>{t<c&&!i&&s(t+1)},disabled:t===c||i,className:"".concat(O().pageButton," ").concat(O().navButton," ").concat(t===c||i?O().disabled:""),"aria-label":"下一页",children:(0,r.jsx)(E.Z,{})})]})},Y=a(9121),J=a.n(Y),V=a(2474),Q=a(8333),W=a.n(Q);let G=["族谱修谱","家谱制作","文化传承","数字化","家族历史","修谱入门","案例分析","传统文化","亲情纽带"],$=()=>{var e;let t=(0,s.useRouter)(),a=(0,s.useSearchParams)(),{data:i,loading:c}=(0,l.Z)(()=>(0,V.k2)({page:1,pageSize:5}),{cacheKey:"genealogy-guide-hot-articles",staleTime:6e5}),o=(null==i?void 0:null===(e=i.data)||void 0===e?void 0:e.list)||[],{categories:_,getCategoryName:u}=function(){var e;let{data:t,loading:a,error:r,run:n}=(0,l.Z)(()=>(0,V.AT)(),{manual:!1,cacheKey:"genealogy-guide-categories",staleTime:3e5}),s=[{id:0,name:"全部"},...(null==t?void 0:null===(e=t.data)||void 0===e?void 0:e.list)||[]];return{categories:s,isLoading:a,error:(null==r?void 0:r.message)||null,fetchCategories:n,getCategoryName:e=>{if(!e)return"全部";let t=s.find(t=>t.id===e);return(null==t?void 0:t.name)||"全部"}}}(),{articles:m,pagination:h,isLoading:g,error:x,searchParams:v,search:p,setCategory:N,setPage:j}=function(){var e,t,a,r,s;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{pageSize:c=10,initialParams:o={}}=i,[d,_]=(0,n.useState)({page:1,pageSize:c,...o}),u=(0,n.useCallback)(e=>{_(t=>({...t,...e,page:void 0!==e.keyword||void 0!==e.categoryId?1:t.page}))},[]),m=(0,n.useCallback)(J()(e=>{u({keyword:e})},500),[u]),{data:h,loading:g,error:x,run:v,refresh:p}=(0,l.Z)(()=>(0,V.DA)({title:d.keyword,categoryId:d.categoryId||void 0,page:d.page,pageSize:d.pageSize}),{manual:!1,refreshDeps:[d],cacheKey:"genealogy-guide-articles-".concat(JSON.stringify(d)),staleTime:12e4}),N=(null==h?void 0:null===(e=h.data)||void 0===e?void 0:e.list)||[],j={current:(null==h?void 0:null===(t=h.data)||void 0===t?void 0:t.page)||1,pageSize:(null==h?void 0:null===(a=h.data)||void 0===a?void 0:a.pageSize)||c,total:(null==h?void 0:null===(r=h.data)||void 0===r?void 0:r.totalCount)||0,totalPages:(null==h?void 0:null===(s=h.data)||void 0===s?void 0:s.pageCount)||0},C=(0,n.useCallback)(e=>{m(e)},[m]),S=(0,n.useCallback)(e=>{u({categoryId:e})},[u]),k=(0,n.useCallback)(e=>{u({page:e})},[u]),y=(0,n.useCallback)(()=>{_({page:1,pageSize:c,...o})},[c,o]);return{articles:N,pagination:j,isLoading:g,error:(null==x?void 0:x.message)||null,searchParams:d,search:C,setCategory:S,setPage:k,reset:y,refresh:p}}({pageSize:10,initialParams:{keyword:a.get("keyword")||"",categoryId:a.get("categoryId")?Number(a.get("categoryId")):null,page:a.get("page")?Number(a.get("page")):1}});(0,n.useEffect)(()=>{let e=new URLSearchParams;v.keyword&&e.set("keyword",v.keyword),v.categoryId&&e.set("categoryId",v.categoryId.toString()),1!==(v.page||1)&&e.set("page",(v.page||1).toString());let a="".concat(window.location.pathname).concat(e.toString()?"?".concat(e.toString()):"");a!==window.location.href&&t.replace(a)},[v,t]);let C=(0,n.useCallback)(e=>{t.push("/detail/".concat(e))},[t]),S=(0,n.useCallback)(()=>{},[]),k=(0,n.useCallback)(e=>{p(e)},[p]);return(0,r.jsxs)("div",{className:W().newsPageContainer,children:[(0,r.jsx)("section",{className:W().heroSection,children:(0,r.jsxs)("div",{className:"container mx-auto px-6 text-center",children:[(0,r.jsx)("h1",{className:W().heroTitle,children:"修谱攻略"}),(0,r.jsx)("p",{className:W().heroDescription,children:"专业的修谱知识分享，助您了解族谱文化，掌握修谱技巧，传承家族历史"})]})}),(0,r.jsx)("section",{className:W().searchSection,children:(0,r.jsxs)("div",{className:"container mx-auto px-6 space-y-6",children:[(0,r.jsx)(d,{keyword:v.keyword||"",onKeywordChange:p,onSearch:S}),(0,r.jsx)(w,{categories:_,selectedCategoryId:v.categoryId||null,onCategoryChange:N})]})}),(0,r.jsx)("section",{className:W().mainSection,children:(0,r.jsx)("div",{className:"container mx-auto px-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-8",children:[(0,r.jsxs)("div",{className:"col-span-3",children:[(0,r.jsx)(f,{articles:m,loading:g,onArticleClick:C}),(0,r.jsx)(X,{current:h.current,total:h.total,pageSize:h.pageSize,onChange:j,disabled:g})]}),(0,r.jsx)("div",{className:"col-span-1",children:(0,r.jsx)(H,{hotArticles:o,popularTags:G,onArticleClick:C,onTagClick:k})})]})})})]})};var ee=()=>(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"container mx-auto px-6 py-12",children:"加载中..."}),children:(0,r.jsx)($,{})})},8333:function(e){e.exports={newsPageContainer:"NewsPageContainer_newsPageContainer__0vl6c",heroSection:"NewsPageContainer_heroSection__td1_j",heroTitle:"NewsPageContainer_heroTitle__rr_VF",heroDescription:"NewsPageContainer_heroDescription__8MBFv",searchSection:"NewsPageContainer_searchSection__GT7s_",mainSection:"NewsPageContainer_mainSection__B5J76",errorContainer:"NewsPageContainer_errorContainer__JjjdT",errorContent:"NewsPageContainer_errorContent__piwh0",retryButton:"NewsPageContainer_retryButton__pEjXF"}},1426:function(e){e.exports={articleCard:"ArticleCard_articleCard__kD9Kn",cardContent:"ArticleCard_cardContent__S5bmH",coverImage:"ArticleCard_coverImage__NUxV8",coverPlaceholder:"ArticleCard_coverPlaceholder__md23N",placeholderIcon:"ArticleCard_placeholderIcon__289_w",articleContent:"ArticleCard_articleContent__lB_U7",metaInfo:"ArticleCard_metaInfo__roIFM",categoryTag:"ArticleCard_categoryTag__fE_sa",metaItem:"ArticleCard_metaItem__f688_",metaIcon:"ArticleCard_metaIcon__EuUda",title:"ArticleCard_title__AwyKM",summary:"ArticleCard_summary__MSbzl",footer:"ArticleCard_footer__8_2_x",authorInfo:"ArticleCard_authorInfo__brbR0",authorAvatar:"ArticleCard_authorAvatar__R27PY",authorName:"ArticleCard_authorName__PCXgE",readMore:"ArticleCard_readMore__z_isp",arrowIcon:"ArticleCard_arrowIcon__M_Ye8"}},4017:function(e){e.exports={articleList:"ArticleList_articleList__x8lKA",emptyState:"ArticleList_emptyState__ZQm2m",emptyIcon:"ArticleList_emptyIcon__uXhYZ",emptyTitle:"ArticleList_emptyTitle__YSSbN",emptyDescription:"ArticleList_emptyDescription___i6Wr",loadingMore:"ArticleList_loadingMore__qbCoZ"}},518:function(e){e.exports={categoryFilter:"CategoryFilter_categoryFilter__PDxDk",header:"CategoryFilter_header__N0987",label:"CategoryFilter_label__sim_t",tagsContainer:"CategoryFilter_tagsContainer__Ka89M",categoryTag:"CategoryFilter_categoryTag__O5HZu",active:"CategoryFilter_active__VukMK"}},1531:function(e){e.exports={skeletonCard:"SkeletonCard_skeletonCard__9kgOa",pulse:"SkeletonCard_pulse__kztVu",cardContent:"SkeletonCard_cardContent__8jBb_",coverSkeleton:"SkeletonCard_coverSkeleton__Xto2n",contentSkeleton:"SkeletonCard_contentSkeleton__Ot_0U",metaSkeleton:"SkeletonCard_metaSkeleton__QtzBp",categorySkeleton:"SkeletonCard_categorySkeleton__PC8Hj",dateSkeleton:"SkeletonCard_dateSkeleton__w4tQX",statsSkeleton:"SkeletonCard_statsSkeleton__9iRii",titleSkeleton:"SkeletonCard_titleSkeleton__jM6MU",summarySkeleton:"SkeletonCard_summarySkeleton__eFaj9",line:"SkeletonCard_line__BvOY7",footerSkeleton:"SkeletonCard_footerSkeleton__A_tHa",authorSkeleton:"SkeletonCard_authorSkeleton__vUtuW",avatarSkeleton:"SkeletonCard_avatarSkeleton__Rch8h",nameSkeleton:"SkeletonCard_nameSkeleton__Ay8wZ",readMoreSkeleton:"SkeletonCard_readMoreSkeleton__qhM3y"}},9923:function(e){e.exports={pagination:"Pagination_pagination__BRP5_",pageButton:"Pagination_pageButton__cTuOf",navButton:"Pagination_navButton__dRxSk",disabled:"Pagination_disabled__RCGzu",active:"Pagination_active__gVXrx",ellipsis:"Pagination_ellipsis__1ttH1"}},2383:function(e){e.exports={searchBar:"SearchBar_searchBar__n9_8S",searchContainer:"SearchBar_searchContainer__ma4Tk",searchBox:"SearchBar_searchBox__H1btV",searchInput:"SearchBar_searchInput__mJ0aK",searchButton:"SearchBar_searchButton__sbahA"}},6129:function(e){e.exports={hotArticles:"HotArticles_hotArticles__zI2yR",title:"HotArticles_title__Ml628",titleIcon:"HotArticles_titleIcon__fKsr_",articleList:"HotArticles_articleList__y7iLK",articleItem:"HotArticles_articleItem__EAXj_",articleTitle:"HotArticles_articleTitle__JQarU",rankNumber:"HotArticles_rankNumber__4voKf",articleMeta:"HotArticles_articleMeta__7G5SK",metaIcon:"HotArticles_metaIcon__3m5nK"}},4250:function(e){e.exports={recommendedServices:"RecommendedServices_recommendedServices__PfDxd",title:"RecommendedServices_title__5yp4G",titleIcon:"RecommendedServices_titleIcon__UvWjh",serviceList:"RecommendedServices_serviceList__3Y9Wl",serviceItem:"RecommendedServices_serviceItem__7O18Y",consultButton:"RecommendedServices_consultButton__RJBAv"}},1642:function(e){e.exports={sidebar:"Sidebar_sidebar__kPaNX",sidebarContainer:"Sidebar_sidebarContainer__DWo1_"}}},function(e){e.O(0,[340,352,732,195,219,517,259,973,744],function(){return e(e.s=2456)}),_N_E=e.O()}]);