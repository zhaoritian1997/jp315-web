(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{531:function(e,t,n){Promise.resolve().then(n.bind(n,8256)),Promise.resolve().then(n.bind(n,8397)),Promise.resolve().then(n.bind(n,5974)),Promise.resolve().then(n.t.bind(n,9339,23))},2929:function(e,t,n){"use strict";var o=n(7514);n.o(o,"usePathname")&&n.d(t,{usePathname:function(){return o.usePathname}}),n.o(o,"useRouter")&&n.d(t,{useRouter:function(){return o.useRouter}}),n.o(o,"useSearchParams")&&n.d(t,{useSearchParams:function(){return o.useSearchParams}})},8256:function(e,t,n){"use strict";n.d(t,{default:function(){return s}});var o=n(864),r=n(759),i=n(2929),c=n(2803);function s(e){let{children:t}=e,n=(0,i.useRouter)(),s=(0,i.usePathname)();return(0,r.useEffect)(()=>{"/city"!==s&&(c.X.getCityCode()||n.replace("/city?redirect=".concat(encodeURIComponent(s))))},[n,s]),(0,o.jsx)(o.Fragment,{children:t})}},8397:function(e,t,n){"use strict";n.d(t,{default:function(){return r}});var o=n(759);function r(){return(0,o.useEffect)(()=>{document.addEventListener("DOMContentLoaded",function(){document.body.classList.add("loaded")}),"loading"===document.readyState||document.body.classList.add("loaded")},[]),null}},5974:function(e,t,n){"use strict";n.d(t,{UserProvider:function(){return c}});var o=n(864),r=n(759);let i=(0,r.createContext)({isLoggedIn:!1,userInfo:null}),c=e=>{let{children:t}=e,[n,c]=(0,r.useState)(!1),[s,u]=(0,r.useState)(null);return(0,o.jsx)(i.Provider,{value:{isLoggedIn:n,userInfo:s},children:t})}},5640:function(e,t,n){"use strict";let o;n.r(t),n.d(t,{createStorage:function(){return r},getStorage:function(){return c},storage:function(){return i}});let r=function(){let{prefixKey:e="",storage:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t||(t=localStorage),new class{getKey(e){return"".concat(this.prefixKey).concat(e).toUpperCase()}set(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2592e3,o=JSON.stringify({value:t,expire:null!==n?new Date().getTime()+1e3*n:null});this.storage.setItem(this.getKey(e),o)}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.storage.getItem(this.getKey(e));if(n)try{let{value:t,expire:o}=JSON.parse(n);if(null===o||o>=Date.now())return t;this.remove(this.getKey(e))}catch(e){}return t}remove(e){this.storage.removeItem(this.getKey(e))}clear(){this.storage.clear()}setCookie(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2592e3;document.cookie="".concat(this.getKey(e),"=").concat(t,"; Max-Age=").concat(n)}getCookie(e){let t=document.cookie.split("; ");for(let n=0,o=t.length;n<o;n++){let o=t[n].split("=");if(o[0]===this.getKey(e))return o[1]}return""}removeCookie(e){this.setCookie(e,1,-1)}clearCookie(){let e=document.cookie.match(/[^ =;]+(?==)/g);if(e)for(let t=e.length;t--;)document.cookie=e[t]+"=0;expire="+new Date(0).toUTCString()}constructor(){this.prefixKey=e,this.storage=t||{getItem:()=>null,setItem:()=>{},removeItem:()=>{},clear:()=>{},length:0,key:()=>null}}}},i=(o=null,()=>(o||(o=r()),o)),c=i;t.default=Storage},2803:function(e,t,n){"use strict";n.d(t,{X:function(){return r}});class o{getStorage(){return n(5640).getStorage()}getCityCode(){try{let e=document.cookie.split("; ");for(let t=0,n=e.length;t<n;t++){let n=e[t].split("=");if(n[0]===this.COOKIE_KEY)return decodeURIComponent(n[1]||"")}return null}catch(e){return console.error("获取城市code失败:",e),null}}setCityCode(e){try{let t=new Date;t.setTime(t.getTime()+864e5*this.EXPIRE_DAYS),document.cookie="".concat(this.COOKIE_KEY,"=").concat(encodeURIComponent(e),"; expires=").concat(t.toUTCString(),"; path=/; SameSite=Lax")}catch(e){console.error("设置城市code失败:",e)}}removeCityCode(){try{document.cookie="".concat(this.COOKIE_KEY,"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=Lax")}catch(e){console.error("删除城市code失败:",e)}}hasCityCode(){return!!this.getCityCode()}constructor(){this.COOKIE_KEY="CITYCODE",this.EXPIRE_DAYS=30}}let r=new o},9339:function(){}},function(e){e.O(0,[830,259,973,744],function(){return e(e.s=531)}),_N_E=e.O()}]);