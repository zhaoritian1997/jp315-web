"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[704],{50768:function(e,t,a){a.d(t,{A:function(){return f}});a(35415);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"新建类目",visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,width:600,footer:null},on:{cancel:e.cancelHandel}},[t("div",[t("div",[e._v("系统类目")]),t("a-spin",{attrs:{spinning:e.loading}},[t("div",{staticClass:"list mt8"},e._l(e.sysClanList,function(a){return t("div",{key:a.id,staticClass:"item"},[t("div",{staticClass:"edit-input",class:e.selectedCategory.id===a.id?"on":"",on:{click:function(t){return e.handleClick(a)}}},[e._v(e._s(a.name))])])}),0)]),t("div",[t("a-checkbox",{staticClass:"mr6",on:{change:e.handleCheckbox}}),e._v("自定义类目")],1),t("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:19}},on:{submit:e.handleSubmit}},[e.custom?t("a-form-item",{staticClass:"form-wrap",attrs:{label:"类目名称"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入类目名称"}]}],expression:"['name', {rules: [{ required: true, message: '请输入类目名称' }]}]"}],attrs:{placeholder:"请输入类目名称",maxLength:"50"}})],1):e._e(),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[t("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading,"html-type":"submit"}},[e._v("确定")])],1)],1)],1)])},n=[],i=a(55736),s=a(40400),o=a(60990),l=(a(13055),a(79640),a(50651)),c={name:"AddCategory",data:function(){return{visible:!0,sysClanList:[],custom:!1,loading:!1,confirmLoading:!1,selectedCategory:{},form:this.$form.createForm(this)}},props:{editItem:{type:Object,default:null}},computed:(0,o.A)({},(0,l.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId}})),mounted:function(){var e=this;return(0,s.A)((0,i.A)().m(function t(){var a;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:return e.loading=!0,t.n=1,e.GetCategoryList({clanId:e.currentSelectedClanId});case 1:a=t.v,e.loading=!1,200===a.code&&(e.sysClanList=a.data.List.filter(function(e){return 1===e.is_system}));case 2:return t.a(2)}},t)}))()},methods:(0,o.A)((0,o.A)({},(0,l.i0)(["GetCategoryList","AddCategory"])),{},{handleClick:function(e){this.selectedCategory=e},handleAdd:function(){this.visible=!0},cancelHandel:function(){this.visible=!1,this.$emit("close")},handleCheckbox:function(e){this.custom=e.target.checked},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,r=this.AddCategory,n={clan_id:this.currentSelectedClanId};a(function(){var e=(0,s.A)((0,i.A)().m(function e(a,s){var o;return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:if(a){e.n=5;break}if(!t.custom){e.n=1;break}n.name=s.name,n.type=0,e.n=3;break;case 1:if(t.selectedCategory.id){e.n=2;break}return t.$message.error("请选择类目"),e.a(2);case 2:n.name=t.selectedCategory.name,n.type=t.selectedCategory.is_system;case 3:return t.confirmLoading=!0,e.n=4,r(n);case 4:o=e.v,t.confirmLoading=!1,200===o.code&&(t.$emit("refresh"),t.$emit("close"));case 5:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}())}})},u=c,d=a(20899),m=(0,d.A)(u,r,n,!1,null,"79fe5918",null),f=m.exports},91817:function(e,t,a){a.d(t,{A:function(){return f}});a(35415),a(16663);var r=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"新建谱文",visible:e.visible,maskClosable:!1,confirmLoading:e.confirmLoading,width:600,footer:null},on:{cancel:e.cancelHandel}},[t("a-form",{attrs:{form:e.form,"label-col":{span:4},"wrapper-col":{span:19}},on:{submit:e.handleSubmit}},[t("a-form-item",{staticClass:"form-wrap",attrs:{label:"谱文标题"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入谱文标题"}],normalize:function(e){return e&&e.trim()}}],expression:"['name', {\n          rules: [{ required: true, message: '请输入谱文标题' }],\n          normalize: (value) => value && value.trim()\n        }]"}],attrs:{placeholder:"请输入谱文标题",suffix:e.len+"/100",maxLength:100},on:{change:e.handleChange}})],1),t("a-form-item",{staticClass:"form-wrap",attrs:{label:"谱文布局"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["layout",{rules:[{required:!0,message:"请选择谱文布局"}]}],expression:"['layout', {rules: [{ required: true, message: '请选择谱文布局' }]}]"}],attrs:{placeholder:"请选择谱文布局"}},[t("a-select-option",{attrs:{value:"横向左开"}},[e._v("横向左开")]),t("a-select-option",{attrs:{value:"竖向右开"}},[e._v("竖向右开")]),t("a-select-option",{attrs:{value:"竖向左开"}},[e._v("竖向左开")])],1)],1),t("a-form-item",{staticClass:"form-wrap",attrs:{label:"纸张"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["print_id",{rules:[{required:!0,message:"请选择纸张"}]}],expression:"['print_id', {rules: [{ required: true, message: '请选择纸张' }]}]"}],attrs:{placeholder:"请选择纸张"}},[t("a-select-option",{attrs:{value:1}},[e._v("默认纸张")]),t("a-select-option",{attrs:{value:2}},[e._v("横向纸张")])],1)],1),e.category?e._e():t("a-form-item",{staticClass:"form-wrap",attrs:{label:"类目名称"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["category_id",{rules:[{required:!1,message:"请选择类目名称"}]}],expression:"['category_id', {rules: [{ required: false, message: '请选择类目名称' }]}]"}],attrs:{placeholder:"请选择类目名称"}},e._l(e.sysClanList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])}),1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[t("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),t("a-button",{attrs:{type:"primary",loading:e.confirmLoading,"html-type":"submit"}},[e._v("确定")])],1)],1)],1)},n=[],i=a(55736),s=a(40400),o=a(60990),l=(a(13055),a(6082),a(79640),a(50651)),c={name:"AddArticle",data:function(){return{visible:!0,sysClanList:[],loading:!1,len:0,confirmLoading:!1,selectedCategory:{},form:this.$form.createForm(this)}},computed:(0,o.A)({},(0,l.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId}})),props:{category:{type:Object,default:null}},mounted:function(){var e=this;return(0,s.A)((0,i.A)().m(function t(){var a;return(0,i.A)().w(function(t){while(1)switch(t.n){case 0:return e.loading=!0,t.n=1,e.GetCategoryList({clanId:e.currentSelectedClanId});case 1:a=t.v,e.loading=!1,200===a.code&&(e.sysClanList=a.data.List.filter(function(e){return 1===e.is_system}));case 2:return t.a(2)}},t)}))()},methods:(0,o.A)((0,o.A)({},(0,l.i0)(["AddClanArticle","GetCategoryList"])),{},{handleChange:function(e){this.len=e.target.value.length},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.form.validateFields,r=this.AddClanArticle;a(function(){var e=(0,s.A)((0,i.A)().m(function e(a,n){var s,l,c;return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:if(a){e.n=2;break}return s=(0,o.A)({clan_id:t.currentSelectedClanId},n),s.category_id&&(l=t.sysClanList.find(function(e){return e.id===s.category_id}),l&&(s.category_name=l.name)),t.category&&(s.category_name=t.category.name,s.category_id=t.category.id),t.confirmLoading=!0,e.n=1,r(s);case 1:c=e.v,t.confirmLoading=!1,200===c.code&&(t.$emit("refresh"),t.$emit("close"));case 2:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}())},cancelHandel:function(){this.visible=!1,this.$emit("close")}})},u=c,d=a(20899),m=(0,d.A)(u,r,n,!1,null,"afeb8944",null),f=m.exports}}]);