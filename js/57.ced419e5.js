"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[57],{3109:function(t,e,i){i.d(e,{A:function(){return l}});var n=function(){var t=this,e=t._self._c;return"down"===t.type?e("img",{class:t.classStr,attrs:{src:i(66821),alt:""}}):e("img",{class:t.classStr,attrs:{src:i(65850),alt:""}})},a=[],s={name:"ClanMarkImg",props:{classStr:{type:String,default:""},type:{type:String,default:"top"}}},o=s,c=i(20899),r=(0,c.A)(o,n,a,!1,null,"a038634e",null),l=r.exports},8737:function(t,e,i){i.r(e),i.d(e,{default:function(){return Xt}});var n={};i.r(n),i.d(n,{TOOL_BAR_ACTION_ADD_FONT_SIZE:function(){return z},TOOL_BAR_ACTION_ALIGNMENT:function(){return G},TOOL_BAR_ACTION_BOLD:function(){return S},TOOL_BAR_ACTION_BORDER:function(){return ut},TOOL_BAR_ACTION_BOTH_END_JUSTIFYING:function(){return Z},TOOL_BAR_ACTION_CENTER_JUSTIFYING:function(){return W},TOOL_BAR_ACTION_DELETE:function(){return L},TOOL_BAR_ACTION_DISTRIBUTE_JUSTIFYING:function(){return K},TOOL_BAR_ACTION_FIRST_LINE_INDENTATION:function(){return Y},TOOL_BAR_ACTION_FONT_COLOR:function(){return P},TOOL_BAR_ACTION_FONT_DIRECTION:function(){return F},TOOL_BAR_ACTION_FONT_FAMILY:function(){return E},TOOL_BAR_ACTION_FONT_SIZE:function(){return R},TOOL_BAR_ACTION_FONT_SPACING:function(){return $},TOOL_BAR_ACTION_GENERATION:function(){return ct},TOOL_BAR_ACTION_GET_CENTER_JUSTIFYING:function(){return tt},TOOL_BAR_ACTION_GET_DOWN_JUSTIFYING:function(){return et},TOOL_BAR_ACTION_GET_UP_JUSTIFYING:function(){return Q},TOOL_BAR_ACTION_HORIZONTAL_INPUT:function(){return nt},TOOL_BAR_ACTION_INSERT_PICTURE:function(){return st},TOOL_BAR_ACTION_INSERT_TEXT:function(){return j},TOOL_BAR_ACTION_ITALIC:function(){return k},TOOL_BAR_ACTION_LEFT_JUSTIFYING:function(){return V},TOOL_BAR_ACTION_LEVEL:function(){return ot},TOOL_BAR_ACTION_MAKE_FONT:function(){return H},TOOL_BAR_ACTION_PADDING:function(){return dt},TOOL_BAR_ACTION_PAGE_MARGIN_SETTING:function(){return it},TOOL_BAR_ACTION_REDO:function(){return x},TOOL_BAR_ACTION_REDUCE_FONT_SIZE:function(){return U},TOOL_BAR_ACTION_REVOKE:function(){return y},TOOL_BAR_ACTION_RIGHT_JUSTIFYING:function(){return q},TOOL_BAR_ACTION_ROW_HEIGHT:function(){return M},TOOL_BAR_ACTION_SAVE:function(){return w},TOOL_BAR_ACTION_SHAPE:function(){return lt},TOOL_BAR_ACTION_STRIKETHROUGH:function(){return D},TOOL_BAR_ACTION_TABLE:function(){return rt},TOOL_BAR_ACTION_TRANSFORM_SIMPLIFIED:function(){return X},TOOL_BAR_ACTION_TRANSFORM_TRADITIONAL:function(){return J},TOOL_BAR_ACTION_UNDERLINE:function(){return B},TOOL_BAR_ACTION_VERTICAL_INPUT:function(){return at}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex pu-wen-container"},[e("left-content",{on:{update:t.handleUpdate}}),e("div",{staticClass:"flex-1"},[t.currentSelectedClanId?e("tool-bar"):t._e(),t.currentSelectedClanId?e("div",{staticClass:"flex flex-direction-row"},[e("div",{staticClass:"flex-1 justify-items-center"},[e("edit-content",{key:t.currentSelectedArticleId+t.currentPageNum,attrs:{"page-num":t.currentPageNum,article:t.currentSelectedArticle}})],1),e("div",{staticStyle:{width:"200px","background-color":"#e5e5e5"}},[e("pw-right-content",{key:t.currentSelectedArticleId})],1)]):t._e(),e("a-empty",{directives:[{name:"show",rawName:"v-show",value:!t.currentSelectedClanId,expression:"!currentSelectedClanId"}]})],1)],1)},s=[],o=i(55736),c=i(40400),r=i(60990),l=(i(7637),i(79640),i(97693),i(50651)),d=i(55126),u=i.n(d),h=i(88079),f=(i(88116),i(35415),i(22282),function(){var t,e,i=this,n=i._self._c;return n("div",{class:i.toggleClass()},[n("div",{staticClass:"toggle-btn",attrs:{title:"收起"},on:{click:i.handleToggle}},[n("i",[i._v(i._s(i.visible?"<":">"))]),n("div",{staticClass:"hint"},[n("div",[i._v("点")]),n("div",[i._v("击")]),n("div",[i._v(i._s(i.visible?"收":"展"))]),n("div",[i._v(i._s(i.visible?"起":"开"))])])]),i.visible?n("div",[n("div",{staticClass:"demo",on:{click:function(t){i.showFamilyBaseInfo=!0}}},[n("span",{staticClass:"tag tag-fanli"},[i._v("管理")]),n("span",{staticClass:"name line-word"},[i._v(i._s(null===(t=i.clan)||void 0===t?void 0:t.name))]),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarchaxun"})]),n("div",{staticClass:"operate"},[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzengjiawenzhang",attrs:{title:"新建谱文"},on:{click:function(t){return i.handleArticle()}}}),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarkongxinjiantou1",attrs:{title:"下移"},on:{click:function(t){return i.handleMove("up")}}}),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarkongxinjiantou",attrs:{title:"上移"},on:{click:function(t){return i.handleMove("up")}}}),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfuzhi",attrs:{title:"复制"},on:{click:function(t){return i.handleCopy()}}}),n("br"),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1",attrs:{title:"删除"},on:{click:function(t){return i.handleTopDelete()}}}),n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarmigrate",attrs:{title:"文章迁移"},on:{click:function(t){return i.handleQianYi()}}})]),n("a-divider",{staticStyle:{margin:"12px 0"}}),n("a-spin",{attrs:{spinning:i.groupListLoading}},[n("div",{staticClass:"catalog-li"},[i._l(i.groupList,function(t){return n("div",{key:t.id,staticClass:"catalog-item"},[n("div",{staticClass:"title",class:i.selectedCategoryId===t.id?" selected":"",on:{click:function(e){return i.toggleCategory(t.id)}}},[n("div",[n("i",{staticClass:"cus-edit-toolbar-icon",class:i.openCategoryIdList.includes(t.id)?"icon-edit-toolbardakai":"icon-edit-toolbarwenjianjia",staticStyle:{"font-size":"16px",margin:"0"}}),i._v(" "+i._s(t.name)+" ")]),n("div",[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiugai dynamic-icon",staticStyle:{"font-size":"16px",margin:"0"},on:{click:function(e){return i.handleEdit(t,e)}}}),n("a-popconfirm",{attrs:{title:"确定删除类目?",placement:"bottom"},on:{confirm:function(e){return i.remove(t.id)}}},[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1 dynamic-icon",staticStyle:{"font-size":"16px",margin:"0"},on:{click:function(e){return i.handleDelete(t.id,e)}}})])],1)]),n("div",{directives:[{name:"show",rawName:"v-show",value:i.openCategoryIdList.includes(t.id),expression:"openCategoryIdList.includes(item.id)"}],staticClass:"article-item"},[i._l(t.article_info,function(e){return n("div",{key:e.id,staticClass:"c-pointer-hover mt4 flex justify-content-space-between",class:i.selectedArticleId===e.id?" selected":"",on:{click:function(n){return i.handleArticleClick(e,t)}}},[n("div",[i._v(i._s(e.name))]),n("div",[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiugai dynamic-icon",staticStyle:{"font-size":"16px",margin:"0"},on:{click:function(t){return i.handleArticleEdit(e,t)}}}),n("a-popconfirm",{attrs:{title:"确定删除谱文?",placement:"bottom"},on:{confirm:function(t){return i.removeArticle(e.id,t)}}},[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1 dynamic-icon",staticStyle:{"font-size":"16px",margin:"0"},on:{click:function(t){return i.handleDeleteArticle(e.id,t)}}})])],1)])}),n("div",{staticClass:"add-btn mt4",on:{click:function(e){return i.handleAddArticle(t)}}},[i._v("新建谱文")])],2)])}),n("a-empty",{directives:[{name:"show",rawName:"v-show",value:0===(null===(e=i.groupList)||void 0===e?void 0:e.length),expression:"groupList?.length===0"}]})],2)]),n("div",{staticClass:"add-category"},[n("div",{on:{click:function(t){return i.handleAddCategory()}}},[n("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzengjiawenjianjia"}),i._v("新建类目")])])],1):i._e(),i.addCategoryModal?n("add-category",{on:{close:function(t){i.addCategoryModal=!1},refresh:i.getList}}):i._e(),i.addArticleModal?n("add-article",{attrs:{category:i.selectedAddArticleCategory},on:{close:function(t){i.addArticleModal=!1},refresh:i.getList}}):i._e(),i.showFamilyBaseInfo?n("family-info-component",{on:{close:function(t){i.showFamilyBaseInfo=!1}}}):i._e()],1)}),_=[],p=(i(69262),i(48292)),v=(i(13055),i(16663),i(50768)),m=i(91817),C=i(48179),I={name:"LeftContentForPW",components:{FamilyInfoComponent:C.A,AddCategory:v.A,AddArticle:m.A},data:function(){return{visible:!0,showFamilyBaseInfo:!1,addCategoryModal:!1,addArticleModal:!1,selectedAddArticleCategory:null,openCategoryIdList:[],selectedCategoryId:"",selectedArticleId:"",groupListLoading:!1,groupList:[],editItem:null,clan:{}}},computed:(0,r.A)({},(0,l.aH)({currentSelectedClanId:function(t){return t.family.currentSelectedClanId},currentSelectedGroupId:function(t){return t.family.currentSelectedGroupId},currentSelectedPedigreeId:function(t){return t.px.currentSelectedPedigreeId}})),mounted:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){var i;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,t.getList();case 1:if(t.currentSelectedGroupId){e.n=2;break}return e.a(2);case 2:return e.n=3,t.GetCurrentClan();case 3:i=e.v,t.clan=i;case 4:return e.a(2)}},e)}))()},methods:(0,r.A)((0,r.A)({},(0,l.i0)(["GetClanArticleList","DeletedCategory","UpdateCategory","GetCurrentClan","UpdateClanArticle"])),{},{toggleCategory:function(t){this.openCategoryIdList.includes(t)?this.openCategoryIdList=this.openCategoryIdList.filter(function(e){return e!==t}):this.openCategoryIdList.push(t)},handleArticleClick:function(t,e){this.selectedCategoryId=e.id,this.selectedArticleId=t.id,this.$emit("update",{article:t,category:e})},handleAddCategory:function(){this.currentSelectedClanId?this.addCategoryModal=!0:this.$message.info("请先添加家族")},handleArticle:function(){this.currentSelectedClanId?this.addArticleModal=!0:this.$message.info("请先添加家族")},handleMove:function(t){var e=this;return(0,c.A)((0,o.A)().m(function i(){var n;return(0,o.A)().w(function(i){while(1)switch(i.n){case 0:if(e.currentSelectedClanId){i.n=1;break}return e.$message.info("请选择要移动的文章"),i.a(2);case 1:e.$message.info("移动信息待完善"),n=t,i.n="up"===n?2:"down"===n?3:4;break;case 2:return i.a(3,4);case 3:return i.a(3,4);case 4:return i.a(2)}},i)}))()},handleCopy:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(t.currentSelectedClanId){e.n=1;break}return t.$message.info("请选择要复制的文章"),e.a(2);case 1:t.loading=!0,t.loading=!1;case 2:return e.a(2)}},e)}))()},handleTopDelete:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(t.currentSelectedClanId){e.n=1;break}return t.$message.info("请选择要删除的文章"),e.a(2);case 1:t.loading=!0,t.loading=!1;case 2:return e.a(2)}},e)}))()},handleQianYi:function(){this.currentSelectedClanId?(this.loading=!0,this.loading=!1):this.$message.info("请选择要迁移的文章")},handleEdit:function(t,e){var i=this,n=this.$createElement;e.stopPropagation();var a=this.UpdateCategory,s=this;p.A.confirm({title:"修改谱文类目",icon:null,content:n("a-input",{ref:"editInput",attrs:{id:"editInput"}}),onOk:function(){return(0,c.A)((0,o.A)().m(function e(){var i,n;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(i=document.getElementById("editInput").value.trim(),i){e.n=1;break}return s.$message.error("请输入类目名称"),e.a(2);case 1:return e.n=2,a({category_id:t.id,name:i,clan_id:s.currentSelectedClanId});case 2:if(n=e.v,!n||200!==n.code){e.n=4;break}return s.$message.success("修改成功"),e.n=3,s.getList();case 3:e.n=5;break;case 4:s.$message.error(n.message||"修改失败");case 5:return e.a(2)}},e)}))()},onCancel:function(){}}),this.$nextTick(function(){i.$refs.editInput.value=t.name})},handleDelete:function(t,e){return(0,c.A)((0,o.A)().m(function t(){return(0,o.A)().w(function(t){while(1)switch(t.n){case 0:e.stopPropagation();case 1:return t.a(2)}},t)}))()},remove:function(t){var e=this;return(0,c.A)((0,o.A)().m(function i(){var n,a,s;return(0,o.A)().w(function(i){while(1)switch(i.n){case 0:return n=e.DeletedCategory,a=e.currentSelectedClanId,i.n=1,n({category_id:t,clan_id:a});case 1:if(s=i.v,!s||200!==s.code){i.n=3;break}return e.$message.success("删除成功"),i.n=2,e.getList();case 2:i.n=4;break;case 3:e.$message.error(s.message||"删除失败");case 4:return i.a(2)}},i)}))()},handleAddArticle:function(t){var e=this;return(0,c.A)((0,o.A)().m(function i(){return(0,o.A)().w(function(i){while(1)switch(i.n){case 0:if(e.currentSelectedClanId){i.n=1;break}return e.$message.info("请先添加家族"),i.a(2);case 1:e.selectedAddArticleCategory=t,e.addArticleModal=!0;case 2:return i.a(2)}},i)}))()},removeArticle:function(t,e){return(0,c.A)((0,o.A)().m(function t(){return(0,o.A)().w(function(t){while(1)switch(t.n){case 0:e.stopPropagation();case 1:return t.a(2)}},t)}))()},handleArticleEdit:function(t,e){var i=this;return(0,c.A)((0,o.A)().m(function n(){var a,s,r;return(0,o.A)().w(function(n){while(1)switch(n.n){case 0:a=i.$createElement,e.stopPropagation(),s=i.UpdateClanArticle,r=i,p.A.confirm({title:"修改谱文标题",icon:null,content:a("a-input",{ref:"editInput",attrs:{id:"articleInput"}}),onOk:function(){return(0,c.A)((0,o.A)().m(function e(){var i,n;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(i=document.getElementById("articleInput").value.trim(),i){e.n=1;break}return r.$message.error("请输入谱文标题"),e.a(2);case 1:return e.n=2,s({id:t.id,name:i,clan_id:r.currentSelectedClanId});case 2:if(n=e.v,!n||200!==n.code){e.n=4;break}return r.$message.success("修改成功"),e.n=3,r.getList();case 3:e.n=5;break;case 4:r.$message.error(n.message||"修改失败");case 5:return e.a(2)}},e)}))()},onCancel:function(){}}),i.$nextTick(function(){i.$refs.editInput.value=t.name});case 1:return n.a(2)}},n)}))()},handleDeleteArticle:function(t,e){var i=this;return(0,c.A)((0,o.A)().m(function t(){return(0,o.A)().w(function(t){while(1)switch(t.n){case 0:e.stopPropagation(),i.$message.info("删除信息待完善");case 1:return t.a(2)}},t)}))()},getList:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){var i,n,a,s;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(i=t.GetClanArticleList,n=t.currentSelectedClanId,n){e.n=1;break}return e.a(2);case 1:return t.groupListLoading=!0,e.n=2,i({clan_id:n});case 2:a=e.v,t.groupListLoading=!1,200===a.code&&(s=a.data.list,t.groupList=s,t.handleDefaultSelected(s));case 3:return e.a(2)}},e)}))()},handleDefaultSelected:function(t){var e=this;if((null===t||void 0===t?void 0:t.length)>0){var i=this.openCategoryIdList,n=this.selectedCategoryId,a=this.selectedArticleId;n||a||0!==i.length||t.forEach(function(t){var i;if(null!==(i=t.article_info)&&void 0!==i&&i.length&&!e.selectedCategoryId){e.selectedCategoryId=t.id,e.selectedArticleId=t.article_info[0].id,e.openCategoryIdList.push(t.id);var n=t,a=t.article_info[0];e.$emit("update",{article:a,category:n})}})}},handleToggle:function(){this.visible=!this.visible},toggleClass:function(){return this.visible?"left-content":"left-content close"}})},A=I,O=i(20899),g=(0,O.A)(A,f,_,!1,null,"09266388",null),T=g.exports,b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"cus-edit-tool-bar"},[e("div",{staticClass:"tool-bar"},[e("div",{staticClass:"section flex-row first-section"},[e("div",{staticClass:"column icon-group"},[e("div",{staticClass:"tool-item c-pointer-hover",attrs:{title:"撤销"},on:{click:function(e){return t.handleClick()}}},[t._m(0)]),e("div",{staticClass:"tool-item c-pointer-hover",attrs:{title:"重做"},on:{click:function(e){return t.handleClick()}}},[t._m(1)])]),e("div",{staticClass:"column icon-group c-pointer-hover",on:{click:t.handleSave}},[t._m(2),t._m(3)]),e("div",{staticClass:"column icon-group c-pointer-hover"},[e("div",{staticClass:"tool-item",attrs:{title:"删除"}},[e("div",{staticClass:"item"},[e("span",{staticClass:"f28 cus-edit-toolbar-icon icon-edit-toolbarshanchu",on:{click:function(e){return t.handleClick(t.action.TOOL_BAR_ACTION_DELETE)}}})])]),t._m(4)])]),e("div",{staticClass:"section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"combox"},[e("div",{staticClass:"item"},[e("div",{attrs:{id:"components-dropdown-demo-placement"}},[e("a-dropdown",{attrs:{placement:"bottomCenter"},on:{change:function(e){return t.handleClick()}}},[e("div",[t._v("宋体")]),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[t._v(" 宋体 ")]),e("a-menu-item",[t._v(" 宋体2 ")]),e("a-menu-item",[t._v(" 宋体3 ")])],1)],1)],1)]),e("div",{staticClass:"item"},[t._v(" 12px ")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(5)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(6)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(7)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(8)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(9)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(10)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(11)])])]),e("div",{staticClass:"section"},[e("div",{staticClass:"row"},[e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(12)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(13)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(14)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(15)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(16)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(17)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(18)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(19)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(20)])]),e("div",{staticClass:"row"},[e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(21)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(22)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(23)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(24)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(25)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(26)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(27)]),e("div",{staticClass:"el-tooltip tool-item c-pointer-hover",on:{click:function(e){return t.handleClick()}}},[t._m(28)])])]),e("div",{staticClass:"section flex-row"},[e("div",{staticClass:"column icon-group"},[t._m(29),e("div",{staticClass:"text"},[e("a-dropdown",{attrs:{placement:"bottomCenter"}},[e("div",[t._v("文本框"),e("a-icon",{attrs:{type:"caret-down"}})],1),e("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[e("a-menu-item",[e("a",{staticClass:"c-pointer-hover",attrs:{href:"javascript:;"},on:{click:function(e){return t.handleClick(t.action.TOOL_BAR_ACTION_HORIZONTAL_INPUT)}}},[t._v("水平文本框")])]),e("a-menu-item",[e("a",{staticClass:"c-pointer-hover",attrs:{href:"javascript:;"},on:{click:function(e){return t.handleClick(t.action.TOOL_BAR_ACTION_VERTICAL_INPUT)}}},[t._v("竖直文本框")])])],1)],1)],1)]),e("div",{staticClass:"column icon-group"},[e("div",{staticClass:"tool-item c-pointer-hover",attrs:{title:"图片"}},[e("div",{staticClass:"item"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarchexiao_o"}),e("span",{on:{click:function(e){return t.handleClick("add-img","http://localhost:8000/img/photo.05cc0248.png")}}},[t._v("图片")])])]),e("div",{staticClass:"tool-item c-pointer-hover",attrs:{title:"层级"},on:{click:function(e){return t.handleClick()}}},[t._m(30)])])])])])},N=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarchexiao_o"}),e("span",[t._v("撤销")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzhongzuo"}),e("span",[t._v("重做")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tool-item",attrs:{title:"保存"}},[e("div",{staticClass:"item"},[e("span",{staticClass:"f28 cus-edit-toolbar-icon icon-edit-toolbarbaocun"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",{staticClass:"txt"},[t._v("保存")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"text"},[e("span",{staticClass:"txt"},[t._v("删除")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjiacu"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxieti"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiahuaxian"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchuxian"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarFont-color"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjianxiaozihao"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzengjiazihao"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarduiqi-zuoduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarwenzifangxiang"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzijianju"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarhanggao"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshouhangsuojin"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbara-zi1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarcharuwenben"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfanti"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjianti"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzuoduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjuzhongduiqi1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbaryouduiqi1"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarquanbuliangduanduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfensanduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshangduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjuzhongduiqimiddle"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item disabled"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiaduiqi"})])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tool-item c-pointer-hover",attrs:{title:"保存"}},[e("div",{staticClass:"item"},[e("span",{staticClass:"f28 cus-edit-toolbar-icon icon-edit-toolbarfuwenbenkuang"})])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"item"},[e("span",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzhongzuo"}),e("span",[t._v("层级")])])}],y="TOOL_BAR_ACTION_REVOKE",x="TOOL_BAR_ACTION_REDO",w="TOOL_BAR_ACTION_SAVE",L="TOOL_BAR_ACTION_DELETE",E="TOOL_BAR_ACTION_FONT_FAMILY",R="TOOL_BAR_ACTION_FONT_SIZE",S="TOOL_BAR_ACTION_BOLD",k="TOOL_BAR_ACTION_ITALIC",B="TOOL_BAR_ACTION_UNDERLINE",D="TOOL_BAR_ACTION_STRIKETHROUGH",P="TOOL_BAR_ACTION_FONT_COLOR",z="TOOL_BAR_ACTION_ADD_FONT_SIZE",U="TOOL_BAR_ACTION_REDUCE_FONT_SIZE",G="TOOL_BAR_ACTION_ALIGNMENT",F="TOOL_BAR_ACTION_FONT_DIRECTION",$="TOOL_BAR_ACTION_FONT_SPACING",M="TOOL_BAR_ACTION_ROW_HEIGHT",Y="TOOL_BAR_ACTION_FIRST_LINE_INDENTATION",H="TOOL_BAR_ACTION_MAKE_FONT",j="TOOL_BAR_ACTION_INSERT_TEXT",J="TOOL_BAR_ACTION_TRANSFORM_TRADITIONAL",X="TOOL_BAR_ACTION_TRANSFORM_SIMPLIFIED",V="TOOL_BAR_ACTION_LEFT_JUSTIFYING",W="TOOL_BAR_ACTION_CENTER_JUSTIFYING",q="TOOL_BAR_ACTION_RIGHT_JUSTIFYING",Z="TOOL_BAR_ACTION_BOTH_END_JUSTIFYING",K="TOOL_BAR_ACTION_DISTRIBUTE_JUSTIFYING",Q="TOOL_BAR_ACTION_GET_UP_JUSTIFYING",tt="TOOL_BAR_ACTION_GET_CENTER_JUSTIFYING",et="TOOL_BAR_ACTION_GET_DOWN_JUSTIFYING",it="TOOL_BAR_ACTION_PAGE_MARGIN_SETTING",nt="TOOL_BAR_ACTION_HORIZONTAL_INPUT",at="TOOL_BAR_ACTION_VERTICAL_INPUT",st="TOOL_BAR_ACTION_INSERT_PICTURE",ot="TOOL_BAR_ACTION_LEVEL",ct="TOOL_BAR_ACTION_GENERATION",rt="TOOL_BAR_ACTION_TABLE",lt="TOOL_BAR_ACTION_SHAPE",dt="TOOL_BAR_ACTION_PADDING",ut="TOOL_BAR_ACTION_BORDER",ht=i(90555),ft=i(22197),_t=i(48649),pt=new _t.Ay,vt={SAVE:"handleSave",UNDO:"handleUndo",REDO:"handleRedo",COPY:"handleCopy",PASTE:"handlePaste",CUT:"handleCut",DELETE:"handleDelete",SELECT_ALL:"handleSelectAll",INSERT_TEXT_BOX:"handleInsertTextBox",INSERT_IMAGE:"handleInsertImage"},mt={name:"ToolBar",computed:(0,r.A)({},(0,l.aH)({activeEditItemId:function(t){return t.pw.activeEditItemId}})),data:function(){return{action:n}},methods:(0,r.A)((0,r.A)({},(0,l.i0)(["UpdateActiveEditItemId","DeleteTextBox","UpdateActionType","InsertTextBox"])),{},{handleClick:function(t,e){var i=this.DeleteTextBox,n=this.UpdateActionType,a=this.InsertTextBox;switch(t){case nt:var s=u()(ht.z);s.items[0].id=(0,h.A)(),a(s.items[0]);break;case at:var o=u()(ht.z);o.items[0].id=(0,h.A)(),o.items[0].type=ft.x,a(o.items[0]);break;case L:i();break;default:this.$message.info("该功能正在完善中"),n(t,e);break}},handleSave:function(){pt.$emit(vt.SAVE)}})},Ct=mt,It=(0,O.A)(Ct,b,N,!1,null,"2df30332",null),At=It.exports,Ot=function(){var t,e,i,n=this,a=n._self._c;return a("div",{staticClass:"pw-center"},[a("div",{staticClass:"pw-main"},[a("div",{staticClass:"page"},[a("div",{staticClass:"page-main"},[a("div",{staticClass:"page-head"},[a("div",{staticClass:"title"},[a("div",{staticClass:"clan-title txt"},[n._v(n._s(null===(t=n.clan)||void 0===t?void 0:t.name)+" ")]),a("clan-mark-img",{attrs:{type:"down"}}),a("div",{staticClass:"tips txt"},[a("div",{staticClass:"txt-in",staticStyle:{transform:"translateX(-50%) scale(1)"}},[n._v(n._s(null===(e=n.article)||void 0===e?void 0:e.name))])]),a("div",{staticClass:"page-no txt"},[n._v(n._s(n.getShowPageNum())+" ")])],1)]),a("div",{staticClass:"page-content"},[a("div",{ref:"parentDiv",staticClass:"item-container",attrs:{id:"parentContainerId"}},n._l((null===(i=n.currentPageData)||void 0===i?void 0:i.items)||[],function(t){return a("div-edit-item-component",{key:t.id,attrs:{parentId:"parentContainerId",item:t}})}),1)])])])])])},gt=[],Tt=(i(78571),i(3109)),bt=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"drag",rawName:"v-drag"}],ref:"box",staticClass:"draggable-editable-box",class:t.getClass(),style:t.boxStyle,attrs:{id:t.item.id},on:{mousedown:t.startDrag,mousemove:t.enterEditMode}},[e("div",{staticClass:"content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle tl",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle tc",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle tr",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle ml",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle mr",on:{mousedown:function(e){return e.stopPropagation(),t.startResize.apply(null,arguments)}}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle bl",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle bc",on:{mousedown:t.startResize}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.item.id===t.activeEditItemId,expression:"item.id === activeEditItemId"}],staticClass:"resize-handle br",on:{mousedown:t.startResize}}),e("div",{ref:"editDiv",staticClass:"edit-text",class:t.isVertical()?"vertical-mode":"",attrs:{contenteditable:"true"}},[t._v("请输入")])])])},Nt=[],yt={content:"",placeholder:"请输入文本",isDragging:!1,startX:0,startY:0,resizeStartX:0,resizeStartY:0,resizeWidth:0,left:0,top:0,width:240,height:70,isEditing:!1},xt={content:"",placeholder:"请输入文本",isDragging:!1,startX:0,startY:0,resizeStartX:0,resizeStartY:0,resizeWidth:0,left:0,top:0,width:170,height:400,isEditing:!1},wt=function(t,e){if(t){var i=e||{},n=i.position,a=i.type,s=i.info,o=null,c=n||{},r=c.left,l=c.top,d=c.width,u=c.height,h=sessionStorage.getItem(t);o=h?JSON.parse(h):{boxStyle:{},type:"",text:""},l&&(o.boxStyle.top=parseInt(l)),r&&(o.boxStyle.left=parseInt(r)),d&&(o.boxStyle.width=parseInt(d)),u&&(o.boxStyle.height=parseInt(u)),s&&(o.text=s),a&&(o.type=a),sessionStorage.setItem(t,JSON.stringify(o))}},Lt={name:"DivEditItemComponent",props:{parentId:{type:String,default:function(){}},item:{type:Object,default:function(){return{}}}},directives:{drag:{inserted:function(t,e,i){requestAnimationFrame(function(){var e=t,n=document.getElementById(i.context.parentId),a=null===n||void 0===n?void 0:n.clientWidth,s=null===n||void 0===n?void 0:n.clientHeight;document.onselectstart=function(){return!1},e.onmousedown=function(t){var n=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop,c=e.clientWidth,r=e.clientHeight,l=a-c,d=s-r;return document.onmousemove=function(t){var i=t.clientX-n,a=t.clientY-o;e.style.left="".concat(i>l?l:i,"px"),i<0&&(e.style.left="0px"),e.style.top="".concat(a>d?d:a,"px"),a<0&&(e.style.top="0px")},document.onmouseup=function(t){var n=e.style,a=n.left,s=n.top;i.context.left=parseInt(a),i.context.top=parseInt(s),wt(e.id,{position:{left:a,top:s,width:c,height:r},type:e.className}),document.onmousemove=null,document.onmouseup=null},!1}})}}},data:function(){var t={};switch(this.item.type){case ft.f:t=u()(yt);break;case ft.x:t=u()(xt);break;default:t=u()(xt);break}return{initDataClone:t}},computed:(0,r.A)({boxStyle:function(){return{left:"".concat(this.left,"px"),top:"".concat(this.top,"px"),width:"".concat(this.width,"px"),height:"".concat(this.height,"px")}}},(0,l.aH)({actionType:function(t){return t.pw.actionType},actionPayload:function(t){return t.pw.actionPayload},activeEditItemId:function(t){return t.pw.activeEditItemId}})),watch:{actionType:function(t){"cancel"===t&&this.cancelEdit(),"add-img"===t&&(this.$refs.editDiv.innerHTML="<img src='http://localhost:8000/img/photo.05cc0248.png' />")}},mounted:function(){if(this.item.id){var t=sessionStorage.getItem(this.item.id);if(t)try{if(t=JSON.parse(t),t.boxStyle){var e=t.boxStyle,i=e.left,n=e.top,a=e.width,s=e.height;i&&(this.$refs.box.style.left="".concat(i,"px")),n&&(this.$refs.box.style.top="".concat(n,"px")),a&&(this.$refs.box.style.width="".concat(a,"px")),s&&(this.$refs.box.style.height="".concat(s,"px"))}t.text&&(this.$refs.editDiv.innerHTML=t.text)}catch(o){}}},methods:(0,r.A)((0,r.A)({},(0,l.i0)(["UpdateActiveEditItemId"])),{},{isVertical:function(){var t;return(null===(t=this.item)||void 0===t?void 0:t.type)===ft.x},getClass:function(){var t,e,i="";return i=(null===(t=this.item)||void 0===t?void 0:t.id)===this.activeEditItemId?"":"no-border",(null===(e=this.item)||void 0===e?void 0:e.type)===ft.x&&(i+=" vertical-mode"),i},startDrag:function(t){var e=this.UpdateActiveEditItemId;t.preventDefault(),e(this.item.id)},enterEditMode:function(){var t=this;this.isEditing=!0,this.isDragging=!0;var e=this.$refs.editDiv,i=document.createRange(),n=window.getSelection();i.selectNodeContents(e),i.collapse(!1),n.removeAllRanges(),n.addRange(i),e.focus(),e.addEventListener("input",function(){wt(t.item.id,{info:t.$refs.editDiv.innerHTML,type:t.$refs.box.className}),t.height<e.offsetHeight&&(t.height=e.offsetHeight)})},cancelEdit:function(){this.isEditing=!1,this.isDragging=!1,this.$refs.editDiv.blur()},startResize:function(t){var e=this;t.stopPropagation();var i=this.$refs.box,n=t.target,a=document.getElementById(this.parentId),s=null===a||void 0===a?void 0:a.offsetWidth,o=null===a||void 0===a?void 0:a.offsetHeight,c=n.className.includes("resize-handle tc"),r=n.className.includes("resize-handle tl"),l=n.className.includes("resize-handle tr"),d=n.className.includes("resize-handle ml"),u=n.className.includes("resize-handle mr"),h=n.className.includes("resize-handle bc"),f=n.className.includes("resize-handle bl"),_=n.className.includes("resize-handle br");n.onmousedown=function(t){t.stopPropagation();var n=t,a=n.clientX,p=n.clientY,v=i.offsetWidth,m=i.offsetHeight,C=80,I=80,A=o-m-e.top,O=e.left,g=s-v-e.left,T=e.top;document.onmousemove=function(t){var n=t;if(r){var s=n.clientX-a,o=n.clientY-p;i.style.width=v-s+"px",i.style.left=e.left+s+"px",i.style.height=m-o+"px",i.style.top=e.top+o+"px",s<0&&-s>=O&&(i.style.width=v+O+"px",i.style.left="0px"),o<0&&-o>=T&&(i.style.height=m+T+"px",i.style.top="0px"),s>0&&v-s<=C&&(i.style.width="".concat(C,"px"),i.style.left=e.left+v-C+"px"),o>0&&m-o<=I&&(i.style.height="".concat(I,"px"),i.style.top=e.top+m-I+"px")}else if(l){var b=n.clientX-a,N=n.clientY-p;i.style.width=v+b+"px",i.style.height=m-N+"px",i.style.top=e.top+N+"px",b<0&&Math.abs(v+b)<=C&&(i.style.width=C+"px"),N<0&&-N>=T&&(i.style.height=m+T+"px",i.style.top="0px"),b>0&&b>=g&&(i.style.width="".concat(v+g,"px")),N>0&&Math.abs(m-N)<=I&&(i.style.height="".concat(I,"px"),i.style.top=e.top+m-I+"px")}else if(d){var y=n.clientX-a;i.style.width=v-y+"px",i.style.left=e.left+y+"px",y<0&&-y>=O&&(i.style.width=v+O+"px",i.style.left="0px"),y>0&&v-y<=C&&(i.style.width="".concat(C,"px"),i.style.left=e.left+v-C+"px")}else if(u){var x=n.clientX-a;i.style.width=v+x+"px",x>0&&Math.abs(x)>=g&&(i.style.width=v+g+"px"),x<0&&Math.abs(v+x)<=C&&(i.style.width="".concat(C,"px"))}else if(c){var w=n.clientY-p;i.style.height=m-w+"px",i.style.top=e.top+w+"px",w<0&&-w>=T&&(i.style.height=m+T+"px",i.style.top="0px"),w>0&&m-w<=I&&(i.style.height="".concat(I,"px"),i.style.top=e.top+m-I+"px")}else if(h){var L=n.clientY-p;i.style.height=m+L+"px",L>0&&Math.abs(L)>=A&&(i.style.height=m+A+"px"),L<0&&Math.abs(m+L)<=I&&(i.style.height="".concat(I,"px"))}else if(f){var E=n.clientX-a,R=n.clientY-p;i.style.width=v-E+"px",i.style.left=e.left+E+"px",i.style.height=m+R+"px",R>0&&Math.abs(R)>=A&&(i.style.height=m+A+"px"),R<0&&Math.abs(m+R)<=I&&(i.style.height="".concat(I,"px")),E<0&&-E>=O&&(i.style.width=v+O+"px",i.style.left="0px"),E>0&&v-E<=C&&(i.style.width="".concat(C,"px"),i.style.left=e.left+v-C+"px")}else if(_){var S=n.clientX-a,k=n.clientY-p;i.style.width=v+S+"px",i.style.height=m+k+"px",S>0&&Math.abs(S)>=g&&(i.style.width=v+g+"px"),k>0&&Math.abs(k)>=A&&(i.style.height=m+A+"px"),S<0&&Math.abs(v+S)<=C&&(i.style.width=C+"px"),k<0&&Math.abs(m+k)<=I&&(i.style.height=I+"px")}},document.onmouseup=function(){var t=i.style,n=t.left,a=t.top,s=t.width,o=t.height;e.left=parseInt(n),e.top=parseInt(a),e.width=parseInt(s),e.height=parseInt(o),wt(e.$refs.box.id,{position:{left:"".concat(n,"px"),top:"".concat(a,"px"),width:"".concat(s),height:"".concat(o,"px")}}),document.onmousemove=null}}}})},Et=Lt,Rt=(0,O.A)(Et,bt,Nt,!1,null,"898b3e98",null),St=Rt.exports,kt=i(10963),Bt={name:"EditContentForPW",components:{DivEditItemComponent:St,ClanMarkImg:Tt.A},computed:(0,r.A)({},(0,l.aH)({currentSelectedGroupId:function(t){return t.family.currentSelectedGroupId},currentSelectedClanId:function(t){return t.family.currentSelectedClanId},dataList:function(t){return t.pw.data},currentPageNum:function(t){return t.pw.currentPageNum},currentPageData:function(t){return t.pw.data[t.pw.currentPageNum-1]}})),data:function(){return{parentRef:this.$refs.parentDiv,clan:{}}},props:{article:{type:Object,default:function(){}},pageNum:{type:[Number,String],default:1}},mounted:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){var i;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(t.currentSelectedGroupId){e.n=1;break}return e.a(2);case 1:return e.n=2,t.GetCurrentClan();case 2:i=e.v,t.clan=i;case 3:return e.a(2)}},e)}))()},methods:(0,r.A)((0,r.A)({},(0,l.i0)(["GetCurrentClan"])),{},{getShowPageNum:function(){return(0,kt.y)(this.pageNum)}})},Dt=Bt,Pt=(0,O.A)(Dt,Ot,gt,!1,null,"11dfb08f",null),zt=Pt.exports,Ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"right"},[e("div",{staticClass:"pages"},t._l(t.pageList,function(i){return e("div",{key:i.pageNum,staticClass:"page",class:i.pageNum===t.currentPageNum?"selected":"",on:{click:function(e){return t.handleSelected(i)}}},[e("div",{staticClass:"num"},[t._v(t._s(i.pageNum))]),e("div",{staticClass:"content"},[t._v("内容")]),e("div",{staticClass:"opt hidden"},[e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxinjian c-pointer-hover",on:{click:function(e){return t.handleOpt("add-next")}}}),e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfuzhi- c-pointer-hover",on:{click:function(e){return t.handleOpt("copy")}}}),e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiayi c-pointer-hover",on:{click:function(e){return t.handleOpt("down")}}}),e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshangyi c-pointer-hover",on:{click:function(e){return t.handleOpt("up")}}}),e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbaraixin c-pointer-hover",on:{click:function(e){return t.handleOpt("shoucang")}}}),e("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1 c-pointer-hover",on:{click:function(e){return t.handleOpt("delete")}}})])])}),0),e("div",{staticClass:"btn",on:{click:function(e){return t.handleOpt("add-last")}}},[t._v("新建页面")])])},Gt=[],Ft={name:"PwRightContent",data:function(){return{}},computed:(0,r.A)({},(0,l.aH)({currentPageNum:function(t){return t.pw.currentPageNum},pageList:function(t){return t.pw.data}})),methods:(0,r.A)((0,r.A)({},(0,l.i0)(["InsertPage","UpdateCurrentPageNum"])),{},{handleSelected:function(t){var e=this.UpdateCurrentPageNum;e(t.pageNum)},handleOpt:function(t){this.$emit("handleOpt",t),("add-last"===t||"add-next"===t)&&this.InsertPage()}})},$t=Ft,Mt=(0,O.A)($t,Ut,Gt,!1,null,"7f076e32",null),Yt=Mt.exports,Ht={name:"PWIndexPage",components:{PwRightContent:Yt,EditContent:zt,LeftContent:T,ToolBar:At},data:function(){return{currentSelectedCategoryId:"",currentSelectedCategory:{},currentSelectedArticleId:"",currentSelectedArticle:{}}},computed:(0,r.A)({},(0,l.aH)({dataList:function(t){return t.pw.data},currentPageNum:function(t){return t.pw.currentPageNum},currentSelectedClanId:function(t){return t.family.currentSelectedClanId},currentSelectedPedigreeId:function(t){return t.px.currentSelectedPedigreeId}})),mounted:function(){pt.$on(vt.SAVE,this.handleSave)},unmounted:function(){pt.$off(vt.SAVE)},methods:(0,r.A)((0,r.A)({},(0,l.i0)(["UpdateCurrentPageNum","UpdateCurrentPageData","UpdateClanArticle"])),{},{toHome:function(){this.$router.push({path:"/"})},handleUpdate:function(t){var e=this.UpdateCurrentPageNum,i=this.UpdateCurrentPageData,n=t.article,a=t.category;if(n){this.currentSelectedArticleId=n.id,this.currentSelectedArticle=n,e(1);var s=u()(ht.z);s.articleId=t.id,s.items[0].id="".concat((0,h.A)()),i([s])}a&&(this.currentSelectedCategoryId=a.id,this.currentSelectedCategory=a)},handleSave:function(){var t=this;return(0,c.A)((0,o.A)().m(function e(){var i,n,a,s;return(0,o.A)().w(function(e){while(1)switch(e.n){case 0:if(i=t.UpdateClanArticle,n=t.currentSelectedArticle,null!==n&&void 0!==n&&n.id){e.n=1;break}return t.$message.error("请先选择谱文"),e.a(2);case 1:if(t.currentSelectedClanId){e.n=2;break}return t.$message.error("请先新建家族"),e.a(2);case 2:return a=u()(t.dataList),a.forEach(function(t){t.items.forEach(function(t){var e=t.id,i=sessionStorage.getItem(e);if(i){i=JSON.parse(i);var n=i,a=n.boxStyle,s=a.left,o=a.top,c=a.width,r=a.height,l=n.text;s&&(t.left=s),o&&(t.top=o),c&&(t.width=c),r&&(t.height=r),l&&(t.content=l)}})}),t.$loading.show("保存中"),e.n=3,i({id:n.id,pages:JSON.stringify(a),clan_id:t.currentSelectedClanId});case 3:s=e.v,t.$loading.hide(),s&&200===s.code?t.$message.success("保存成功"):t.$message.error(s.message||"保存失败");case 4:return e.a(2)}},e)}))()}})},jt=Ht,Jt=(0,O.A)(jt,a,s,!1,null,"6b04304b",null),Xt=Jt.exports},10963:function(t,e,i){i.d(e,{y:function(){return n}});i(79640),i(55894),i(22098),i(54011);var n=function(t){var e={0:"零",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九",10:"十"},i=["","十","百"],n="";if(0===t)return e[0];if(t<10)return e[t];for(var a=t.toString().split("").reverse(),s=0;s<a.length;s++){var o=parseInt(a[s]);0!==o?n=1===s&&1===o?i[s]+n:e[o]+i[s]+n:n=e[o]+n}return n.replace(/零(?=[^百]*$)/g,"")}},65850:function(t,e,i){t.exports=i.p+"img/header-mark2.ec123bde.67d64682.svg"},66821:function(t,e,i){t.exports=i.p+"img/header-mark.c8ec6717.c31141c2.svg"}}]);