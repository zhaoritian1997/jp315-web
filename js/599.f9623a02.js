"use strict";(self["webpackChunkvue_antd_pro"]=self["webpackChunkvue_antd_pro"]||[]).push([[599],{3109:function(e,t,a){a.d(t,{A:function(){return c}});var i=function(){var e=this,t=e._self._c;return"down"===e.type?t("img",{class:e.classStr,attrs:{src:a(66821),alt:""}}):t("img",{class:e.classStr,attrs:{src:a(65850),alt:""}})},n=[],s={name:"ClanMarkImg",props:{classStr:{type:String,default:""},type:{type:String,default:"top"}}},r=s,l=a(20899),d=(0,l.A)(r,i,n,!1,null,"a038634e",null),c=d.exports},59023:function(e,t,a){a.d(t,{A:function(){return v}});var i=function(){var e=this,t=e._self._c;return t("a-cascader",{attrs:{"field-names":{label:"name",value:"name",children:"child"},options:e.options,value:e.value,"change-on-select":"",placeholder:"请选择","load-data":e.loadData},on:{change:e.onChange}})},n=[],s=a(43476),r=a(55736),l=a(40400),d=(a(88116),a(34767),a(18433),a(35415),a(79640),a(94354)),c=["北京","天津","上海","重庆"],o={data:function(){return{options:[],value:this.initValue||[]}},watch:{initValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.value=e}},props:{initValue:{type:Array,default:function(){return[]}}},mounted:function(){this.getprovince()},methods:{getprovince:function(){var e=this;return(0,l.A)((0,r.A)().m(function t(){var a,i,n;return(0,r.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,(0,d.Sr)({fid:4744});case 1:a=t.v,i=a.code,n=a.data,200===i&&(e.options=n.list.map(function(e){return{name:e.name,id:e.id,isLeaf:!1}}).sort(function(e,t){return e.id-t.id}));case 2:return t.a(2)}},t)}))()},loadData:function(e){var t=this;return(0,l.A)((0,r.A)().m(function a(){var i,n,l,o,h,u;return(0,r.A)().w(function(a){while(1)switch(a.n){case 0:return i=e[e.length-1],n=e.length,l=c.includes(i.name),i.loading=!0,a.n=1,(0,d.Sr)({fid:i.id});case 1:o=a.v,h=o.code,u=o.data,200===h&&(i.child=u.list.map(function(e){return{name:e.name,id:e.id,isLeaf:!!l||n>=2}}).sort(function(e,t){return e.id-t.id})),i.loading=!1,t.options=(0,s.A)(t.options);case 2:return a.a(2)}},a)}))()},onChange:function(e,t){this.value=e,this.$emit("change",e)}}},h=o,u=a(20899),f=(0,u.A)(h,i,n,!1,null,"5fd88b7e",null),v=f.exports},65850:function(e,t,a){e.exports=a.p+"img/header-mark2.ec123bde.67d64682.svg"},66821:function(e,t,a){e.exports=a.p+"img/header-mark.c8ec6717.c31141c2.svg"},77124:function(e,t,a){a.r(t),a.d(t,{default:function(){return Vi}});var i=function(){var e,t=this,a=t._self._c;return a("a-spin",{attrs:{size:"large",spinning:t.loading}},[a("div",{staticClass:"pu-xi-container"},[t.currentSelectedPedigreeId?a("page-top",{attrs:{selectedNode:t.currentSelectedNode}}):t._e(),a("div",{staticClass:"flex flex-direction-row"},[a("left-content"),a("div",{staticClass:"tree-container"},[a("div",{staticClass:"unified-scroll-container"},[t.currentSelectedPedigreeId?a("generation",{staticClass:"generation-bar-fixed",attrs:{list:t.generationList,selected:t.currentSelectedGeneration}}):t._e(),a("div",{staticClass:"tree-content"},[a("clan-tree",{attrs:{"show-line":!0,nodes:t.treeData,"default-expanded-keys":t.expandedKeys,defaultCheckedKeys:t.expandedKeys,"selected-key":t.currentSelectedKey},on:{"update:defaultCheckedKeys":function(e){t.expandedKeys=e},"update:default-checked-keys":function(e){t.expandedKeys=e},click:t.handleSelectedNode,wifeClick:t.handleWifeSelected,addBrother:t.handleAddBrother,addChild:t.handleAddChild}}),a("a-empty",{directives:[{name:"show",rawName:"v-show",value:0===(null===(e=t.treeData)||void 0===e?void 0:e.length),expression:"treeData?.length === 0"}]})],1)],1)]),t.currentSelectedPedigreeId?a("right-content",{attrs:{"selected-node-id":t.currentSelectedKey,selectedNode:t.currentSelectedNode,fatherId:t.currentSelectedNodeFatherId,father:t.currentSelectedNodeFatherNode},on:{deleteNode:t.handleDeleteNode,updateTreeSelection:t.handleUpdateTreeSelection,handleSelectedNode:t.handleSelectedNodeFromRightContent,updateTreeNodeData:t.handleUpdateTreeNodeData}}):t._e()],1)],1)])},n=[],s=a(55736),r=a(43476),l=a(40400),d=a(60990),c=(a(40152),a(34767),a(35415),a(7637),a(79640),a(97693),function(){var e,t=this,a=t._self._c;return a("div",{staticClass:"px-header"},[a("div",{staticClass:"inner"},[a("div",{staticClass:"demo",on:{click:function(){return t.showFamilyBaseInfo=!0}}},[a("span",{staticClass:"tag tag-fanli"},[t._v("管理")]),a("span",{staticClass:"name line-word"},[t._v(t._s(null===(e=t.clan)||void 0===e?void 0:e.name))]),a("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarchaxun"})]),a("a-divider",{staticStyle:{height:"26px",margin:"0 32px",color:"#f86e04"},attrs:{type:"vertical"}}),a("div",{staticClass:"flex-grow-1 flex flex-direction-row justify-content-end"},[a("span",{staticClass:"ml16 flex align-center mr16 c-pointer c-pointer-hover",on:{click:t.handlePreview}},[a("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbara-tubiao_paibanyulan"}),t._v("排版预览 ")])])],1),a("a-drawer",{attrs:{title:"",width:"100vw",placement:"right",wrapClassName:"clan-preview-drawer",closable:!1,visible:t.showPreview},on:{close:t.handlePreview}},[a("clan-preview",{attrs:{close:t.handlePreview}})],1),t.showFamilyBaseInfo?a("family-info-component",{on:{close:function(e){t.showFamilyBaseInfo=!1}}}):t._e(),t.showAdjustShiXiModal?a("tiao-zheng-shi-xi-modal",{attrs:{selectedNode:t.selectedNode},on:{close:function(e){t.showAdjustShiXiModal=!1}}}):t._e()],1)}),o=[],h=a(50651),u=function(){var e=this,t=e._self._c;return t("div",[t("clan-preview-detail",{attrs:{close:e.close}})],1)},f=[],v=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container"},[t("div",{staticClass:"preview-left"},e._l(e.pageList,function(a,i){return t("div",{key:i},[1===a.pageType?t("page-type-one",{attrs:{page:a}}):2===a.pageType?t("page-type-two",{attrs:{page:a}}):3===a.pageType?t("page-type-three",{attrs:{page:a}}):e._e(),t("br")],1)}),0),t("div",{staticClass:"preview-right"},[t("right",{attrs:{close:e.close}})],1)])},p=[],m=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page preview-page p2 even"},[t("div",{staticClass:"content content-0"},[t("div",{staticClass:"head"},[t("div",{staticClass:"column name"},[t("clan-mark-img",{attrs:{type:"down","class-str":"mark mark-top"}}),e._l(e.getValue("head.name"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),t("clan-mark-img",{attrs:{type:"up","class-str":"mark mark-top"}})],2),t("div",{staticClass:"column volume"},e._l(e.getValue("head.volume"),function(a,i){return t("span",{key:i},[e._v(e._s(a))])}),0),t("div",{staticClass:"column title"},[t("div",e._l(e.getValue("head.title"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0),t("div",e._l(e.getValue("head.other"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0)]),t("div",{staticClass:"page-index"},[e._v(e._s(e.getValue("pageIndex",!1)+1))])]),t("div",[t("div",{staticClass:"body index",class:e.getValue("firstPage",!1)?"first-page":""},[e.getValue("firstPage",!1)?t("div",{staticClass:"title"},e._l(e.getValue("head.title"),function(a){return t("span",{key:a},[e._v(e._s(a))])}),0):e._e(),e._l(e.getValue("columns",!1),function(a,i){return t("div",{key:i,staticClass:"column"},[e._l(a.itemData,function(a,i){return[1===a.type?t("div",{key:i},[t("div",{staticClass:"generation"},[e._v(e._s(a.text||""))])]):t("div",{key:i},[t("div",{staticClass:"item"},[t("div",{staticClass:"item-name"},[e._v(e._s(a.text||""))]),t("div",{staticClass:"item-page"},[e._v(e._s(a.selfPage2||""))])])])]})],2)})],2)])])])},x=[],g=a(92935),C=a(3109),y={name:"PageType1",components:{ClanMarkImg:C.A},props:{page:{type:Object,default:function(){}}},methods:{getValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?(0,g.get)(this.page,e,"").split(""):(0,g.get)(this.page,e,"")}}},_=y,b=a(20899),w=(0,b.A)(_,m,x,!1,null,"2088dde0",null),k=w.exports,S=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page preview-page p2 even"},[t("div",{staticClass:"content content-1"},[t("div",{staticClass:"head"},[t("div",{staticClass:"column name"},[t("clan-mark-img",{attrs:{type:"down","class-str":"mark mark-top"}}),e._l(e.getValue("head.name"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),t("clan-mark-img",{attrs:{type:"up","class-str":"mark mark-top"}})],2),t("div",{staticClass:"column volume"},e._l(e.getValue("head.volume"),function(a,i){return t("span",{key:i},[e._v(e._s(a))])}),0),t("div",{staticClass:"column title"},[t("div",e._l(e.getValue("head.title"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0),t("div",e._l(e.getValue("head.other"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0)]),t("div",{staticClass:"page-index"},[e._v(e._s(e.getValue("pageIndex",!1)+1))])]),t("div",[t("div",{staticClass:"body diagram"},e._l(e.getValue("columns",!1),function(a,i){return t("div",{key:i,staticClass:"column"},[e._l(a.itemData,function(e,a){return[1===e.type?t("detail-generation",{key:a,attrs:{txt:e.text,x:e.x}}):t("detail-item",{key:a,attrs:{item:e}})]})],2)}),0)])])])},D=[],T=function(){var e=this,t=e._self._c;return t("div",{attrs:{type:"1"}},[t("div",{staticClass:"generation",style:{left:e.x+"px"}},[t("div",e._l(e.txt.split(""),function(a,i){return t("span",{key:i},[e._v(e._s(a))])}),0)])])},A=[],I=(a(78571),{name:"DetailColumnDetailGeneration",props:{txt:{type:String,default:""},x:{type:Number,default:0}}}),P=I,N=(0,b.A)(P,T,A,!1,null,"ec82b056",null),L=N.exports,M=function(){var e=this,t=e._self._c;return t("div",{attrs:{type:e.getValue("type")}},[2===e.getValue("type")?[t("div",{staticClass:"vline line-top",style:{left:e.getValue("x")+"px"}}),e.getValue("hasChildren")?t("div",{staticClass:"vline line-bottom",style:{left:e.getValue("x")+"px"}}):e._e(),t("div",{staticClass:"item",style:{left:e.getValue("x")+"px",bottom:e.getValue("y")+"px"}},[t("div",{staticClass:"name"},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarcircle2yuanquan f12"}),t("span",[e._v(e._s(e.getValue("text")))])])])]:3===e.getValue("type")?[t("div",{staticClass:"line",style:{left:e.getValue("x")+"px",bottom:e.getValue("y")+"px",width:e.getValue("width")+"px"}})]:e._e()],2)},$=[],F={name:"PageType2ComponentItem",props:{item:{type:Object,default:function(){}}},methods:{getValue:function(e){return(0,g.get)(this.item,e,"")}}},G=F,O=(0,b.A)(G,M,$,!1,null,"0c007e92",null),B=O.exports,V={name:"PageType2",components:{ClanMarkImg:C.A,DetailGeneration:L,DetailItem:B},props:{page:{type:Object,default:function(){}}},methods:{getValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?(0,g.get)(this.page,e,"").split(""):(0,g.get)(this.page,e,"")}}},j=V,R=(0,b.A)(j,S,D,!1,null,"83fa1dde",null),E=R.exports,z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"page preview-page p2 even"},[t("div",{staticClass:"content content-1"},[t("div",{staticClass:"head"},[t("div",{staticClass:"column name"},[t("clan-mark-img",{attrs:{type:"down","class-str":"mark mark-top"}}),e._l(e.getValue("head.name"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),t("clan-mark-img",{attrs:{type:"up","class-str":"mark mark-top"}})],2),t("div",{staticClass:"column volume"},e._l(e.getValue("head.volume"),function(a,i){return t("span",{key:i},[e._v(e._s(a))])}),0),t("div",{staticClass:"column title"},[t("div",e._l(e.getValue("head.title"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0),t("div",e._l(e.getValue("head.other"),function(a,i){return t("div",{key:i},[e._v(e._s(a))])}),0)]),t("div",{staticClass:"page-index"},[e._v(e._s(e.getValue("pageIndex",!1)+1))])]),t("div",[t("div",{staticClass:"body detail"},e._l(e.getValue("columns",!1),function(a,i){return t("div",{key:i,staticClass:"column"},[e._l(a.itemData,function(e,a){return[1===e.type?t("detail-generation",{key:a,attrs:{txt:e.text,x:e.x}}):t("detail-item",{key:a,attrs:{item:e}})]})],2)}),0)])])])},H=[],W=function(){var e=this,t=e._self._c;return t("div",{attrs:{type:e.getValue("type")}},[t("div",{class:"item type"+e.getValue("type"),style:{left:e.getValue("x")+"px"}},[t("div",{staticClass:"text"},[e._v(e._s(e.getValue("text")))]),t("div",{staticClass:"fathers"})])])},Y=[],q={name:"DetailColumnDetailItem",props:{item:{type:Object,default:function(){}}},methods:{getValue:function(e){return(0,g.get)(this.item,e,"")}}},K=q,Z=(0,b.A)(K,W,Y,!1,null,"e3d73e4e",null),X=Z.exports,U={name:"ClanPreviewDetailPage",components:{ClanMarkImg:C.A,DetailGeneration:L,DetailItem:X},props:{page:{type:Object,default:function(){}},name:{type:String,default:""},indexList:{type:Array,default:function(){return[]}},pageList:{type:Array,default:function(){return[]}}},methods:{getValue:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t?(0,g.get)(this.page,e,"").split(""):(0,g.get)(this.page,e,"")}}},J=U,Q=(0,b.A)(J,z,H,!1,null,"80d025ce",null),ee=Q.exports,te=JSON.parse('{"p":{"clanName":"莲山谱牒范例","index":[{"pageIndex":1,"title":"检索表","type":0},{"pageIndex":2,"title":"世系图","type":0},{"pageIndex":4,"title":"世系表","type":0}],"pages":[{"pageType":1,"pageIndex":0,"firstPage":true,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"检索表","other":""},"columns":[{"itemData":[{"type":1,"text":"第13世","hasChildren":false},{"type":2,"text":"聚元","selfPage2":2,"hasChildren":false},{"type":1,"text":"第14世","hasChildren":false},{"type":2,"text":"裕丰","selfPage2":2,"hasChildren":false},{"type":2,"text":"裕龙","selfPage2":3,"hasChildren":false},{"type":1,"text":"第15世","hasChildren":false},{"type":2,"text":"浩文","selfPage2":2,"hasChildren":false},{"type":2,"text":"杰文","selfPage2":2,"hasChildren":false},{"type":2,"text":"晓文","selfPage2":2,"hasChildren":false},{"type":2,"text":"阿康","selfPage2":3,"hasChildren":false},{"type":2,"text":"阿娣","selfPage2":3,"hasChildren":false},{"type":2,"text":"阿雪","selfPage2":3,"hasChildren":false},{"type":2,"text":"祖民","selfPage2":3,"hasChildren":false},{"type":2,"text":"阿娇","selfPage2":3,"hasChildren":false},{"type":1,"text":"第16世","hasChildren":false},{"type":2,"text":"瑾良","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾波","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾豪","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾容","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾苹","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾秋","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾明","selfPage2":2,"hasChildren":false}]},{"itemData":[{"type":2,"text":"瑾良","selfPage2":2,"hasChildren":false},{"type":2,"text":"瑾英","selfPage2":3,"hasChildren":false},{"type":2,"text":"瑾荣","selfPage2":3,"hasChildren":false},{"type":2,"text":"瑾华","selfPage2":3,"hasChildren":false},{"type":2,"text":"瑾培","selfPage2":3,"hasChildren":false},{"type":2,"text":"瑾芳","selfPage2":3,"hasChildren":false},{"type":1,"text":"第17世","hasChildren":false},{"type":2,"text":"敏春","selfPage2":2,"hasChildren":false},{"type":2,"text":"宇春","selfPage2":2,"hasChildren":false},{"type":2,"text":"艳春","selfPage2":2,"hasChildren":false},{"type":2,"text":"炅春","selfPage2":2,"hasChildren":false},{"type":2,"text":"涣春","selfPage2":2,"hasChildren":false},{"type":2,"text":"烋春","selfPage2":2,"hasChildren":false},{"type":2,"text":"雪春","selfPage2":2,"hasChildren":false},{"type":2,"text":"丽春","selfPage2":2,"hasChildren":false},{"type":2,"text":"敏春","selfPage2":2,"hasChildren":false},{"type":2,"text":"韵韵","selfPage2":3,"hasChildren":false},{"type":2,"text":"佟佟","selfPage2":3,"hasChildren":false},{"type":2,"text":"何春","selfPage2":3,"hasChildren":false}]},{"itemData":[]}]},{"pageType":2,"pageIndex":1,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"世系图","other":""},"columns":[{"itemData":[{"type":1,"text":"十三世","x":366,"hasChildren":false},{"type":2,"text":"聚元","x":342,"selfPage3":4,"hasChildren":true},{"type":3,"text":null,"x":-8,"y":0,"width":350,"height":1,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十四世","x":366,"hasChildren":false},{"type":2,"text":"裕丰","x":342,"selfPage3":4,"hasChildren":true},{"type":3,"text":null,"color":"red","x":312,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":72,"y":0,"width":240,"height":1,"hasChildren":false},{"type":3,"text":null,"x":-8,"y":0,"width":80,"height":1,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十五世","x":366,"hasChildren":false},{"type":2,"text":"浩文","x":342,"selfPage3":4,"hasChildren":true},{"type":2,"text":"杰文","x":312,"selfPage3":5,"hasChildren":true},{"type":3,"text":null,"color":"red","x":252,"y":0,"width":60,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":132,"y":0,"width":120,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":102,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"晓文","x":72,"selfPage3":8,"hasChildren":true},{"type":3,"text":null,"color":"red","x":42,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":12,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"x":-8,"y":0,"width":20,"height":1,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十六世","x":366,"hasChildren":false},{"type":2,"text":"瑾良","x":342,"selfPage3":4,"hasChildren":true},{"type":2,"text":"瑾波","x":312,"selfPage3":5,"hasChildren":true},{"type":3,"text":null,"color":"red","x":282,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"瑾豪","x":252,"selfPage3":5,"hasChildren":true},{"type":3,"text":null,"color":"red","x":222,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":192,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":162,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"瑾容","x":132,"selfPage3":7,"hasChildren":false},{"type":2,"text":"瑾苹","x":102,"selfPage3":7,"hasChildren":false},{"type":2,"text":"瑾秋","x":72,"selfPage3":8,"hasChildren":true},{"type":2,"text":"瑾明","x":42,"selfPage3":9,"hasChildren":false},{"type":2,"text":"瑾良","x":12,"selfPage3":10,"hasChildren":true}]},{"itemData":[{"type":1,"text":"十七世","x":366,"hasChildren":false},{"type":2,"text":"敏春","x":342,"selfPage3":4,"hasChildren":false},{"type":2,"text":"宇春","x":312,"selfPage3":5,"hasChildren":false},{"type":2,"text":"艳春","x":282,"selfPage3":5,"hasChildren":false},{"type":2,"text":"炅春","x":252,"selfPage3":5,"hasChildren":false},{"type":2,"text":"涣春","x":222,"selfPage3":6,"hasChildren":false},{"type":2,"text":"烋春","x":192,"selfPage3":6,"hasChildren":false},{"type":2,"text":"雪春","x":162,"selfPage3":7,"hasChildren":false},{"type":2,"text":"丽春","x":72,"selfPage3":8,"hasChildren":false},{"type":2,"text":"敏春","x":12,"selfPage3":10,"hasChildren":false}]}]},{"pageType":2,"pageIndex":2,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"世系图","other":""},"columns":[{"itemData":[{"type":3,"text":null,"x":232,"y":0,"width":171,"height":1,"hasChildren":false}]},{"itemData":[{"type":3,"text":null,"x":322,"y":0,"width":81,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":292,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":262,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"裕龙","x":232,"selfPage3":14,"hasChildren":true},{"type":3,"text":null,"color":"red","x":112,"y":0,"width":120,"height":1,"hasChildren":false}]},{"itemData":[{"type":3,"text":null,"x":382,"y":0,"width":21,"height":1,"hasChildren":false},{"type":2,"text":"阿康","x":322,"selfPage3":11,"hasChildren":false},{"type":2,"text":"阿娣","x":292,"selfPage3":12,"hasChildren":false},{"type":2,"text":"阿雪","x":262,"selfPage3":12,"hasChildren":false},{"type":2,"text":"祖民","x":232,"selfPage3":14,"hasChildren":true},{"type":3,"text":null,"color":"red","x":202,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":172,"y":0,"width":30,"height":1,"hasChildren":false},{"type":3,"text":null,"color":"red","x":142,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"阿娇","x":112,"selfPage3":15,"hasChildren":false}]},{"itemData":[{"type":2,"text":"瑾英","x":382,"selfPage3":11,"hasChildren":true},{"type":3,"text":null,"color":"red","x":352,"y":0,"width":30,"height":1,"hasChildren":false},{"type":2,"text":"瑾荣","x":232,"selfPage3":14,"hasChildren":true},{"type":2,"text":"瑾华","x":202,"selfPage3":14,"hasChildren":false},{"type":2,"text":"瑾培","x":172,"selfPage3":14,"hasChildren":false},{"type":2,"text":"瑾芳","x":142,"selfPage3":15,"hasChildren":false}]},{"itemData":[{"type":2,"text":"韵韵","x":382,"selfPage3":11,"hasChildren":false},{"type":2,"text":"佟佟","x":352,"selfPage3":11,"hasChildren":false},{"type":2,"text":"何春","x":232,"selfPage3":14,"hasChildren":false}]}]},{"pageType":3,"pageIndex":3,"firstPage":true,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"五和村"},"columns":[{"itemData":[{"type":1,"text":"十三世","x":367,"hasChildren":false},{"type":2,"text":"风水师","x":340,"hasChildren":false},{"type":3,"text":"聚元","x":310,"hasChildren":false},{"type":4,"text":"聚字辈风水师","x":285,"hasChildren":false},{"type":4,"text":"又名阿贵字怀","x":263,"hasChildren":false},{"type":4,"text":"德生于清光绪","x":241,"hasChildren":false},{"type":4,"text":"二年丙子（18","x":219,"hasChildren":false},{"type":4,"text":"76）四月初一","x":197,"hasChildren":false},{"type":4,"text":"巳时大学毕业","x":175,"hasChildren":false},{"type":4,"text":"历任楼地小学","x":153,"hasChildren":false},{"type":4,"text":"校长为人乐善","x":131,"hasChildren":false},{"type":4,"text":"好施人们办事","x":109,"hasChildren":false},{"type":4,"text":"都找他殁于民","x":87,"hasChildren":false},{"type":4,"text":"国三十二年癸","x":65,"hasChildren":false},{"type":4,"text":"未（1943）六","x":43,"hasChildren":false},{"type":4,"text":"月初八葬苏屋","x":21,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十四世","x":367,"hasChildren":false},{"type":2,"text":"裕丰五公","x":340,"hasChildren":false},{"type":3,"text":"裕丰","x":310,"hasChildren":false},{"type":4,"text":"裕字辈裕丰五","x":285,"hasChildren":false},{"type":4,"text":"公又名五公号","x":263,"hasChildren":false},{"type":4,"text":"茂兴生于1921","x":241,"hasChildren":false},{"type":4,"text":"-04-01殁于20","x":219,"hasChildren":false},{"type":4,"text":"09-04-05享寿","x":197,"hasChildren":false},{"type":4,"text":"八十九岁葬屋","x":175,"hasChildren":false},{"type":4,"text":"坤岭坐东","x":153,"hasChildren":false},{"type":5,"text":"配陈氏","x":131,"hasChildren":false},{"type":4,"text":"生于1922-02-","x":109,"hasChildren":false},{"type":4,"text":"05殁于1989-0","x":87,"hasChildren":false},{"type":4,"text":"9-29享寿六十","x":65,"hasChildren":false},{"type":4,"text":"七岁葬睡狗岭","x":43,"hasChildren":false},{"type":4,"text":"坐西向东","x":21,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十五世","x":367,"hasChildren":false},{"type":3,"text":"浩文","x":310,"hasChildren":false},{"type":4,"text":"民字辈又名华","x":285,"hasChildren":false},{"type":4,"text":"兴生于2010-0","x":263,"hasChildren":false},{"type":4,"text":"3-07殁于2010","x":241,"hasChildren":false},{"type":4,"text":"年03月07日未","x":219,"hasChildren":false},{"type":4,"text":"时葬搜古洋","x":197,"hasChildren":false},{"type":6,"text":"祧子一　瑾良","x":175,"selfPage3":4,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十六世","x":367,"hasChildren":false},{"type":2,"text":"本科毕业","x":340,"hasChildren":false},{"type":3,"text":"瑾良","x":310,"hasChildren":false},{"type":4,"text":"本科毕业祖居","x":285,"hasChildren":false},{"type":4,"text":"地广东省湛江","x":263,"hasChildren":false},{"type":4,"text":"市吴川市生于","x":241,"hasChildren":false},{"type":4,"text":"一九八九年己","x":219,"hasChildren":false},{"type":4,"text":"巳二月初四酉","x":197,"hasChildren":false},{"type":4,"text":"时本科毕业威","x":175,"hasChildren":false},{"type":4,"text":"信科技创始人","x":153,"hasChildren":false},{"type":4,"text":"详生父耀民兼","x":131,"hasChildren":false},{"type":4,"text":"祧为嗣","x":109,"hasChildren":false},{"type":5,"text":"配招氏","x":87,"hasChildren":false},{"type":4,"text":"暨南大学博士","x":65,"hasChildren":false},{"type":4,"text":"就读","x":43,"hasChildren":false},{"type":6,"text":"生女一　敏春","x":21,"selfPage3":4,"hasChildren":false}]},{"itemData":[{"type":1,"text":"十七世","x":367,"hasChildren":false},{"type":3,"text":"敏春","x":310,"hasChildren":false},{"type":4,"text":"春字辈又名静","x":285,"hasChildren":false},{"type":4,"text":"希生于2019年","x":263,"hasChildren":false},{"type":4,"text":"03月03日辰时","x":241,"hasChildren":false}]}]},{"pageType":3,"pageIndex":4,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[{"type":4,"text":"岭坐北","x":382,"hasChildren":false},{"type":5,"text":"配招氏","x":360,"hasChildren":false},{"type":4,"text":"生于同治甲戍","x":338,"hasChildren":false},{"type":4,"text":"八月初五卒于","x":316,"hasChildren":false},{"type":4,"text":"民国庚申四月","x":294,"hasChildren":false},{"type":4,"text":"葬羌坡坐子","x":272,"hasChildren":false},{"type":5,"text":"继娶陈氏","x":250,"hasChildren":false},{"type":4,"text":"生于光绪辛卯","x":228,"hasChildren":false},{"type":4,"text":"八月初五卒于","x":206,"hasChildren":false},{"type":4,"text":"一九七五年葬","x":184,"hasChildren":false},{"type":4,"text":"猫王岭坐东","x":162,"hasChildren":false},{"type":6,"text":"生子二　裕丰","x":140,"selfPage3":4,"hasChildren":false},{"type":6,"text":"　　　　裕龙","x":118,"selfPage3":14,"hasChildren":false}]},{"itemData":[{"type":6,"text":"生子三　浩文","x":382,"selfPage3":4,"hasChildren":false},{"type":6,"text":"　　　　杰文","x":360,"selfPage3":5,"hasChildren":false},{"type":6,"text":"　　　　晓文","x":338,"selfPage3":8,"hasChildren":false},{"type":6,"text":"生女三　阿康","x":316,"selfPage3":11,"hasChildren":false},{"type":6,"text":"　　　　阿娣","x":294,"selfPage3":12,"hasChildren":false},{"type":6,"text":"　　　　阿雪","x":272,"selfPage3":12,"hasChildren":false}]},{"itemData":[{"type":3,"text":"杰文","x":362,"hasChildren":false},{"type":4,"text":"民字辈又名日","x":337,"hasChildren":false},{"type":4,"text":"土生于1947年","x":315,"hasChildren":false},{"type":4,"text":"08月19日","x":293,"hasChildren":false},{"type":5,"text":"配林氏","x":271,"hasChildren":false},{"type":4,"text":"生于1955年08","x":249,"hasChildren":false},{"type":4,"text":"月02日","x":227,"hasChildren":false},{"type":6,"text":"生子二　瑾波","x":205,"selfPage3":5,"hasChildren":false},{"type":6,"text":"　　　　瑾豪","x":183,"selfPage3":5,"hasChildren":false},{"type":6,"text":"生女二　瑾容","x":161,"selfPage3":7,"hasChildren":false},{"type":6,"text":"　　　　瑾苹","x":139,"selfPage3":7,"hasChildren":false}]},{"itemData":[{"type":3,"text":"瑾波","x":362,"hasChildren":false},{"type":4,"text":"又名递仔生于","x":337,"hasChildren":false},{"type":4,"text":"一九七八年十","x":315,"hasChildren":false},{"type":4,"text":"一月十四日巳","x":293,"hasChildren":false},{"type":4,"text":"时","x":271,"hasChildren":false},{"type":5,"text":"配张氏","x":249,"hasChildren":false},{"type":4,"text":"生于一九七九","x":227,"hasChildren":false},{"type":4,"text":"年十一月十四","x":205,"hasChildren":false},{"type":4,"text":"日巳时","x":183,"hasChildren":false},{"type":6,"text":"生子一　宇春","x":161,"selfPage3":5,"hasChildren":false},{"type":6,"text":"生女一　艳春","x":139,"selfPage3":5,"hasChildren":false},{"type":3,"text":"瑾豪","x":51,"hasChildren":false},{"type":4,"text":"瑾字辈又名观","x":26,"hasChildren":false},{"type":4,"text":"土号红眼阿三","x":4,"hasChildren":false}]},{"itemData":[{"type":3,"text":"宇春","x":362,"hasChildren":false},{"type":4,"text":"春字辈又名西","x":337,"hasChildren":false},{"type":4,"text":"马生于1998年","x":315,"hasChildren":false},{"type":4,"text":"01月13日戌时","x":293,"hasChildren":false},{"type":3,"text":"艳春","x":221,"hasChildren":false},{"type":4,"text":"春字辈又名阿","x":196,"hasChildren":false},{"type":4,"text":"妹生于2000-0","x":174,"hasChildren":false},{"type":4,"text":"5-09申时","x":152,"hasChildren":false},{"type":2,"text":"城建小学","x":81,"hasChildren":false},{"type":3,"text":"炅春","x":51,"hasChildren":false},{"type":4,"text":"春字辈城建小","x":26,"hasChildren":false},{"type":4,"text":"学又名阿B生于","x":4,"hasChildren":false}]}]},{"pageType":3,"pageIndex":5,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[]},{"itemData":[{"type":4,"text":"生于1980年09","x":382,"hasChildren":false},{"type":4,"text":"月30日大学毕","x":360,"hasChildren":false},{"type":4,"text":"业美之选集团","x":338,"hasChildren":false},{"type":4,"text":"执行董事","x":316,"hasChildren":false},{"type":5,"text":"配肖氏","x":294,"hasChildren":false},{"type":4,"text":"生于1983年11","x":272,"hasChildren":false},{"type":4,"text":"月19日寅时","x":250,"hasChildren":false},{"type":6,"text":"生子三　炅春","x":228,"selfPage3":5,"hasChildren":false},{"type":6,"text":"　　　　涣春","x":206,"selfPage3":6,"hasChildren":false},{"type":6,"text":"　　　　烋春","x":184,"selfPage3":6,"hasChildren":false},{"type":6,"text":"生女一　雪春","x":162,"selfPage3":7,"hasChildren":false}]},{"itemData":[{"type":4,"text":"2008年11月20","x":382,"hasChildren":false},{"type":4,"text":"日卯时","x":360,"hasChildren":false},{"type":2,"text":"梅岭小学","x":302,"hasChildren":false},{"type":3,"text":"涣春","x":272,"hasChildren":false},{"type":4,"text":"春字辈梅岭小","x":247,"hasChildren":false},{"type":4,"text":"学又名阿细生","x":225,"hasChildren":false},{"type":4,"text":"于2009年09月","x":203,"hasChildren":false},{"type":4,"text":"14日午时","x":181,"hasChildren":false},{"type":2,"text":"新华小学","x":123,"hasChildren":false},{"type":3,"text":"烋春","x":93,"hasChildren":false},{"type":4,"text":"春字辈新华小","x":68,"hasChildren":false},{"type":4,"text":"学又名珙璋生","x":46,"hasChildren":false},{"type":4,"text":"于2013年02月","x":24,"hasChildren":false},{"type":4,"text":"26日亥时","x":2,"hasChildren":false}]}]},{"pageType":3,"pageIndex":6,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[]},{"itemData":[{"type":3,"text":"瑾容","x":221,"hasChildren":false},{"type":4,"text":"瑾字辈又名爱","x":196,"hasChildren":false},{"type":4,"text":"清生于1976-0","x":174,"hasChildren":false},{"type":4,"text":"6-25巳时","x":152,"hasChildren":false},{"type":5,"text":"适陈阿伟","x":130,"hasChildren":false},{"type":4,"text":"生于子时","x":108,"hasChildren":false},{"type":3,"text":"瑾苹","x":36,"hasChildren":false},{"type":4,"text":"生于一九八七","x":11,"hasChildren":false}]},{"itemData":[{"type":3,"text":"雪春","x":362,"hasChildren":false},{"type":4,"text":"春字辈又名冰","x":337,"hasChildren":false},{"type":4,"text":"茹生于2017年","x":315,"hasChildren":false},{"type":4,"text":"06月05日未时","x":293,"hasChildren":false}]}]},{"pageType":3,"pageIndex":7,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":2,"text":"高中毕业","x":214,"hasChildren":false},{"type":3,"text":"晓文","x":184,"hasChildren":false},{"type":4,"text":"民字辈高中毕","x":159,"hasChildren":false},{"type":4,"text":"业又名亚胜生","x":137,"hasChildren":false},{"type":4,"text":"于1957-6-20殁","x":115,"hasChildren":false},{"type":4,"text":"于2009-8-29葬","x":93,"hasChildren":false},{"type":4,"text":"屋坤岭坐东向","x":71,"hasChildren":false},{"type":4,"text":"西","x":49,"hasChildren":false},{"type":5,"text":"配李氏","x":27,"hasChildren":false}]},{"itemData":[{"type":4,"text":"年七月二十二","x":382,"hasChildren":false},{"type":4,"text":"日辰时","x":360,"hasChildren":false},{"type":5,"text":"适曾小亮","x":338,"hasChildren":false},{"type":4,"text":"生于一九八七","x":316,"hasChildren":false},{"type":4,"text":"年七月二十二","x":294,"hasChildren":false},{"type":4,"text":"日辰时","x":272,"hasChildren":false},{"type":2,"text":"本科毕业","x":214,"hasChildren":false},{"type":3,"text":"瑾秋","x":184,"hasChildren":false},{"type":4,"text":"本科毕业又名","x":159,"hasChildren":false},{"type":4,"text":"阿虎生于一九","x":137,"hasChildren":false},{"type":4,"text":"八六年八月十","x":115,"hasChildren":false},{"type":4,"text":"六日午时毕业","x":93,"hasChildren":false},{"type":4,"text":"于五邑大学信","x":71,"hasChildren":false},{"type":4,"text":"息学院计算机","x":49,"hasChildren":false},{"type":4,"text":"科学与技术专","x":27,"hasChildren":false},{"type":4,"text":"业","x":5,"hasChildren":false}]},{"itemData":[{"type":3,"text":"丽春","x":184,"hasChildren":false},{"type":4,"text":"春字辈又名茜","x":159,"hasChildren":false},{"type":4,"text":"茹生于2019年","x":137,"hasChildren":false},{"type":4,"text":"08月07日辰时","x":115,"hasChildren":false}]}]},{"pageType":3,"pageIndex":8,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":4,"text":"生于1962年07","x":382,"hasChildren":false},{"type":4,"text":"月11日","x":360,"hasChildren":false},{"type":6,"text":"生子三　瑾秋","x":338,"selfPage3":8,"hasChildren":false},{"type":6,"text":"　　　　瑾明","x":316,"selfPage3":9,"hasChildren":false},{"type":6,"text":"　　　　瑾良","x":294,"selfPage3":10,"hasChildren":false},{"type":6,"text":"生女一　瑾英","x":272,"selfPage3":11,"hasChildren":false}]},{"itemData":[{"type":5,"text":"配高氏","x":382,"hasChildren":false},{"type":4,"text":"生于一九八八","x":360,"hasChildren":false},{"type":4,"text":"年八月十六日","x":338,"hasChildren":false},{"type":4,"text":"午时","x":316,"hasChildren":false},{"type":6,"text":"生女一　丽春","x":294,"selfPage3":8,"hasChildren":false},{"type":2,"text":"硕士毕业","x":236,"hasChildren":false},{"type":3,"text":"瑾明","x":206,"hasChildren":false},{"type":4,"text":"瑾字辈硕士毕","x":181,"hasChildren":false},{"type":4,"text":"业生于1987年","x":159,"hasChildren":false},{"type":4,"text":"09月18日卯时","x":137,"hasChildren":false},{"type":4,"text":"中共党员悬壶","x":115,"hasChildren":false},{"type":4,"text":"中医针灸馆首","x":93,"hasChildren":false},{"type":4,"text":"席执业医师毕","x":71,"hasChildren":false},{"type":4,"text":"业于广州中医","x":49,"hasChildren":false},{"type":4,"text":"药学院本硕连","x":27,"hasChildren":false},{"type":4,"text":"读","x":5,"hasChildren":false}]},{"itemData":[]}]},{"pageType":3,"pageIndex":9,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[]},{"itemData":[{"type":5,"text":"配凌奥婷","x":382,"hasChildren":false},{"type":4,"text":"生于子时","x":360,"hasChildren":false},{"type":2,"text":"本科毕业","x":302,"hasChildren":false},{"type":3,"text":"瑾良","x":272,"hasChildren":false},{"type":4,"text":"本科毕业祖居","x":247,"hasChildren":false},{"type":4,"text":"地广东省湛江","x":225,"hasChildren":false},{"type":4,"text":"市吴川市生于","x":203,"hasChildren":false},{"type":4,"text":"一九八九年己","x":181,"hasChildren":false},{"type":4,"text":"巳二月初四酉","x":159,"hasChildren":false},{"type":4,"text":"时本科毕业威","x":137,"hasChildren":false},{"type":4,"text":"信科技创始人","x":115,"hasChildren":false},{"type":4,"text":"详生父耀民兼","x":93,"hasChildren":false},{"type":4,"text":"祧为嗣","x":71,"hasChildren":false},{"type":5,"text":"配招氏","x":49,"hasChildren":false},{"type":4,"text":"暨南大学博士","x":27,"hasChildren":false},{"type":4,"text":"就读","x":5,"hasChildren":false}]},{"itemData":[{"type":3,"text":"敏春","x":272,"hasChildren":false},{"type":4,"text":"春字辈又名静","x":247,"hasChildren":false},{"type":4,"text":"希生于2019年","x":225,"hasChildren":false},{"type":4,"text":"03月03日辰时","x":203,"hasChildren":false}]}]},{"pageType":3,"pageIndex":10,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":3,"text":"阿康","x":37,"hasChildren":false},{"type":4,"text":"生于一九四九","x":12,"hasChildren":false}]},{"itemData":[{"type":6,"text":"生女一　敏春","x":382,"selfPage3":10,"hasChildren":false},{"type":3,"text":"瑾英","x":310,"hasChildren":false},{"type":4,"text":"生于一九九一","x":285,"hasChildren":false},{"type":4,"text":"年九月一日","x":263,"hasChildren":false},{"type":5,"text":"适陈土勇","x":241,"hasChildren":false},{"type":4,"text":"生于一九九〇","x":219,"hasChildren":false},{"type":4,"text":"年九月一日韵","x":197,"hasChildren":false},{"type":4,"text":"佟再生资源创","x":175,"hasChildren":false},{"type":4,"text":"始人","x":153,"hasChildren":false},{"type":6,"text":"生女二　韵韵","x":131,"selfPage3":11,"hasChildren":false},{"type":6,"text":"　　　　佟佟","x":109,"selfPage3":11,"hasChildren":false}]},{"itemData":[{"type":3,"text":"韵韵","x":310,"hasChildren":false},{"type":4,"text":"生于2015.6.5","x":285,"hasChildren":false},{"type":4,"text":"卯时","x":263,"hasChildren":false},{"type":3,"text":"佟佟","x":191,"hasChildren":false},{"type":4,"text":"生于2020.8.6","x":166,"hasChildren":false},{"type":4,"text":"申时","x":144,"hasChildren":false}]}]},{"pageType":3,"pageIndex":11,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":4,"text":"年五月二十七","x":382,"hasChildren":false},{"type":4,"text":"日卯时","x":360,"hasChildren":false},{"type":5,"text":"适李阿宝","x":338,"hasChildren":false},{"type":4,"text":"生于一九四九","x":316,"hasChildren":false},{"type":4,"text":"年五月二十日","x":294,"hasChildren":false},{"type":3,"text":"阿娣","x":222,"hasChildren":false},{"type":4,"text":"生于一九五二","x":197,"hasChildren":false},{"type":4,"text":"年三月十九日","x":175,"hasChildren":false},{"type":4,"text":"午时","x":153,"hasChildren":false},{"type":5,"text":"适李阿贵","x":131,"hasChildren":false},{"type":3,"text":"阿雪","x":59,"hasChildren":false},{"type":4,"text":"民字辈生于19","x":34,"hasChildren":false},{"type":4,"text":"60年02月26日","x":12,"hasChildren":false}]},{"itemData":[]},{"itemData":[]}]},{"pageType":3,"pageIndex":12,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"楼地"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":4,"text":"巳时","x":382,"hasChildren":false},{"type":5,"text":"适何志艺","x":360,"hasChildren":false}]},{"itemData":[]},{"itemData":[]}]},{"pageType":3,"pageIndex":13,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"赤里村"},"columns":[{"itemData":[]},{"itemData":[{"type":2,"text":"中共党员","x":376,"hasChildren":false},{"type":3,"text":"裕龙","x":346,"hasChildren":false},{"type":4,"text":"中共党员生于","x":321,"hasChildren":false},{"type":4,"text":"民国二十年辛","x":299,"hasChildren":false},{"type":4,"text":"未（1931）十","x":277,"hasChildren":false},{"type":4,"text":"一月初二","x":255,"hasChildren":false},{"type":5,"text":"配李氏","x":233,"hasChildren":false},{"type":4,"text":"生于民国二十","x":211,"hasChildren":false},{"type":4,"text":"二年癸酉（19","x":189,"hasChildren":false},{"type":4,"text":"33）九月初九","x":167,"hasChildren":false},{"type":4,"text":"殁于一九八五","x":145,"hasChildren":false},{"type":4,"text":"年五月一日辰","x":123,"hasChildren":false},{"type":4,"text":"时葬龙狗坡岭","x":101,"hasChildren":false},{"type":4,"text":"坐东北","x":79,"hasChildren":false},{"type":6,"text":"生子一　祖民","x":57,"selfPage3":14,"hasChildren":false},{"type":6,"text":"生女一　阿娇","x":35,"selfPage3":15,"hasChildren":false}]},{"itemData":[{"type":3,"text":"祖民","x":346,"hasChildren":false},{"type":4,"text":"又名亚养生于","x":321,"hasChildren":false},{"type":4,"text":"一九六四年甲","x":299,"hasChildren":false},{"type":4,"text":"辰十月初三","x":277,"hasChildren":false},{"type":5,"text":"配陈氏","x":255,"hasChildren":false},{"type":4,"text":"生于一九六六","x":233,"hasChildren":false},{"type":4,"text":"年","x":211,"hasChildren":false},{"type":6,"text":"生子三　瑾荣","x":189,"selfPage3":14,"hasChildren":false},{"type":6,"text":"　　　　瑾华","x":167,"selfPage3":14,"hasChildren":false},{"type":6,"text":"　　　　瑾培","x":145,"selfPage3":14,"hasChildren":false},{"type":6,"text":"生女一　瑾芳","x":123,"selfPage3":15,"hasChildren":false}]},{"itemData":[{"type":3,"text":"瑾荣","x":346,"hasChildren":false},{"type":4,"text":"生于一九九五","x":321,"hasChildren":false},{"type":4,"text":"年正月十九日","x":299,"hasChildren":false},{"type":4,"text":"午时","x":277,"hasChildren":false},{"type":5,"text":"娶未详","x":255,"hasChildren":false},{"type":6,"text":"生子一　何春","x":233,"selfPage3":14,"hasChildren":false},{"type":3,"text":"瑾华","x":161,"hasChildren":false},{"type":4,"text":"瑾字辈生于19","x":136,"hasChildren":false},{"type":4,"text":"98年11月20日","x":114,"hasChildren":false},{"type":4,"text":"亥时","x":92,"hasChildren":false},{"type":3,"text":"瑾培","x":20,"hasChildren":false}]},{"itemData":[{"type":3,"text":"何春","x":346,"hasChildren":false},{"type":4,"text":"春字辈生于20","x":321,"hasChildren":false},{"type":4,"text":"18年09月07日","x":299,"hasChildren":false},{"type":4,"text":"戌时","x":277,"hasChildren":false}]}]},{"pageType":3,"pageIndex":14,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"赤里村"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":3,"text":"阿娇","x":125,"hasChildren":false},{"type":4,"text":"民字辈生于19","x":100,"hasChildren":false},{"type":4,"text":"61年03月07日","x":78,"hasChildren":false},{"type":4,"text":"酉时","x":56,"hasChildren":false},{"type":5,"text":"适李阿寿","x":34,"hasChildren":false},{"type":4,"text":"生于1958年10","x":12,"hasChildren":false}]},{"itemData":[{"type":4,"text":"瑾字辈生于20","x":382,"hasChildren":false},{"type":4,"text":"03年12月30日","x":360,"hasChildren":false},{"type":4,"text":"巳时","x":338,"hasChildren":false},{"type":3,"text":"瑾芳","x":266,"hasChildren":false},{"type":4,"text":"瑾字辈又名带","x":241,"hasChildren":false},{"type":4,"text":"娣生于1989年","x":219,"hasChildren":false},{"type":4,"text":"06月07日卯时","x":197,"hasChildren":false}]},{"itemData":[]}]},{"pageType":3,"pageIndex":15,"firstPage":false,"head":{"name":"莲山谱牒范例","volume":"全卷","title":"十三至十七世","other":"赤里村"},"columns":[{"itemData":[]},{"itemData":[]},{"itemData":[{"type":4,"text":"月26日巳时","x":382,"hasChildren":false}]},{"itemData":[]},{"itemData":[]}]}]}}'),ae=function(){var e=this,t=e._self._c;return t("div",{staticClass:"h-right"},[t("div",{staticClass:"title"},[t("div",{staticClass:"name"},[e._v("莲山谱牒范例")]),t("i",{staticClass:"c-pointer cus-edit-toolbar-icon icon-edit-toolbarcuo",on:{click:e.handleClose}})]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4)])},ie=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"format"},[t("div",{staticClass:"name"},[e._v("预览版式：欧式")]),t("div",{staticClass:"direction"},[e._v("预览开向：右开")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"desc"},[t("div",{staticClass:"desc-title"},[e._v("预览说明：")]),t("div",{staticClass:"text"},[t("div",[e._v("谱系预览仅支持使用版式[欧式]预览")]),t("div",[e._v("需阅读完整谱书请使用[谱书]制作生成，支持"),t("b",{attrs:{"data-v-22dec738":""}},[e._v("欧式、苏式、牒记式、现代式、宝塔式。")])])]),t("div",[t("a",{staticClass:"button el-link el-link--default"},[t("span",{staticClass:"el-link--inner"},[e._v("制作谱书")])])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"menu"},[t("div",{staticClass:"item"},[t("div",{staticClass:"cell menu-title"},[t("i",{staticClass:"icon h-icon-tubiao_xu c-ff7926"}),t("span",{staticClass:"txt"},[e._v("大纲目录")])]),t("div",{staticClass:"submenu"},[t("div",{staticClass:"cell"},[t("i",{staticClass:"icon h-icon-puwenneirong c-ff7926"}),t("span",{staticClass:"txt"},[e._v("检索表")])]),t("div",{staticClass:"cell"},[t("i",{staticClass:"icon h-icon-puxi c-ff7926"}),t("span",{staticClass:"txt"},[e._v("世系图")])]),t("div",{staticClass:"cell"},[t("i",{staticClass:"icon h-icon-puxi c-ff7926"}),t("span",{staticClass:"txt"},[e._v("世系表")])])])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"back"},[t("a",{staticClass:"button el-link el-link--default"},[t("span",{staticClass:"el-link--inner"},[t("i",{staticClass:"h-icon-chexiao1"}),e._v("返回谱系")])])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"nav"},[t("div",{staticClass:"btn"},[t("i",{staticClass:"el-icon-arrow-left"}),e._v("下页")]),t("div",{staticClass:"page"},[e._v("1/17")]),t("div",{staticClass:"text"},[e._v("前往")]),t("div",{staticClass:"number"},[t("input",{staticClass:"input",attrs:{type:"number"}})]),t("div",{staticClass:"text to"},[e._v("跳转")]),t("div",{staticClass:"btn"},[e._v("上页"),t("i",{staticClass:"el-icon-arrow-right"})])])}],ne={props:{close:{type:Function,default:function(){}}},methods:{handleClose:function(){var e;null===(e=this.close)||void 0===e||e.call(this)}}},se=ne,re=(0,b.A)(se,ae,ie,!1,null,"79a5f602",null),le=re.exports,de={name:"ClanPreviewDetailPage",components:{Right:le,PageTypeOne:k,PageTypeTwo:E,PageTypeThree:ee},data:function(){var e=te.p,t=e.pages;return{pageList:t}},props:{close:{type:Function,default:function(){}}}},ce=de,oe=(0,b.A)(ce,v,p,!1,null,"39fee1d2",null),he=oe.exports,ue={name:"ClanPreview",components:{ClanPreviewDetail:he},props:{close:{type:Function,default:function(){}}}},fe=ue,ve=(0,b.A)(fe,u,f,!1,null,"3cc57f36",null),pe=ve.exports,me=a(48179),xe=function(){var e=this,t=e._self._c;return t("a-modal",{staticClass:"add-ancestor-modal-wrap",attrs:{title:"调整世系"},on:{ok:e.handleOk,cancel:function(t){return e.$emit("close")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{attrs:{form:e.form,"label-col":{span:7},"wrapper-col":{span:16}},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"设置对象"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name"],expression:"['name']"}],attrs:{placeholder:"请输入",disabled:"",maxLength:30}})],1),t("a-form-item",{attrs:{label:"当前世系"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["generation"],expression:"['generation']"}],attrs:{placeholder:"请输入",disabled:"",maxLength:30}})],1),t("a-form-item",{attrs:{label:"调整为"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["edit-generation",{rules:[{required:!0,message:"请输入世系!"}]}],expression:"['edit-generation', { rules: [{ required: true, message: '请输入世系!' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),t("a-form-item",{attrs:{label:"调整范围"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["type",{rules:[{required:!0,message:"请选择调整范围!"}]}],expression:"['type', { rules: [{ required: true, message: '请选择调整范围!' }] }]"}],staticStyle:{width:"100%"}},[t("a-select-option",{attrs:{value:1}},[e._v("仅自己")]),t("a-select-option",{attrs:{value:2}},[e._v("自己及后代(分支下非断代，且世数连续的后裔)")]),t("a-select-option",{attrs:{value:3}},[e._v("自己及后代(分支下非断代的所有后裔)")]),t("a-select-option",{attrs:{value:4}},[e._v("自己及后代(分支下的所有后裔)")])],1)],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[t("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.loading}},[e._v("确定")])],1)],1)],1)},ge=[],Ce={name:"TiaoZhengShiXiModal",data:function(){return{visible:!0,loading:!1,form:this.$form.createForm(this,{name:"shixi"})}},props:{selectedNode:{type:Object,default:function(){}}},watch:{selectedNode:{handler:function(e){e?(this.form.getFieldDecorator("name",{initialValue:e.name}),this.form.getFieldDecorator("generation",{initialValue:e.generation}),this.form.getFieldDecorator("type",{initialValue:1})):(this.form.getFieldDecorator("name",{initialValue:void 0}),this.form.getFieldDecorator("generation",{initialValue:void 0}),this.form.getFieldDecorator("type",{initialValue:1}))},deep:!0,immediate:!0}},methods:{handleOk:function(){this.$emit("close")},handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(){var e=(0,l.A)((0,s.A)().m(function e(a,i){return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:a||(t.$message.info("保存功能暂未实现"),t.$emit("close"));case 1:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}())}}},ye=Ce,_e=(0,b.A)(ye,xe,ge,!1,null,"540e4060",null),be=_e.exports,we={name:"PxHeader",components:{TiaoZhengShiXiModal:be,FamilyInfoComponent:me.A,ClanPreview:pe},data:function(){return{showPreview:!1,showFamilyBaseInfo:!1,showAdjustShiXiModal:!1,clan:{}}},props:{selectedNode:{type:Object,default:function(){}}},created:function(){this.$on("custom-event",function(e){})},computed:(0,d.A)({},(0,h.aH)({currentSelectedGroupId:function(e){return e.family.currentSelectedGroupId}})),mounted:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(e.currentSelectedGroupId){t.n=1;break}return t.a(2);case 1:return t.n=2,e.GetCurrentClan();case 2:a=t.v,e.clan=a;case 3:return t.a(2)}},t)}))()},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["GetCurrentClan"])),{},{handlePreview:function(){this.showPreview=!this.showPreview},handleAdjustShiXi:function(){this.showAdjustShiXiModal=!0},handleToggle:function(e){this.$message.info("该功能暂未实现"),"open"===e?this.$emit("open"):this.$emit("close")},handleSearch:function(){this.$message.info("该功能暂未实现")},handleMoreFunc:function(){this.$message.info("该功能暂未实现")},handleViewSetting:function(){this.$message.info("该功能暂未实现")},handleSave:function(){this.$message.info("该功能暂未实现")},handleMobilePreview:function(){this.$message.info("该功能暂未实现")}})},ke=we,Se=(0,b.A)(ke,c,o,!1,null,"72459594",null),De=Se.exports,Te=function(){var e=this,t=e._self._c;return t("div",{staticClass:"generations"},[t("div",{staticClass:"item"},[e._v("主世系")]),e._l(e.list,function(a){return t("div",{key:a,staticClass:"item",class:a===e.selected?"current":""},[e._v(e._s(a)+"世")])})],2)},Ae=[],Ie={props:{list:{type:Array,default:function(){return[]}},selected:{type:Number,default:-999}}},Pe=Ie,Ne=(0,b.A)(Pe,Te,Ae,!1,null,"2f15cf20",null),Le=Ne.exports,Me=function(){var e=this;e._self._c;return e._m(0)},$e=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tree-box",attrs:{"data-v-d2e510fe":"","data-v-e10d99d4":"",id:"tree-box"}},[t("div",{staticClass:"tree",attrs:{"data-v-d2e510fe":""}},[t("div",{staticClass:"tree-root",attrs:{"data-v-d2e510fe":""}},[t("div",{staticClass:"history",attrs:{"data-v-d2e510fe":""}},[t("div",{staticClass:"root",attrs:{"data-v-1f9e3c72":"","data-v-d2e510fe":"",id:"clan-tree-root"}},[t("div",{staticClass:"node expand border last-item",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-0",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line style-0",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[0世]")])]),t("div",{staticClass:"name selected",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367135"}},[t("i",{staticClass:"icon h-icon-nanxing dead",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367135"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[始祖]")]),t("span",{attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon h-icon-nvxing2",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"text more-wife",attrs:{"data-v-1f9e3c72":""}},[e._v("+添加配偶")])])]),t("div",{staticClass:"children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"node expand border current",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-2",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[1世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367136"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367136"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("世岐")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[长子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})]),t("div",{staticClass:"children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticStyle:{"margin-left":"-1px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"node expand border no-children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[2世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367137"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367137"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("邦")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[长子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"node expand border last-item",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[2世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367138"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367138"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("国瑚")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[次子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})]),t("div",{staticClass:"children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"node border",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367139"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367139"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("克龙")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[长子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"node border",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367141"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367141"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("克环")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[次子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"node border last-item",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367145"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367145"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("克虎")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[三子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])])])])])])])]),t("div",{staticClass:"node expand border current last-item",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-1 style-2",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[1世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367149"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367149"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("本华")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[次子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})]),t("div",{staticClass:"children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"node expand border last-item",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jianhao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[2世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367150"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367150"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("大昌")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[长子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})]),t("div",{staticClass:"children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"node border",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367151"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367151"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("景璋")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[长子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"node border no-children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367156"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367156"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("景珍")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[次子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])]),t("div",{staticClass:"node border last-item no-children",attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"border-left style-1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"item",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"before",attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon",attrs:{"data-v-1f9e3c72":"",title:"无编辑权限"}})]),t("div",{staticClass:"switch h-icon-jiahao1",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"padding",staticStyle:{width:"89px"},attrs:{"data-v-1f9e3c72":""}},[t("div",{staticClass:"line",attrs:{"data-v-1f9e3c72":""}}),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[3世]")])]),t("div",{staticClass:"name",attrs:{"data-v-1f9e3c72":"",id:"tree-input-638787051812367157"}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":"",title:"Ctrl+点击可切换过世状态"}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[t("button",{staticClass:"btn-name",attrs:{"data-v-1f9e3c72":"",id:"name-638787051812367157"}},[t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("谭")]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("景瑚")])])]),t("div",{staticClass:"name-top",attrs:{"data-v-1f9e3c72":""}})]),t("span",{attrs:{"data-v-1f9e3c72":""}},[e._v("[三子]")]),t("span",{attrs:{"data-v-1f9e3c72":""}})])])])])])])])])])]),t("div",{staticClass:"more-child",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[e._v("添加孩子")])]),t("div",{staticClass:"more-child more-brother",staticStyle:{"margin-left":"0px"},attrs:{"data-v-1f9e3c72":""}},[t("i",{staticClass:"icon h-icon-nanxing",attrs:{"data-v-1f9e3c72":""}}),t("div",{staticClass:"text",attrs:{"data-v-1f9e3c72":""}},[e._v("添加兄妹")])])])])])]),t("div",{staticClass:"member-tree-contextmenu",staticStyle:{left:"0px",top:"0px",display:"none"},attrs:{"data-v-7c780bba":"","data-v-d2e510fe":""}},[t("div",{staticClass:"item",attrs:{"data-v-7c780bba":""}},[t("div",{attrs:{"data-v-7c780bba":""}},[e._v("复制人物")])]),t("div",{staticClass:"item disabled",attrs:{"data-v-7c780bba":""}},[t("div",{attrs:{"data-v-7c780bba":""}},[e._v("粘贴人物")])])])])])}],Fe={},Ge=(0,b.A)(Fe,Me,$e,!1,null,"311abc2a",null),Oe=Ge.exports,Be=function(){var e,t,a=this,i=a._self._c;return i("div",{class:a.toggleClass()},[i("div",{staticClass:"toggle-btn",attrs:{title:"收起"},on:{click:a.handleToggle}},[i("i",[a._v(a._s(a.visible?"<":">"))]),i("div",{staticClass:"hint"},[i("div",[a._v("点")]),i("div",[a._v("击")]),i("div",[a._v(a._s(a.visible?"收":"展"))]),i("div",[a._v(a._s(a.visible?"起":"开"))])])]),a.visible?i("div",[i("div",{staticClass:"operate"},[i("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarCDNjiedian",attrs:{title:"创建谱系/分支"},on:{click:a.handleAddClan}}),i("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarxiugai",attrs:{title:"编辑谱系"},on:{click:function(e){return a.handleEditSelected()}}}),i("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1",attrs:{title:"删除谱系/分支"},on:{click:a.handleDelete}})]),i("a-divider",{staticStyle:{margin:"12px 0"}}),i("div",{staticClass:"f18 ml10 mb4"},[i("span",{staticClass:"line"}),a._v("谱系分支("+a._s(null===(e=a.pedigreeList)||void 0===e?void 0:e.length)+"/5)")]),i("div",{staticClass:"menu"},[i("a-spin",{attrs:{spinning:a.loading}},[a._l(a.pedigreeList,function(e){return i("div",{key:e.id,staticClass:"item",class:e.id===a.pedigreeId?"selected":"",on:{click:function(t){return a.handleSelected(e)}}},[i("div",{staticClass:"pic"},[i("div",{staticClass:"h-svg-icon-box"},[i("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarCDNjiedian",staticStyle:{"font-size":"14px",color:"white",height:"14px",width:"14px"}})])]),i("div",{staticClass:"txt-box"},[i("div",{staticClass:"name line-word-2"},[a._v(a._s(e.name))]),i("i",{staticClass:"edit cus-edit-toolbar-icon icon-edit-toolbarxiugai",staticStyle:{"font-size":"16px"},attrs:{title:"编辑"},on:{click:function(t){return a.handleEdit(e,t)}}})])])}),i("a-empty",{directives:[{name:"show",rawName:"v-show",value:0===(null===(t=a.pedigreeList)||void 0===t?void 0:t.length),expression:"pedigreeList?.length===0"}]})],2),i("div",{staticClass:"item add",on:{click:a.handleAddClan}},[a._v("+新建谱系")])],1)],1):a._e(),a.showEditPedigreeModal?i("edit-pedigree-modal",{attrs:{item:a.editItem},on:{refresh:a.onRefresh,"close-modal":a.handleClose}}):a._e()],1)},Ve=[],je=(a(6082),a(58423),function(){var e,t=this,a=t._self._c;return a("a-modal",{staticClass:"add-pedigree",attrs:{title:null!==(e=t.item)&&void 0!==e&&e.id?"编辑谱系分支":"新增谱系分支"},on:{cancel:function(e){return t.$emit("close-modal")}},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[a("a-spin",{attrs:{spinning:t.loading}},[a("a-form",{attrs:{form:t.form,"label-col":{span:5},"wrapper-col":{span:18}},on:{submit:t.handleSubmit}},[a("a-form-item",{attrs:{label:"谱系名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入谱系名称!"}]}],expression:"['name', { rules: [{ required: true, message: '请输入谱系名称!' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),a("a-form-item",{attrs:{label:"谱系姓氏"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["first_name",{rules:[{required:!0,message:"请输入谱系姓氏!"}]}],expression:"['first_name', { rules: [{ required: true, message: '请输入谱系姓氏!' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),a("a-form-item",{attrs:{label:"堂号"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["hall_name",{rules:[{required:!1,message:"请输入堂号!"}]}],expression:"['hall_name', { rules: [{ required: false, message: '请输入堂号!' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),a("a-form-item",{attrs:{label:"所在地区"}},[a("area-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["province",{rules:[{required:!0,validator:t.checkProvince}]}],expression:"['province', {rules: [{ required: true, validator: checkProvince }]}]"}],attrs:{"init-value":t.initValue}})],1),a("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[a("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(e){return t.$emit("close-modal")}}},[t._v("取消")]),a("a-button",{attrs:{type:"primary","html-type":"submit",loading:t.submitting}},[t._v("确定")])],1)],1)],1)],1)}),Re=[],Ee=a(59023),ze={name:"Pedigree",components:{AreaCascader:Ee.A},props:{item:{type:Object,default:function(){}}},data:function(){return{visible:!0,loading:!1,submitting:!1,initValue:[],form:this.$form.createForm(this,{name:"pedigreeForm"})}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId}})),mounted:function(){var e;if((null===(e=this.item)||void 0===e?void 0:e.id)>0){this.id=this.item.id;var t=this.item,a=t.name,i=t.province,n=t.city,s=t.district;this.initValue=[i,n,s],this.form.getFieldDecorator("name",{initialValue:a}),this.form.getFieldDecorator("first_name",{initialValue:this.item.first_name}),this.form.getFieldDecorator("hall_name",{initialValue:this.item.hall_name}),this.form.getFieldDecorator("province",{initialValue:s?[i,n,s]:[i,n]})}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["AddPedigree","UpdatePedigree"])),{},{checkProvince:function(e,t,a){if(t&&t.length>0)a();else{var i="请选择所在地区!";a(i)}},handleOk:function(e){this.visible=!1},handleSubmit:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:e.preventDefault(),i=t.AddPedigree,n=t.UpdatePedigree,t.form.validateFields(function(){var e=(0,l.A)((0,s.A)().m(function e(a,r){var l,c;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:if(a){e.n=4;break}if(c=(0,d.A)({},r),c.province=r.province[0],c.city=r.province[1],c.district=r.province[2]?r.province[2]:"",c.clan_id=t.currentSelectedClanId,null!==(l=t.item)&&void 0!==l&&l.id&&(c.pedigree_id=t.item.id),t.submitting=!0,!c.pedigree_id){e.n=2;break}return e.n=1,n(c);case 1:e.n=3;break;case 2:return e.n=3,i(c);case 3:t.submitting=!1,t.$emit("refresh"),t.$emit("close-modal");case 4:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}());case 1:return a.a(2)}},a)}))()}})},He=ze,We=(0,b.A)(He,je,Re,!1,null,"c76287d2",null),Ye=We.exports,qe={components:{EditPedigreeModal:Ye},data:function(){return{visible:!0,loading:!1,pedigreeList:[],pedigreeId:"",editItem:{},showEditPedigreeModal:!1}},computed:(0,d.A)({},(0,h.aH)({list:function(e){return e.px.list},currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),watch:{list:{handler:function(e){this.pedigreeList=e},immediate:!0},currentSelectedPedigreeId:{handler:function(e){this.pedigreeId=e,e&&this.handleGetPedigreeMemberList(e)},immediate:!0}},mounted:function(){this.onRefresh()},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["GetPedigreeList","SetCurrentPedigreeId","GetPedigreeMemberList","DeletedPedigree"])),{},{handleAddClan:function(){this.list.length>=5?this.$message.info("谱系分支最多为5个"):this.currentSelectedClanId?this.showEditPedigreeModal=!0:this.$message.info("请先添加家族")},handleClose:function(){this.editItem={},this.showEditPedigreeModal=!1},onRefresh:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(e.currentSelectedClanId){t.n=1;break}return t.a(2);case 1:return e.loading=!0,t.n=2,e.GetPedigreeList();case 2:e.loading=!1;case 3:return t.a(2)}},t)}))()},handleGetPedigreeMemberList:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return a.n=1,t.GetPedigreeMemberList({clan_id:t.currentSelectedClanId,pedigree_id:e,generation:3});case 1:return a.a(2)}},a)}))()},handleEdit:function(e,t){t.stopPropagation(),this.editItem=e,this.showEditPedigreeModal=!0},handleSelected:function(e){this.SetCurrentPedigreeId(e.id)},handleToggle:function(){this.visible=!this.visible},toggleClass:function(){return this.visible?"left-content":"left-content close"},handleEditSelected:function(){var e=this;if(this.currentSelectedClanId){var t=this.pedigreeList.find(function(t){return t.id===e.currentSelectedPedigreeId});this.editItem=t,this.showEditPedigreeModal=!0}else this.$message.info("请先添加家族")},handleDelete:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n,r;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(e.currentSelectedPedigreeId){t.n=1;break}return e.$message.error("请选择要删除的谱系分支"),t.a(2);case 1:a=e,i=e.DeletedPedigree,n={clan_id:e.currentSelectedClanId,id:e.currentSelectedPedigreeId},r=e.pedigreeList.find(function(t){return t.id===e.currentSelectedPedigreeId}),e.$confirm({title:"",content:"确定删除「".concat(r.name,"」谱系分支吗？"),okText:"确定",cancelText:"取消",onOk:function(){var e=(0,l.A)((0,s.A)().m(function e(){var t,r;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:return t=a.pedigreeList.findIndex(function(e){return e.id===a.currentSelectedPedigreeId}),r=0===t?a.pedigreeList[1]:a.pedigreeList[t-1],e.n=1,i(n);case 1:return a.pedigreeList.length>1?a.SetCurrentPedigreeId(r.id):a.SetCurrentPedigreeId(""),e.n=2,a.onRefresh();case 2:return e.a(2)}},e)}));function t(){return e.apply(this,arguments)}return t}()});case 2:return t.a(2)}},t)}))()},handleClanInfo:function(){this.$message.info("谱系信息待完善")},handleMove:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(t.currentSelectedPedigreeId){a.n=1;break}return t.$message.info("请选择要移动的谱系分支"),a.a(2);case 1:t.$message.info("移动信息待完善"),i=e,a.n="up"===i?2:"down"===i?3:4;break;case 2:return a.a(3,4);case 3:return a.a(3,4);case 4:return a.a(2)}},a)}))()},handleBackUp:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:i=e,a.n="export"===i?1:"import"===i?2:3;break;case 1:return t.$message.info("导出信息待完善"),a.a(3,3);case 2:return t.$message.info("导入信息待完善"),a.a(3,3);case 3:return a.a(2)}},a)}))()}})},Ke=qe,Ze=(0,b.A)(Ke,Be,Ve,!1,null,"bcf4f846",null),Xe=Ze.exports,Ue=function(){var e=this,t=e._self._c;return t("div",{class:e.getItemClass()},[t("member-action-menu",{attrs:{showBase:e.showBase,showBaseDetail:e.showBaseDetail},on:{toggleBase:e.showBaseInfo,action:e.handleClick,showModal:e.handleShowModal,fenFang:e.handleFenFang}}),t("member-base-info",{attrs:{showBase:e.showBase,activeNodeInfo:e.activeNodeInfo,selectedNode:e.selectedNode,selectedNodeId:e.selectedNodeId,father:e.father,rawDetail:e.rawDetail,loadingDetail:e.loadingDetail},on:{"update:loadingDetail":function(t){e.loadingDetail=t},"update:loading-detail":function(t){e.loadingDetail=t},toggleBaseMore:e.handleShowBaseMore,refreshDetail:e.RefreshDetail,updateTreeData:e.handleUpdateTreeData}}),t("member-detail-info",{attrs:{showBaseDetail:e.showBaseDetail,mainNodeInfo:e.mainNodeInfo,activeNodeInfo:e.activeNodeInfo,father:e.father,rawDetail:e.rawDetail},on:{toggleDetail:e.handleShowBaseMore,selectedNode:e.handleSelectedNode,addWife:e.handleAddWife,deleteWife:e.handleDeleteWife,refresh:e.RefreshDetail,updateTreeData:e.handleUpdateTreeData,updateTreeSelection:e.handleUpdateTreeSelection}}),e.showAddAncestor?t("add-ancestor",{on:{close:function(){return e.showAddAncestor=!1}}}):e._e(),e.showGuojiModal?t("guoji-modal",{attrs:{nodeInfo:e.nodeInfo},on:{close:function(){return e.showGuojiModal=!1}}}):e._e(),e.showFenFangModal?t("fen-fang-modal",{attrs:{tag:e.selectTagType,nodeInfo:e.nodeInfo},on:{close:function(){return e.showFenFangModal=!1}}}):e._e(),e.showSheZhuangModal?t("shezhuang-modal",{attrs:{selectedNode:e.selectedNode},on:{close:function(){return e.showSheZhuangModal=!1}}}):e._e(),e.showBiaoJiModal?t("biao-ji-modal",{attrs:{selectedNode:e.selectedNode},on:{close:function(t){e.showBiaoJiModal=!1}}}):e._e(),e.showTongjiModal?t("tongji-modal",{on:{close:function(t){e.showTongjiModal=!1}}}):e._e(),e.showZaoziModal?t("zao-zi-modal",{on:{close:function(t){e.showZaoziModal=!1}}}):e._e(),e.showBindModal?t("bind-modal",{on:{close:function(){return e.showBindModal=!1}}}):e._e()],1)},Je=[],Qe=a(55126),et=a.n(Qe),tt=a(44586),at=function(){var e=this,t=e._self._c;return t("a-modal",{staticClass:"add-ancestor-modal-wrap",attrs:{title:"添加始祖节点"},on:{ok:e.handleOk,cancel:function(t){return e.$emit("close")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{attrs:{form:e.form,"label-col":{span:7},"wrapper-col":{span:16}},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"请输入始祖谱名"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入始祖谱名!"}]}],expression:"['name', { rules: [{ required: true, message: '请输入始祖谱名!' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[t("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.loading}},[e._v("确定")])],1)],1)],1)},it=[],nt=a(69475),st={name:"AddAncestor",components:{},data:function(){return{visible:!0,loading:!1,form:this.$form.createForm(this,{name:"xxx"})}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),created:function(){},mounted:function(){},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["AddAncestor","RefreshPedigreeMemberList"])),{},{handleOk:function(){},handleSubmit:function(e){var t=this;e.preventDefault();var a=this.AddAncestor,i=this.RefreshPedigreeMemberList,n=this;this.form.validateFields(function(){var e=(0,l.A)((0,s.A)().m(function e(r,l){var d,c,o,h,u;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:if(r){e.n=2;break}return d=(0,nt._)(l.name),c=d.firstName,o=d.name,h=d.fullName,u={clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,generation:1,first_name:c,name:o,full_name:h,ranking:1,ranking_text:"始祖",relation:"生",sex:"男"},t.loading=!0,e.n=1,a(u);case 1:return t.loading=!1,n.$emit("close"),e.n=2,i();case 2:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}())}})},rt=st,lt=(0,b.A)(rt,at,it,!1,null,"62df28c2",null),dt=lt.exports,ct=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"过继",visible:e.visible,width:800,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"tab"},[t("div",{staticClass:"item",class:e.TabType.生===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TabType.生)}}},[e._v("迁移本人及后代 ")]),t("div",{staticClass:"item",class:e.TabType.嗣===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TabType.嗣)}}},[e._v("过继为嗣(继)子 ")]),t("div",{staticClass:"item",class:e.TabType.祧===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TabType.祧)}}},[e._v("过继为祧子")])]),t("div",{staticClass:"info"},[e._v(" 将 "),t("span",{staticClass:"primary"},[e._v(e._s(e.nodeInfo.full_name))]),e._v(" 过继为 "),t("span",{staticClass:"primary"},[e._v(e._s(e.selectedName))]),e._v(" 的 "),t("span",{staticClass:"primary"},[e._v(e._s(e.getShowName()))])]),t("div",[t("a-input-group",{attrs:{compact:""}},[t("a-select",{staticStyle:{width:"120px"},attrs:{"default-value":-1,size:"large"},on:{change:e.handleChangeGeneration}},[t("a-select-option",{attrs:{value:-1}},[e._v("全部世系")]),e._l(e.maxGenerationNum,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a)+"世")])})],2),t("a-input-search",{staticStyle:{width:"630px"},attrs:{placeholder:"请输入要查询人的姓名",size:"large","enter-button":""},on:{change:e.handleSearchTextChange,search:e.onSearch}})],1)],1),t("div",[t("a-table",{attrs:{columns:e.columns,"data-source":e.list,loading:e.loading,size:"small",pagination:e.pagination},on:{change:e.handlePageChange},scopedSlots:e._u([{key:"radio",fn:function(a,i){return[t("a-radio",{attrs:{value:a,checked:e.selectedId===a},on:{change:function(){return e.handleChange(i)}}})]}},{key:"parent",fn:function(a){return[t("span",[e._v(e._s(e.getParent(a)))])]}}])})],1)])},ot=[],ht=(a(28129),a(16663),[{title:"选择",dataIndex:"id",key:"id",scopedSlots:{customRender:"radio"}},{title:"姓名",dataIndex:"full_name",key:"full_name"},{title:"性别",dataIndex:"sex",key:"sex"},{title:"世代",key:"generation",dataIndex:"generation"},{title:"父母",key:"parents",dataIndex:"parents",scopedSlots:{customRender:"parent"}}]),ut={"生":"生","嗣":"嗣","祧":"祧","关联":"关联"},ft={name:"GuojiModal",data:function(){return{visible:!0,confirmLoading:!1,maxGenerationNum:Array(200).fill(0).map(function(e,t){return t+1}),TabType:ut,selectedType:ut.生,searchText:"",generation:-1,selectedId:"",selectedName:"选择目标",pagination:{current:1,pageSize:10,total:0},list:[],loading:!1,columns:ht}},props:{nodeInfo:{type:Object,default:function(){}}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),mounted:function(){this.GetListData()},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["GetMemberList","MoveMember","RefreshPedigreeMemberList"])),{},{getShowName:function(){var e=this.selectedType;switch(e){case ut.生:return"子女";case ut.嗣:return"嗣子";case ut.祧:return"祧子";case ut.关联:return"共同后代"}},getParent:function(e){var t="";return null!==e&&void 0!==e&&e.father&&(t=null===e||void 0===e?void 0:e.father.full_name),null!==e&&void 0!==e&&e.mother&&(t+=" ".concat(null===e||void 0===e?void 0:e.mother.full_name)),t},handleTabChange:function(e){this.selectedType=e},handleChangeGeneration:function(e){this.generation=e},handleOk:function(){var e=this.nodeInfo,t=this.selectedType,a=this.TabType,i=this.selectedName,n=this.handleSubmit;if(t===a.生){var s="将「".concat(e.full_name,"」作为生子出继到「").concat(i,"」的后代,将会自动断开与当前父亲的关系,确定要继续吗?");this.$confirm({title:"",content:s,okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){n()}})}else n()},handleSubmit:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n,r,l,d,c;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(a=e.selectedId,i=e.MoveMember,n=e.RefreshPedigreeMemberList,r=e.selectedType,l=e.nodeInfo,a){t.n=1;break}return e.$message.error("请选择出继对象"),t.a(2);case 1:return d={clan_id:e.currentSelectedClanId,pedigree_id:e.currentSelectedPedigreeId,member_id:l.id,target_id:a,relation:r},e.confirmLoading=!0,t.n=2,i(d);case 2:if(c=t.v,e.confirmLoading=!1,200!==c.code){t.n=4;break}return e.$message.success("操作成功"),e.$emit("close"),t.n=3,n();case 3:t.n=5;break;case 4:e.$message.error(c.message||"操作失败");case 5:return t.a(2)}},t)}))()},handleCancel:function(){this.$emit("close")},GetListData:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return a=e.GetMemberList,i={clan_id:e.currentSelectedClanId,pedigree_id:e.currentSelectedPedigreeId,search_generation:e.generation,search_name:e.searchText,page:e.pagination.current,pageSize:e.pagination.pageSize,pagination:!0},e.loading=!0,t.n=1,a(i);case 1:n=t.v,e.loading=!1,200===n.code&&(e.list=n.data.list||[],e.pagination.total=n.data.totalCount||0);case 2:return t.a(2)}},t)}))()},handlePageChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return t.pagination=e,a.n=1,t.GetListData();case 1:return a.a(2)}},a)}))()},handleSearchTextChange:function(e){this.searchText=e.target.value.trim()},onSearch:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.GetListData();case 1:return t.a(2)}},t)}))()},handleChange:function(e){this.selectedId=e.id,this.selectedName=e.full_name}})},vt=ft,pt=(0,b.A)(vt,ct,ot,!1,null,"9de737c4",null),mt=pt.exports,xt=(a(98308),a(93116),function(){var e=this,t=e._self._c;return t("div",[t("a-modal",{attrs:{title:"添加",visible:e.visible,width:800,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"tab"},[t("div",{staticClass:"item",class:e.TagType.分房===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TagType.分房)}}},[e._v("分房")]),t("div",{staticClass:"item",class:e.TagType.分屋===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TagType.分屋)}}},[e._v("分屋")]),t("div",{staticClass:"item",class:e.TagType.分支===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TagType.分支)}}},[e._v("分支")]),t("div",{staticClass:"item",class:e.TagType.分派===e.selectedType?"selected":"",on:{click:function(t){return e.handleTabChange(e.TagType.分派)}}},[e._v("分派")])]),t("div",{staticClass:"info flex align-center"},[e._v(" 设置 “"+e._s(e.nodeInfo.name)+"” 为 "),t("a-input",{staticStyle:{width:"150px","margin-left":"4px"},attrs:{placeholder:e.getInputPlaceholder()},model:{value:e.setStr,callback:function(t){e.setStr=t},expression:"setStr"}}),e._v(" 例如：“"+e._s(e.getExample())+"” ")],1),t("div",{staticClass:"flex mt4"},[t("div",[e._v("房系描述：")]),t("div",[t("a-textarea",{staticStyle:{width:"679px"},attrs:{placeholder:e.getInputPlaceholder(1),"auto-size":{minRows:3,maxRows:5}},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}})],1)]),t("div",{staticClass:"mt4"},[t("a-input-search",{staticStyle:{width:"748px"},attrs:{placeholder:"请输入要查询人的名称",size:"large","enter-button":""},on:{change:e.handleSearchTextChange,search:e.onSearch}})],1),t("div",{staticClass:"mt4"},[t("a-table",{attrs:{columns:e.columns,"data-source":e.list,loading:e.loading,size:"small"},scopedSlots:e._u([{key:"action",fn:function(a,i){return[t("span",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleUpdate(i)}}},[e._v("修改")]),e._v(" | "),t("span",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleDelete(i)}}},[e._v("删除")])]}}])})],1)]),e.showEditFenFangModal?t("edit-fen-fang-modal",{attrs:{item:e.nodeInfo,currentData:e.editFenFangData,tagType:e.TagType,selectedType:e.selectedType},on:{close:function(t){e.showEditFenFangModal=!1},refresh:e.handleRefresh}}):e._e()],1)}),gt=[],Ct=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"修改",visible:e.visible,width:500,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{ref:"form",attrs:{form:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-item",{attrs:{label:"人名",prop:"clan_member_name"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["clan_member_name",{rules:[{required:!1}]}],expression:"['clan_member_name', { rules: [{ required: false }] }]"}],attrs:{disabled:"",placeholder:"请输入人名"}})],1),t("a-form-item",{attrs:{label:e.upShowText,prop:"ancestor_name"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ancestor_name",{rules:[{required:!1}]}],expression:"['ancestor_name', { rules: [{ required: false }] }]"}],attrs:{disabled:"",placeholder:""}})],1),t("a-form-item",{attrs:{label:e.currentShowText,prop:"name"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入"+e.currentShowText}]}],expression:"['name', { rules: [{ required: true, message: '请输入' + currentShowText }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1)],1)],1)},yt=[],_t={name:"EditFenFangModal",data:function(){return{visible:!0,confirmLoading:!1,upShowText:"",currentShowText:"",labelCol:{lg:{span:5},sm:{span:5}},wrapperCol:{lg:{span:19},sm:{span:19}},form:this.$form.createForm(this)}},props:{item:{type:Object,default:function(){}},selectedType:{type:Number,default:0},tagType:{type:Object,default:function(){}},currentData:{type:Object,default:function(){}}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),watch:{selectedType:{handler:function(e){this.getShowStr()},immediate:!0},currentData:{handler:function(e){this.form.getFieldDecorator("clan_member_name",{initialValue:e.clan_member_name}),this.form.getFieldDecorator("ancestor_name",{initialValue:e.ancestor_name}),this.form.getFieldDecorator("name",{initialValue:e.name})},immediate:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["SaveMemberBranch","RefreshPedigreeMemberList"])),{},{getShowStr:function(){var e=this.selectedType,t=this.tagType;switch(e){case t.分房:this.upShowText="上级始祖",this.currentShowText="房系名称";break;case t.分屋:this.upShowText="上级房系",this.currentShowText="屋系名称";break;case t.分支:this.upShowText="上级屋系",this.currentShowText="支系名称";break;case t.分派:this.upShowText="上级支系",this.currentShowText="派系名称";break}},handleOk:function(){var e=this;this.form.validateFields(function(){var t=(0,l.A)((0,s.A)().m(function t(a,i){var n,r,l,d,c,o,h;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(a){t.n=4;break}return n=i.name,r=e.SaveMemberBranch,l=e.RefreshPedigreeMemberList,d=e.selectedType,c=e.currentData,o={clan_id:e.currentSelectedClanId,pedigree_id:e.currentSelectedPedigreeId,branch_id:c.id,branch_tag:d,name:n,clan_member_id:c.clan_member_id,clan_member_name:c.clan_member_name,ancestor:c.ancestor_name},e.confirmLoading=!0,t.n=1,r(o);case 1:if(h=t.v,e.confirmLoading=!1,200!==h.code){t.n=3;break}return e.$message.success("操作成功"),e.$emit("refresh"),e.$emit("close"),t.n=2,l();case 2:t.n=4;break;case 3:e.$message.error(h.message||"操作失败");case 4:return t.a(2)}},t)}));return function(e,a){return t.apply(this,arguments)}}())},handleCancel:function(){this.$emit("close")}})},bt=_t,wt=(0,b.A)(bt,Ct,yt,!1,null,"097ef0bc",null),kt=wt.exports,St=a(11637),Dt=St.P,Tt={name:"FenFangModal",components:{EditFenFangModal:kt},data:function(){return{visible:!0,setStr:"",description:"",confirmLoading:!1,TagType:Dt,selectedType:Dt.分房,list:[],loading:!1,columns:[{title:"人名",dataIndex:"clan_member_name",key:"clan_member_name"},{title:"房系名称",dataIndex:"name",key:"name"},{title:"世系",key:"generation",dataIndex:"generation"},{title:"操作",width:"100px",key:"action",scopedSlots:{customRender:"action"}}],showEditFenFangModal:!1,editFenFangData:null}},props:{nodeInfo:{type:Object,default:function(){}},tag:{type:Number,default:Dt.分房}},watch:{tag:{handler:function(e){this.selectedType=e},immediate:!0,deep:!0},nodeInfo:{handler:function(e){this.setStr=e.branch_name},immediate:!0,deep:!0}},computed:(0,d.A)({},(0,h.aH)({pedigreeList:function(e){return e.px.list},currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),mounted:function(){this.GetListData()},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["GetTagTypeList","SaveMemberBranch","DeletedBranch","RefreshPedigreeMemberList"])),{},{getExample:function(){switch(this.selectedType){case Dt.分房:return"长房";case Dt.分屋:return"长屋";case Dt.分支:return"一支";case Dt.分派:return"一派";default:return""}},getInputPlaceholder:function(e){switch(this.selectedType){case Dt.分房:return"请输入房系".concat(e?"描述":"名称");case Dt.分屋:return"请输入屋系".concat(e?"描述":"名称");case Dt.分支:return"请输入支系".concat(e?"描述":"名称");case Dt.分派:return"请输入派系".concat(e?"描述":"名称");default:return""}},handleTabChange:function(e){switch(this.selectedType=e,e){case Dt.分房:this.columns[1].title="房系名称";break;case Dt.分屋:this.columns[1].title="屋系名称";break;case Dt.分支:this.columns[1].title="支系名称";break;case Dt.分派:this.columns[1].title="派系名称";break}this.GetListData()},handleChangeGeneration:function(e){this.generation=e},handleOk:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n,r,l,d,c,o,h,u;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return a=e.SaveMemberBranch,i=e.RefreshPedigreeMemberList,n=e.selectedType,r=e.setStr,l=e.nodeInfo,d=e.description,c=e.pedigreeList,o="",c&&c.length>0&&(o=c[0].name),h={clan_id:e.currentSelectedClanId,pedigree_id:e.currentSelectedPedigreeId,branch_id:0,branch_tag:n,name:r,clan_member_id:l.id,clan_member_name:l.name,description:d,ancestor:o},e.confirmLoading=!0,t.n=1,a(h);case 1:if(u=t.v,e.confirmLoading=!1,200!==u.code){t.n=6;break}return e.$message.success("操作成功"),e.$emit("close"),t.p=2,t.n=3,i();case 3:t.n=5;break;case 4:t.p=4,t.v,e.$message.warning("操作成功，但刷新数据失败，请手动刷新页面");case 5:t.n=7;break;case 6:e.$message.error(u.message||"操作失败");case 7:return t.a(2)}},t,null,[[2,4]])}))()},handleCancel:function(){this.$emit("close")},GetListData:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return a=e.GetTagTypeList,i={clan_id:e.currentSelectedClanId,pedigree_id:e.currentSelectedPedigreeId,tag_type:e.selectedType},e.loading=!0,t.n=1,a(i);case 1:n=t.v,e.loading=!1,200===n.code&&(e.list=n.data.list||[]);case 2:return t.a(2)}},t)}))()},handlePageChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return t.pagination=e,a.n=1,t.GetListData();case 1:return a.a(2)}},a)}))()},handleSearchTextChange:function(e){this.searchText=e.target.value.trim()},onSearch:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.GetListData();case 1:return t.a(2)}},t)}))()},handleChange:function(e){this.selectedId=e.id,this.selectedName=e.full_name},handleRefresh:function(){this.showEditFenFangModal=!1,this.GetListData()},handleUpdate:function(e){this.showEditFenFangModal=!0,this.editFenFangData=e},handleDelete:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n,r;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:i=t.DeletedBranch,n=t,r={clan_id:t.currentSelectedClanId,pedigree_id:n.currentSelectedPedigreeId,branch_id:e.id},t.$confirm({title:"",content:"确定删除「".concat(e.name,"」吗？"),okText:"确定",cancelText:"取消",onOk:function(){var e=(0,l.A)((0,s.A)().m(function e(){var t;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:return e.n=1,i(r);case 1:t=e.v,200===t.code?(n.$message.success("删除成功"),n.handleRefresh()):n.$message.error(t.message||"删除失败");case 2:return e.a(2)}},e)}));function t(){return e.apply(this,arguments)}return t}()});case 1:return a.a(2)}},a)}))()}})},At=Tt,It=(0,b.A)(At,xt,gt,!1,null,"70a5070a",null),Pt=It.exports,Nt=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:e.title,visible:e.visible,width:900,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",[e._v("设庄功能暂未实现")])])},Lt=[],Mt={name:"ShezhuangModal",data:function(){return{title:"设庄1",visible:!0,confirmLoading:!1}},props:{selectedNode:{type:Object,default:function(){}}},watch:{selectedNode:{handler:function(e){this.title="设庄: ".concat(e.name)},immediate:!0,deep:!0}},methods:{handleOk:function(){var e=this;this.confirmLoading=!0,setTimeout(function(){e.confirmLoading=!1,e.visible=!1},1e3)},handleCancel:function(){this.$emit("close")},getShowName:function(){var e=this.nodeInfo;return e.name},getParent:function(e){var t=this.nodeInfo;return t.parent},handleTabChange:function(e){var t=this.nodeInfo;switch(e){case"first_name":case"name":case"real_name":case"sex":t[e]=this.nodeInfo[e]}}}},$t=Mt,Ft=(0,b.A)($t,Nt,Lt,!1,null,"64b46c40",null),Gt=Ft.exports,Ot=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"设置标记",visible:e.visible,width:500,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("a-form",{ref:"form",attrs:{form:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol}},[t("a-form-item",{attrs:{label:"标记类型",prop:"remark_type"}},[t("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark_type",{rules:[{required:!1}]}],expression:"['remark_type', { rules: [{ required: false }] }]"}]},[t("a-select-option",{attrs:{value:"默认"}},[e._v("默认")]),t("a-select-option",{attrs:{value:"待完善"}},[e._v("待完善")]),t("a-select-option",{attrs:{value:"待确认"}},[e._v("待确认")]),t("a-select-option",{attrs:{value:"待纠正"}},[e._v("待纠正")]),t("a-select-option",{attrs:{value:"重要"}},[e._v("重要")])],1)],1),t("a-form-item",{attrs:{label:"设置对象",prop:"name"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!1}]}],expression:"['name', { rules: [{ required: false }] }]"}],attrs:{disabled:"",placeholder:""}})],1),t("a-form-item",{attrs:{label:"备注",prop:"remark"}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{placeholder:"请输入",maxLength:30}})],1)],1)],1)},Bt=[],Vt={name:"BiaoJiModal",data:function(){return{visible:!0,confirmLoading:!1,form:this.$form.createForm(this),labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},item:{},tagType:{},currentData:{},selectedType:0}},props:{selectedNode:{type:Object,default:function(){}}},watch:{selectedNode:{handler:function(e){this.form.getFieldDecorator("remark_type",{initialValue:"默认"}),this.form.getFieldDecorator("name",{initialValue:e.name})},immediate:!0,deep:!0}},methods:{handleOk:function(){var e=this;this.form.validateFields(function(){var t=(0,l.A)((0,s.A)().m(function t(a,i){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:a||(e.$message.info("该功能暂未实现"),e.$emit("close"));case 1:return t.a(2)}},t)}));return function(e,a){return t.apply(this,arguments)}}())},handleCancel:function(){this.$emit("close")}}},jt=Vt,Rt=(0,b.A)(jt,Ot,Bt,!1,null,"2ee36e79",null),Et=Rt.exports,zt=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"节点统计",visible:e.visible,width:700,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",{staticClass:"node"},[e._v("【该功能暂未实现，以下都为假数据】")]),t("div",[e._v(" 世数区间："),t("a-input",{staticStyle:{width:"50px"},attrs:{placeholder:"可选",size:"small"}}),e._v("至"),t("a-input",{staticStyle:{width:"50px"},attrs:{placeholder:"可选",size:"small"}}),e._v(" 房派: "),t("a-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"}}),e._v(" 在世: "),t("a-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"}}),t("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small"}},[e._v("统计")])],1),t("div",{staticClass:"flex"},[t("div",{staticClass:"item"},[t("div",[e._v("总人数")]),t("div",[e._v("253")])]),t("div",{staticClass:"item"},[t("div",[e._v("出嫁女丁及后代")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("男性人数")]),t("div",[e._v("253")])]),t("div",{staticClass:"item"},[t("div",[e._v("出祧男丁及后代")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("女性人数")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("兼祧男丁及后代")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("男族丁数")]),t("div",[e._v("253")])]),t("div",{staticClass:"item"},[t("div",[e._v("出嗣男丁及后代")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("女族丁数")]),t("div",[e._v("0")])]),t("div",{staticClass:"item"},[t("div",[e._v("承嗣男丁及后代")]),t("div",[e._v("0")])])])])},Ht=[],Wt={name:"TongjiModal",data:function(){return{visible:!0}},methods:{handleOk:function(){this.$emit("close")},handleCancel:function(){this.$emit("close")}}},Yt=Wt,qt=(0,b.A)(Yt,zt,Ht,!1,null,"db23430a",null),Kt=qt.exports,Zt=function(){var e=this,t=e._self._c;return t("a-modal",{attrs:{title:"自造字列表（点击即可复制文字）",visible:e.visible,width:800,confirmLoading:e.confirmLoading,okText:"保存",cancelText:"取消"},on:{ok:e.handleOk,cancel:e.handleCancel}},[t("div",[e._v("造字功能暂未实现")])])},Xt=[],Ut={name:"ZaoZiModal",data:function(){return{visible:!0,confirmLoading:!1}},methods:{handleOk:function(){var e=this;this.confirmLoading=!0,setTimeout(function(){return e.$emit("close")},1e3)},handleCancel:function(){this.$emit("close")}}},Jt=Ut,Qt=(0,b.A)(Jt,Zt,Xt,!1,null,"7be4f739",null),ea=Qt.exports,ta=function(){var e=this,t=e._self._c;return t("a-modal",{staticClass:"add-binding-modal-wrap",attrs:{width:"420px",title:"绑定用户"},on:{ok:e.handleOk,cancel:function(t){return e.$emit("close")}},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[t("a-form",{attrs:{form:e.form,layout:"vertical"},on:{submit:e.handleSubmit}},[t("a-form-item",{attrs:{label:"请输入对方的谱号(请在百家有谱手机版'我的'里查看)"}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入对方的谱号"}]}],expression:"['name', { rules: [{ required: true, message: '请输入对方的谱号' }] }]"}],attrs:{placeholder:"请输入",maxLength:30}})],1),t("a-form-item",{attrs:{"wrapper-col":{span:12,offset:8}}},[t("a-button",{staticClass:"mr10",attrs:{type:"default"},on:{click:function(t){return e.$emit("close")}}},[e._v("取消")]),t("a-button",{attrs:{type:"primary","html-type":"submit",loading:e.loading}},[e._v("确定")])],1)],1)],1)},aa=[],ia={name:"BindModal",data:function(){return{visible:!0,loading:!1,form:this.$form.createForm(this)}},props:{},methods:{handleOk:function(){},handleSubmit:function(e){var t=this;e.preventDefault();var a=this;this.form.validateFields(function(){var e=(0,l.A)((0,s.A)().m(function e(i,n){var r,l,d,c;return(0,s.A)().w(function(e){while(1)switch(e.n){case 0:i||(r=(0,nt._)(n.name),l=r.firstName,d=r.name,c=r.fullName,{clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,generation:1,first_name:l,name:d,full_name:c,ranking:1,ranking_text:"始祖",relation:"生",sex:"男"},t.loading=!0,t.$message.info("该功能暂未实现"),t.loading=!1,a.$emit("close"));case 1:return e.a(2)}},e)}));return function(t,a){return e.apply(this,arguments)}}())}}},na=ia,sa=(0,b.A)(na,ta,aa,!1,null,"7b111744",null),ra=sa.exports,la=function(){var e=this,t=e._self._c;return t("div",[e.wifeList.length>0?t("div",{staticClass:"children-info"},[t("span",{staticClass:"line"}),e._v("配偶信息("+e._s(e.wifeList.length)+") ")]):e._e(),e.wifeList.length>0?t("div",{staticClass:"children-list-wrap"},e._l(e.wifeList,function(a){return t("div",{key:a.id,staticClass:"child-item"},[t("div",{staticClass:"slt"},[t("a-select",{staticStyle:{width:"50px"},attrs:{size:"small",dropdownMatchSelectWidth:!1},on:{change:function(t){return e.handleWifeRelationChange(a)}},model:{value:a.relation,callback:function(t){e.$set(a,"relation",t)},expression:"wife.relation"}},e._l(e.wifeOptionList,function(a){return t("a-select-option",{key:a},[e._v(e._s(a))])}),1)],1),t("div",{staticClass:"name"},[e._v(e._s(a.name))])])}),0):e._e(),e.childrenList.length>0?t("div",{staticClass:"children-info"},[t("span",{staticClass:"line"}),e._v("子女信息("+e._s(e.childrenList.length)+") ")]):e._e(),e.childrenList.length>0?t("div",{staticClass:"children-list-wrap"},e._l(e.childrenList,function(a){return t("div",{key:a.id,staticClass:"child-item"},[t("div",{staticClass:"slt"},[t("a-select",{staticStyle:{width:"50px"},attrs:{size:"small",dropdownMatchSelectWidth:!1},on:{change:function(t){return e.handleChildRankingChange(a)}},model:{value:a.ranking,callback:function(t){e.$set(a,"ranking",t)},expression:"child.ranking"}},[e._l(e.childrenOptionList,function(i){return t("a-select-option",{key:i,attrs:{value:i}},[e._v(e._s(e.showName(i,a.sex)))])}),t("a-select-option",{attrs:{value:"女"===a.sex?"之女":"之子"}},[e._v(e._s("女"===a.sex?"之女":"之子"))])],2)],1),t("div",{staticClass:"name"},[e._v(e._s(a.name))])])}),0):e._e()])},da=[],ca=a(24377),oa=["娶","续娶","再娶","又娶","妣","续妣","再妣","又妣","妻","适","嫁","正室","配","原配","前配","继配","宠","妾","续","又","离异","入赘","招赘","招婿","招配","招夫","孀赘","三娶","四娶","五娶","六娶","三妣","四妣","五妣","六妣"],ha={name:"WifeChildrenInfo",data:function(){return{wifeList:[],childrenList:[],childrenOptionList:Array(20).fill(0).map(function(e,t){return t+1}),wifeOptionList:oa}},props:{selectedNode:{type:Object,default:function(){}}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),watch:{selectedNode:{handler:function(e){e&&(this.childrenList=[],this.wifeList=[],e.children&&(this.childrenList=et()(e.children)),e.wife&&(this.wifeList=et()(e.wife)))},immediate:!0,deep:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["SaveMemberInfo"])),{},{showName:function(e,t){return(0,ca.g)(e,t)},handleMove:function(e,t,a,i){i||this.$message.info("该功能暂未实现")},handleWifeRelationChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(e.id){a.n=1;break}return t.$message.error("配偶信息不完整"),a.a(2);case 1:return i={clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,id:e.id,relation:e.relation},a.p=2,a.n=3,t.SaveMemberInfo(i);case 3:n=a.v,200===n.code?(t.$message.success("配偶关系修改成功"),t.$emit("refresh")):t.$message.error(n.message||"配偶关系修改失败"),a.n=5;break;case 4:a.p=4,a.v,t.$message.error("配偶关系修改失败");case 5:return a.a(2)}},a,null,[[2,4]])}))()},handleChildRankingChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n,r;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(e.id){a.n=1;break}return t.$message.error("子女信息不完整"),a.a(2);case 1:return i="",i=e.ranking===("女"===e.sex?"之女":"之子")?e.ranking:(0,ca.g)(e.ranking,e.sex),n={clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,id:e.id,ranking:e.ranking,ranking_text:i},a.p=2,a.n=3,t.SaveMemberInfo(n);case 3:r=a.v,200===r.code?(t.$message.success("子女排行修改成功"),t.$emit("refresh")):t.$message.error(r.message||"子女排行修改失败"),a.n=5;break;case 4:a.p=4,a.v,t.$message.error("子女排行修改失败");case 5:return a.a(2)}},a,null,[[2,4]])}))()}})},ua=ha,fa=(0,b.A)(ua,la,da,!1,null,"219bc915",null),va=fa.exports,pa=function(){var e,t,a,i,n,s,r,l=this,d=l._self._c;return d("div",{directives:[{name:"show",rawName:"v-show",value:l.showBase,expression:"showBase"}],staticClass:"second-column"},[d("div",{staticClass:"base-header"},[l._v(" "+l._s(null!==(e=l.activeNodeInfo)&&void 0!==e&&e.husband_id?"配偶信息":"基本信息")+" "),d("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzhedie1 c-pointer-hover",on:{click:l.handleShowBaseMore}})]),d("div",{staticClass:"base-content-wrapper"},[d("a-spin",{attrs:{spinning:l.loadingDetail}},[d("div",{staticClass:"base-content"},[d("div",{staticClass:"photo"},[d("div",{staticClass:"default"}),d("div",{staticClass:"close"},[d("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbaricon-mianxing_fuzhi_guanbi"})]),d("div",{staticClass:"tips"},[l._v("点击更换")])]),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("姓氏")]),d("a-input",{on:{blur:function(e){return l.handleSaveMemberInfo("first_name")}},model:{value:l.firstName,callback:function(e){l.firstName=e},expression:"firstName"}})],1),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("名字")]),d("a-input",{on:{blur:function(e){return l.handleSaveMemberInfo("name")}},model:{value:l.name,callback:function(e){l.name=e},expression:"name"}})],1),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("常用名")]),d("a-input",{on:{blur:function(e){return l.handleSaveMemberInfo("real_name")}},model:{value:l.realName,callback:function(e){l.realName=e},expression:"realName"}})],1),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("性别")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},attrs:{disabled:!(null===(t=l.activeNodeInfo)||void 0===t||!t.husband_id)},on:{change:function(e){return l.handleSaveMemberInfo("sex")}},model:{value:l.sex,callback:function(e){l.sex=e},expression:"sex"}},[d("a-select-option",{attrs:{value:"男"}},[l._v("男")]),d("a-select-option",{attrs:{value:"女"}},[l._v("女")])],1)],1),null!==(a=l.activeNodeInfo)&&void 0!==a&&a.husband_id?l._e():d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("父母")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},on:{change:function(e){return l.handleSaveMemberInfo("father_id")}},model:{value:l.fatherId,callback:function(e){l.fatherId=e},expression:"fatherId"}},l._l(l.getParentsList,function(e){return d("a-select-option",{key:e.id,attrs:{value:e.id}},[l._v(l._s(e.name))])}),1)],1),null!==(i=l.activeNodeInfo)&&void 0!==i&&i.husband_id?d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("配偶关系")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},on:{change:function(e){return l.handleSaveMemberInfo("relation")}},model:{value:l.wifeRelation,callback:function(e){l.wifeRelation=e},expression:"wifeRelation"}},l._l(l.wifeConstantList,function(e){return d("a-select-option",{key:e,attrs:{value:e}},[l._v(" "+l._s(e)+" ")])}),1)],1):l._e(),null!==(n=l.activeNodeInfo)&&void 0!==n&&n.husband_id?d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("父亲")]),d("a-input",{staticStyle:{width:"190px"},attrs:{placeholder:"请输入父亲姓名"},on:{blur:function(e){return l.handleSaveMemberInfo("father_name")},pressEnter:function(e){return l.handleSaveMemberInfo("father_name")}},model:{value:l.fatherName,callback:function(e){l.fatherName=e},expression:"fatherName"}})],1):l._e(),null!==(s=l.activeNodeInfo)&&void 0!==s&&s.husband_id?l._e():d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("排行")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},on:{change:function(e){return l.handleSaveMemberInfo("rankingText")}},model:{value:l.rankingText,callback:function(e){l.rankingText=e},expression:"rankingText"}},["始祖"===l.largeRankingText?d("a-select-option",{attrs:{value:"始祖"}},[l._v("始祖")]):l._e(),l._l(l.rankingOptionsList,function(e){return d("a-select-option",{key:e,attrs:{value:l.getRankingText(e)}},[l._v(l._s(l.getRankingText(e,l.sex)))])}),d("a-select-option",{attrs:{value:"女"===l.sex?"之女":"之子"}},[l._v(l._s("女"===l.sex?"之女":"之子"))])],2)],1),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("生于")]),d("DatePicker",{on:{change:l.onDateChange}},[d("a-input",{attrs:{readonly:"",placeholder:"请输入"},model:{value:l.birthday,callback:function(e){l.birthday=e},expression:"birthday"}})],1)],1),d("div",{staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("状态")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},on:{change:function(e){return l.handleSaveMemberInfo("living_status")}},model:{value:l.livingStatus,callback:function(e){l.livingStatus=e},expression:"livingStatus"}},[d("a-select-option",{attrs:{value:1}},[l._v("在世")]),d("a-select-option",{attrs:{value:2}},[l._v("去世")])],1)],1),d("div",{directives:[{name:"show",rawName:"v-show",value:2===l.livingStatus,expression:"livingStatus === 2"}],staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("卒于")]),d("a-input",{attrs:{placeholder:"请输入"},on:{blur:function(e){return l.handleSaveMemberInfo("death_time")}},model:{value:l.deathTime,callback:function(e){l.deathTime=e},expression:"deathTime"}})],1),d("div",{directives:[{name:"show",rawName:"v-show",value:2===l.livingStatus,expression:"livingStatus === 2"}],staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("享年")]),d("a-select",{staticClass:"select-no-border",staticStyle:{width:"190px"},on:{change:function(e){return l.handleSaveMemberInfo("age_at_death")}},model:{value:l.ageAtDeath,callback:function(e){l.ageAtDeath=e},expression:"ageAtDeath"}},l._l(l.ageOptionList,function(e){return d("a-select-option",{key:e,attrs:{value:e}},[l._v(l._s(e))])}),1)],1),d("div",{directives:[{name:"show",rawName:"v-show",value:2===l.livingStatus,expression:"livingStatus === 2"}],staticClass:"flex flex-direction-row align-center form-item"},[d("div",{staticClass:"title"},[l._v("葬地")]),d("a-input",{on:{blur:function(e){return l.handleSaveMemberInfo("cemetery_address")}},model:{value:l.cemeteryAddress,callback:function(e){l.cemeteryAddress=e},expression:"cemeteryAddress"}})],1),!l.selectedNode||!l.selectedNode.is_main||null!==(r=l.activeNodeInfo)&&void 0!==r&&r.husband_id?l._e():d("wife-children-info",{attrs:{selectedNode:l.selectedNode},on:{refresh:l.handleRefreshDetail}})],1)])],1)])},ma=[],xa=(a(88116),a(55894),a(22282),a(54011),function(){var e=this,t=e._self._c;return t("div",{staticClass:"date-picker-wrapper"},[t("a-popover",{attrs:{visible:e.visible,placement:"topLeft",trigger:"manual",getPopupContainer:e.getPopupContainer,overlayClassName:"date-picker-popover"}},[t("template",{slot:"content"},[t("div",{staticClass:"date-picker-container",style:"custom"===e.activeTab?"height: auto;":null,on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"header"},[t("div",{staticClass:"tabs"},[t("a-tabs",{attrs:{size:"small"},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[t("a-tab-pane",{key:"solar",attrs:{tab:"公历"}}),t("a-tab-pane",{key:"lunar",attrs:{tab:"农历"}}),t("a-tab-pane",{key:"era",attrs:{tab:"年号"}}),t("a-tab-pane",{key:"custom",attrs:{tab:"自定义"}})],1)],1),t("div",{staticClass:"close",on:{click:e.closePicker}},[t("a-icon",{attrs:{type:"close"}})],1)]),t("div",{staticClass:"operate"},[t("div",{staticClass:"tools"},["solar"===e.activeTab||"lunar"===e.activeTab?t("div",{staticClass:"dropmenu",on:{click:function(e){e.stopPropagation()}}},[t("a-select",{staticStyle:{width:"182px"},attrs:{size:"small",placeholder:"请选择世纪范围",getPopupContainer:e.getSelectPopupContainer},on:{change:e.onCenturyChange,dropdownVisibleChange:e.onSelectDropdownChange},model:{value:e.selectedCentury,callback:function(t){e.selectedCentury=t},expression:"selectedCentury"}},e._l(e.centuryList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.value)+" ")])}),1)],1):e._e(),"era"===e.activeTab?t("div",{staticClass:"era-selects",on:{click:function(e){e.stopPropagation()}}},[t("div",{staticClass:"row"},[t("a-select",{staticStyle:{width:"120px","margin-right":"8px"},attrs:{size:"small",placeholder:"选择朝代",getPopupContainer:e.getSelectPopupContainer},on:{change:e.onDynastyChange,dropdownVisibleChange:e.onSelectDropdownChange},model:{value:e.selectedDynasty,callback:function(t){e.selectedDynasty=t},expression:"selectedDynasty"}},e._l(e.dynastyList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(" "+e._s(a.name)+" ")])}),1),t("a-select",{staticStyle:{width:"120px"},attrs:{size:"small",placeholder:"选择年号",getPopupContainer:e.getSelectPopupContainer},on:{change:e.onEraNameChange,dropdownVisibleChange:e.onSelectDropdownChange},model:{value:e.selectedEraName,callback:function(t){e.selectedEraName=t},expression:"selectedEraName"}},e._l(e.currentEraList,function(a){return t("a-select-option",{key:a.name,attrs:{value:a.name}},[e._v(" "+e._s(a.name)+" ")])}),1)],1),t("div",{staticClass:"row"},[t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{attrs:{disabled:e.disableDynasty},model:{value:e.showDynasty,callback:function(t){e.showDynasty=t},expression:"showDynasty"}},[e._v("朝代")])],1),t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{model:{value:e.showGangZi,callback:function(t){e.showGangZi=t},expression:"showGangZi"}},[e._v("干支")])],1),t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{attrs:{disabled:e.disableGregorian},model:{value:e.showGregorian,callback:function(t){e.showGregorian=t},expression:"showGregorian"}},[e._v("公元")])],1),t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{model:{value:e.showNumber,callback:function(t){e.showNumber=t},expression:"showNumber"}},[e._v("数字年")])],1)])]):e._e(),"solar"===e.activeTab||"lunar"===e.activeTab?t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{model:{value:e.showGregorian,callback:function(t){e.showGregorian=t},expression:"showGregorian"}},[e._v("公元")])],1):e._e(),"lunar"===e.activeTab?t("div",{staticClass:"format",on:{click:function(e){e.stopPropagation()}}},[t("a-checkbox",{model:{value:e.showGangZi,callback:function(t){e.showGangZi=t},expression:"showGangZi"}},[e._v("干支")])],1):e._e(),"custom"===e.activeTab?t("div",{staticClass:"custom-input"},[t("div",{staticClass:"custom-input-row"},[t("a-input",{staticClass:"custom-input-field",attrs:{placeholder:"请输入自定义日期"},on:{pressEnter:e.savePicker},model:{value:e.customValue,callback:function(t){e.customValue=t},expression:"customValue"}})],1)]):e._e()]),t("a-button",{staticClass:"save",attrs:{type:"primary"},on:{click:e.savePicker}},[e._v("保存")])],1),"solar"===e.activeTab||"lunar"===e.activeTab||"era"===e.activeTab?t("div",{staticClass:"picker"},[t("div",{staticClass:"date-selector"},[t("div",{staticClass:"picker-header"},[t("div",{staticClass:"header-item long",class:{active:"year"===e.currentView},on:{click:e.goToYearView}},[t("div",{staticClass:"text"},[e._v(e._s(e.yearDisplay))])]),t("span",{staticClass:"header-item",class:{active:"month"===e.currentView},on:{click:e.goToMonthView}},[t("div",{staticClass:"text"},[e._v(e._s(e.monthDisplay))])]),t("span",{staticClass:"header-item",class:{active:"day"===e.currentView},on:{click:e.goToDayView}},[t("div",{staticClass:"text"},[e._v(e._s(e.dayDisplay))])]),t("span",{staticClass:"header-item",class:{active:"time"===e.currentView},on:{click:e.goToTimeView}},[t("div",{staticClass:"text"},[e._v(e._s(e.timeDisplay))])])]),"year"===e.currentView?t("div",{staticClass:"picker-view",style:"era"===e.activeTab?"grid-template-columns: repeat(2, 1fr);  max-height: 160px;":null},[e.yearListLoading?t("div",{staticClass:"loading-container"},[t("a-spin",{attrs:{size:"large"}}),t("div",{staticClass:"loading-text"},[e._v("加载中...")])],1):e._l(e.yearList,function(a){var i;return t("div",{key:a.year,class:["item",{active:(null===(i=e.selectedYear)||void 0===i?void 0:i.year)===a.year}],on:{click:function(t){return e.selectYear(a)}}},[e._v(" "+e._s(null===a.text?"-":a.text)+" ")])})],2):e._e(),"month"===e.currentView?t("div",{staticClass:"picker-view"},[e.monthListLoading?t("div",{staticClass:"loading-container"},[t("a-spin",{attrs:{size:"large"}}),t("div",{staticClass:"loading-text"},[e._v("加载中...")])],1):e._l(e.monthDataList,function(a){var i;return t("div",{key:a.value,class:["item",{active:(null===(i=e.selectedMonth)||void 0===i?void 0:i.value)===a.value}],on:{click:function(t){return e.selectMonth(a)}}},[e._v(" "+e._s(null===a.name?"-":a.name)+" ")])})],2):e._e(),"day"===e.currentView?t("div",{staticClass:"picker-view",style:"era"===e.activeTab?"grid-template-columns: repeat(2, 1fr);  max-height: 160px;":null},[e.dayListLoading?t("div",{staticClass:"loading-container"},[t("a-spin",{attrs:{size:"large"}}),t("div",{staticClass:"loading-text"},[e._v("加载中...")])],1):e._l(e.currentDayList,function(a){var i;return t("div",{key:a.value,class:["item",{active:(null===(i=e.selectedDay)||void 0===i?void 0:i.value)===a.value}],on:{click:function(t){return e.selectDay(a)}}},[e._v(" "+e._s(null===a.name?"-":a.name)+" ")])})],2):e._e(),"time"===e.currentView?t("div",{staticClass:"picker-view"},[t("div",{staticClass:"item",on:{click:function(t){return e.selectTimeHour(null)}}},[e._v(" - ")]),e._l(e.timeHours,function(a){var i;return t("div",{key:a.value,class:["item",{active:(null===(i=e.selectedTimeHour)||void 0===i?void 0:i.value)===a.value}],on:{click:function(t){return e.selectTimeHour(a)}}},[t("div",{staticClass:"name"},[e._v(e._s(a.name))]),t("div",{staticClass:"tips"},[e._v(e._s(a.tips))])])})],2):e._e()])]):e._e()])]),t("div",{staticClass:"trigger-wrapper",on:{click:e.showPicker}},[e._t("default",function(){return[t("a-button",[e._v("选择日期")])]})],2)],2)],1)}),ga=[],Ca=a(48860);a(6413),a(65429),a(18433),a(22098),a(4982),a(24897),a(22432);var ya=[{name:"子时",tips:"23:00-00:59",value:"zi"},{name:"丑时",tips:"01:00-02:59",value:"chou"},{name:"寅时",tips:"03:00-04:59",value:"yin"},{name:"卯时",tips:"05:00-06:59",value:"mao"},{name:"辰时",tips:"07:00-08:59",value:"chen"},{name:"巳时",tips:"09:00-10:59",value:"si"},{name:"午时",tips:"11:00-12:59",value:"wu"},{name:"未时",tips:"13:00-14:59",value:"wei"},{name:"申时",tips:"15:00-16:59",value:"shen"},{name:"酉时",tips:"17:00-18:59",value:"you"},{name:"戌时",tips:"19:00-20:59",value:"xu"},{name:"亥时",tips:"21:00-22:59",value:"hai"}],_a={0:"〇",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六",7:"七",8:"八",9:"九"},ba=[{id:"2000-2025",value:"21世纪上叶 2000-2025"},{id:"1950-1999",value:"20世纪下叶 1950-1999"},{id:"1900-1949",value:"20世纪上叶 1900-1949"},{id:"1850-1899",value:"19世纪下叶 1850-1899"},{id:"1800-1849",value:"19世纪上叶 1800-1849"},{id:"1750-1799",value:"18世纪下叶 1750-1799"},{id:"1700-1749",value:"18世纪上叶 1700-1749"},{id:"1650-1699",value:"17世纪下叶 1650-1699"},{id:"1600-1649",value:"17世纪上叶 1600-1649"},{id:"1550-1599",value:"16世纪下叶 1550-1599"},{id:"1500-1549",value:"16世纪上叶 1500-1549"},{id:"1450-1499",value:"15世纪下叶 1450-1499"},{id:"1400-1449",value:"15世纪上叶 1400-1449"},{id:"1350-1399",value:"14世纪下叶 1350-1399"},{id:"1300-1349",value:"14世纪上叶 1300-1349"},{id:"1250-1299",value:"13世纪下叶 1250-1299"},{id:"1200-1249",value:"13世纪上叶 1200-1249"},{id:"1150-1199",value:"12世纪下叶 1150-1199"},{id:"1100-1149",value:"12世纪上叶 1100-1149"},{id:"1050-1099",value:"11世纪下叶 1050-1099"},{id:"1000-1049",value:"11世纪上叶 1000-1049"},{id:"950-999",value:"10世纪下叶 950-999"},{id:"900-949",value:"10世纪上叶 900-949"},{id:"850-899",value:"9世纪下叶 850-899"},{id:"800-849",value:"9世纪上叶 800-849"},{id:"750-799",value:"8世纪下叶 750-799"},{id:"700-749",value:"8世纪上叶 700-749"},{id:"650-699",value:"7世纪下叶 650-699"},{id:"600-649",value:"7世纪上叶 600-649"},{id:"550-599",value:"6世纪下叶 550-599"},{id:"500-549",value:"6世纪上叶 500-549"},{id:"450-499",value:"5世纪下叶 450-499"},{id:"400-449",value:"5世纪上叶 400-449"},{id:"350-399",value:"4世纪下叶 350-399"},{id:"300-349",value:"4世纪上叶 300-349"},{id:"250-299",value:"3世纪下叶 250-299"},{id:"200-249",value:"3世纪上叶 200-249"},{id:"150-199",value:"2世纪下叶 150-199"},{id:"100-149",value:"2世纪上叶 100-149"},{id:"50-99",value:"1世纪下叶 50-99"},{id:"1-49",value:"1世纪上叶 1-49"}],wa=a(94354),ka={name:"DatePicker",data:function(){return{visible:!1,selectDropdownVisible:!1,activeTab:"solar",selectedCentury:"2000-2025",selectedDynasty:null,selectedEraName:null,showDynasty:!1,showGregorian:!1,showGangZi:!1,showNumber:!1,customValue:"",selectedYear:null,selectedMonth:null,selectedDay:null,selectedTimeHour:null,currentView:"year",centuryList:ba,dynastyList:[],eraList:[],yearList:[],monthDataList:[],timeHours:ya,yearListLoading:!1,eraListLoading:!1,monthListLoading:!1,dayListLoading:!1}},computed:{disableDynasty:function(){return"公元"===this.selectedDynasty||"民国"===this.selectedDynasty},disableGregorian:function(){return"公元"!==this.selectedDynasty&&"民国"!==this.selectedDynasty},yearDisplay:function(){var e,t,a;switch(this.activeTab){case"solar":return null!==(e=this.selectedYear)&&void 0!==e&&e.text?"".concat(this.showGregorian?"公元":"").concat(this.selectedYear.year,"年"):"-";case"lunar":return null!==(t=this.selectedYear)&&void 0!==t&&t.text?"".concat(this.showGregorian?"公元":"").concat(this.convertToChineseNumber(this.selectedYear.year),"年").concat(this.showGangZi?this.selectedYear.cycle_name:""):"-";case"era":return null!==(a=this.selectedYear)&&void 0!==a&&a.text?"".concat(this.showGregorian?"公元":"").concat(this.showDynasty?this.selectedYear.dynasty:"").concat(this.selectedYear.name).concat(this.showNumber?"(".concat(this.selectedYear.year,")"):"").concat(this.showGangZi?this.selectedYear.cycle_name:""):"-";default:return"-"}},monthDisplay:function(){var e,t;return null!==(e=this.selectedMonth)&&void 0!==e&&e.name&&(null===(t=this.selectedMonth)||void 0===t?void 0:t.name)||"-"},dayDisplay:function(){var e,t;return null!==(e=this.selectedDay)&&void 0!==e&&e.name&&(null===(t=this.selectedDay)||void 0===t?void 0:t.name)||"-"},timeDisplay:function(){var e,t;return null!==(e=this.selectedTimeHour)&&void 0!==e&&e.name&&(null===(t=this.selectedTimeHour)||void 0===t?void 0:t.name)||"-"},currentEraList:function(){var e=this,t=this.dynastyList.find(function(t){return t.id===e.selectedDynasty})||{};return this.selectedDynasty&&t.monarchList||[]},currentDayList:function(){var e=this,t=this.monthDataList.find(function(t){return t.value===e.selectedMonth.value})||{};return[{name:null,value:0}].concat((0,r.A)(null===t||void 0===t?void 0:t.day_list))||[]}},methods:{showPicker:function(){this.visible=!this.visible,this.visible&&(this.currentView="year")},closePicker:function(){this.visible=!1},savePicker:function(){var e=null;e="custom"===this.activeTab?this.customValue:"".concat(this.yearDisplay).concat(this.monthDisplay).concat(this.dayDisplay).concat(this.timeDisplay),this.$emit("input",e),this.$emit("change",e),this.visible=!1},onCenturyChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(t.selectedCentury=e,t.selectedYear=null,t.selectedMonth=null,t.selectedDay=null,t.selectedTimeHour=null,!e){a.n=2;break}return a.n=1,t.loadYearList();case 1:a.n=3;break;case 2:t.yearList=[];case 3:return a.a(2)}},a)}))()},onDynastyChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(["公元","民国"].includes(e)?t.showDynasty=!1:t.showGregorian=!1,t.selectedDynasty=e,n=t.dynastyList.find(function(e){return e.id===t.selectedDynasty})||{},t.selectedEraName=(null===n||void 0===n||null===(i=n.monarchList)||void 0===i?void 0:i[0].name)||"","era"!==t.activeTab){a.n=1;break}return a.n=1,t.loadYearList();case 1:return a.a(2)}},a)}))()},onEraNameChange:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(t.selectedEraName=e,"era"!==t.activeTab){a.n=1;break}return a.n=1,t.loadYearList();case 1:return a.a(2)}},a)}))()},selectYear:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(t.selectedYear=e,null===e.text){a.n=1;break}return t.currentView="month",a.n=1,t.loadMonthData();case 1:return a.a(2)}},a)}))()},selectMonth:function(e){this.selectedMonth=e,null!==e.name&&(this.currentView="day")},selectDay:function(e){this.selectedDay=e,null!==e.name&&(this.currentView="time")},selectTimeHour:function(e){this.selectedTimeHour=e},getPopupContainer:function(){return document.body},getSelectPopupContainer:function(){return document.body},goToYearView:function(){this.currentView="year"},goToMonthView:function(){this.selectedYear.name&&(this.currentView="month")},goToDayView:function(){this.selectedMonth.name&&(this.currentView="day")},goToTimeView:function(){this.selectedDay.name&&(this.currentView="time")},resetSelection:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return e.selectedYear=null,e.selectedMonth=null,e.selectedDay=null,e.selectedTimeHour=null,e.currentView="year",t.n=1,e.loadYearList();case 1:return t.a(2)}},t)}))()},onSelectDropdownChange:function(e){this.selectDropdownVisible=e},handleClickOutside:function(e){if(this.visible&&!this.selectDropdownVisible){var t=this.$el.contains(e.target),a=e.target.closest(".ant-select-dropdown")||e.target.closest(".ant-select")||e.target.classList.contains("ant-select-selection")||e.target.classList.contains("ant-select-selection__rendered")||e.target.classList.contains("ant-select-selection__placeholder")||e.target.classList.contains("ant-select-arrow");t||a||(this.visible=!1)}},loadDynastyData:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return t.p=0,t.n=1,(0,wa.F8)();case 1:a=t.v,i=a.code,n=a.data,200===i&&n.list&&(e.dynastyList=n.list.map(function(e){return(0,d.A)((0,d.A)({},e),{},{id:e.name,monarchList:e.monarch_list})}),e.selectedDynasty=e.dynastyList[0].id,e.selectedEraName=e.dynastyList[0].monarchList[0].name),t.n=3;break;case 2:t.p=2,t.v;case 3:return t.a(2)}},t,null,[[0,2]])}))()},getYearFormat:function(e,t){switch(t){case"solar":return"".concat(e.year,"年");case"lunar":return"".concat(e.year,"(").concat(e.cycle_name,")");case"era":return"".concat(e.name).concat(e.cycle_name,"(").concat(e.year,")")}},loadYearList:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n,l,c,o,h,u,f,v,p,m,x;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(e.yearListLoading=!0,t.p=1,e.selectedCentury){t.n=2;break}return e.yearListLoading=!1,t.a(2);case 2:return a=e.selectedCentury.split("-").map(Number),i=(0,Ca.A)(a,2),n=i[0],l=i[1],c={startYear:n,endYear:l},"era"===e.activeTab&&(o=e.dynastyList.find(function(t){return t.name===e.selectedDynasty})||{},c.startYear=o.start||c.startYear,c.endYear=o.end||c.endYear,e.selectedDynasty&&(c.dynasty=e.selectedDynasty),e.selectedEraName&&(c.monarch=e.selectedEraName)),t.n=3,(0,wa.A2)(c);case 3:h=t.v,u=h.code,f=h.data,200===u&&f.list&&(v=[{text:null,year:0}],p=f.list.map(function(t){return(0,d.A)((0,d.A)({},t),{},{text:e.getYearFormat(t,e.activeTab)})}),m=new Set,p.forEach(function(e){m.add(e)}),x=Array.from(m).sort(function(e,t){return e.year-t.year}),v.push.apply(v,(0,r.A)(x)),e.yearList=v),t.n=5;break;case 4:t.p=4,t.v;case 5:return t.p=5,e.yearListLoading=!1,t.f(5);case 6:return t.a(2)}},t,null,[[1,4,5,6]])}))()},loadMonthData:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){var a,i,n,l;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(e.selectedYear&&null!==e.selectedYear){t.n=1;break}return t.a(2);case 1:return e.monthListLoading=!0,e.dayListLoading=!0,t.p=2,a={year:e.selectedYear.year||0,type:"solar"===e.activeTab?1:2},t.n=3,(0,wa.tD)(a);case 3:i=t.v,n=i.code,l=i.data,200===n&&l.list&&(e.monthDataList=[{value:0,name:null}].concat((0,r.A)(l.list)),l.list[0]&&l.list[0].dayList&&(e.dayDataList=l.list[0].dayList)),t.n=5;break;case 4:t.p=4,t.v,e.monthDataList=[],e.dayDataList=[];case 5:return t.p=5,e.monthListLoading=!1,e.dayListLoading=!1,t.f(5);case 6:return t.a(2)}},t,null,[[2,4,5,6]])}))()},convertToChineseNumber:function(e){return null===e||void 0===e?"-":e.toString().split("").map(function(e){return _a[parseInt(e)]||e}).join("")}},mounted:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return document.addEventListener("click",e.handleClickOutside),t.n=1,e.loadDynastyData();case 1:return t.n=2,e.loadYearList();case 2:return t.a(2)}},t)}))()},beforeDestroy:function(){document.removeEventListener("click",this.handleClickOutside)},watch:{activeTab:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:return t.n=1,e.resetSelection();case 1:return t.a(2)}},t)}))()}}},Sa=ka,Da=(0,b.A)(Sa,xa,ga,!1,null,"ba483fb4",null),Ta=Da.exports;Ta.install=function(e){e.component(Ta.name,Ta)};var Aa=Ta,Ia={name:"MemberBaseInfo",components:{WifeChildrenInfo:va,DatePicker:Aa},props:{showBase:{type:Boolean,default:!0},activeNodeInfo:{type:Object,default:function(){return{}}},selectedNode:{type:Object,default:function(){return{}}},selectedNodeId:{type:[String,Number],default:""},rawDetail:{type:Object,default:function(){return{}}},father:{type:Object,default:function(){return{}}},loadingDetail:{type:Boolean,default:!1}},data:function(){return{firstName:"",name:"",realName:"",sex:"",fatherName:"",fatherId:"",rankingText:"",livingStatus:1,birthday:"",deathTime:"",ageAtDeath:100,cemeteryAddress:"",wifeRelation:oa[0]||"娶",largeRankingText:"",rankingOptionsList:Array(20).fill(0).map(function(e,t){return t+1}),ageOptionList:Array(151).fill(0).map(function(e,t){return t}),wifeConstantList:oa}},computed:(0,d.A)((0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),{},{getParentsList:function(){var e=this.father||{},t=e.id,a=void 0===t?-1:t,i=e.name,n=e.wife,s=void 0===n?[]:n,r=i||"-",l=s||[],d=[{id:a,name:r}];return l.forEach(function(e){d.push({id:e.id,name:"".concat(r,"|").concat(e.name)})}),d}}),watch:{activeNodeInfo:{handler:function(e){e&&this.updateFormData(e)},immediate:!0,deep:!0},rawDetail:{handler:function(e){null!==e&&void 0!==e&&e.info&&this.updateFormData(e.info)},immediate:!0,deep:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["SaveMemberInfo"])),{},{handleShowBaseMore:function(){this.$emit("toggleBaseMore")},getRankingText:function(e,t){return(0,ca.g)(e,t)},updateRankingTextBySex:function(){var e=this.rankingText;"始祖"!==e&&("长子"===e&&"女"===this.sex?this.rankingText="长女":"长女"===e&&"男"===this.sex?this.rankingText="长子":e&&e.includes("子")&&"女"===this.sex?this.rankingText=e.replace("子","女"):e&&e.includes("女")&&"男"===this.sex?this.rankingText=e.replace("女","子"):"之子"===e&&"女"===this.sex?this.rankingText="之女":"之女"===e&&"男"===this.sex&&(this.rankingText="之子"))},updateFormData:function(e){e&&(this.firstName=e.first_name||"",this.name=e.name||"",this.realName=e.real_name||"",this.sex=e.husband_id?"女":e.sex||"男",this.fatherName=e.father_name||"",this.fatherId=e.father_id||-1,this.rankingText=e.ranking_text||e.rankingText||"",this.largeRankingText=e.ranking_text||e.rankingText||"",this.birthday=e.birthday||"",this.deathTime=e.death_time||"",this.ageAtDeath=e.age_at_death||100,this.cemeteryAddress=e.cemetery_address||"",this.livingStatus=e.living_status||1,this.wifeRelation=e.relation||oa[0]||"娶")},handleSaveMemberInfo:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n,r,l,d,c,o,h;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(r=t.SaveMemberInfo,l=(null===(i=t.activeNodeInfo)||void 0===i?void 0:i.id)||t.selectedNodeId,l){a.n=1;break}return t.$message.error("请选择要保存的节点"),a.a(2);case 1:d=null===(n=t.rawDetail)||void 0===n?void 0:n.info,c={clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,id:l},h=e,a.n="first_name"===h?2:"name"===h?4:"real_name"===h?6:"sex"===h?8:"rankingText"===h?10:"age_at_death"===h?12:"cemetery_address"===h?14:"birthday"===h?16:"relation"===h?18:"father_name"===h?20:"living_status"===h?22:"death_time"===h?24:"father_id"===h?26:28;break;case 2:if(c.first_name=t.firstName,!d||d.first_name!==t.firstName){a.n=3;break}return a.a(2);case 3:return a.a(3,28);case 4:if(c.name=t.name,!d||d.name!==t.name){a.n=5;break}return a.a(2);case 5:return a.a(3,28);case 6:if(c.real_name=t.realName,!d||d.real_name!==t.realName){a.n=7;break}return a.a(2);case 7:return a.a(3,28);case 8:if(c.sex=t.sex,!d||d.sex!==t.sex){a.n=9;break}return a.a(2);case 9:return t.updateRankingTextBySex(),c.rankingText=t.rankingText,a.a(3,28);case 10:if(c.rankingText=t.rankingText,!d||d.rankingText!==t.rankingText){a.n=11;break}return a.a(2);case 11:return a.a(3,28);case 12:if(c.age_at_death=t.ageAtDeath,!d||d.age_at_death!==t.ageAtDeath){a.n=13;break}return a.a(2);case 13:return a.a(3,28);case 14:if(c.cemetery_address=t.cemeteryAddress,!d||d.cemetery_address!==t.cemeteryAddress){a.n=15;break}return a.a(2);case 15:return a.a(3,28);case 16:if(c.birthday=t.birthday,!d||d.birthday!==t.birthday){a.n=17;break}return a.a(2);case 17:return a.a(3,28);case 18:if(c.relation=t.wifeRelation,!d||d.relation!==t.wifeRelation){a.n=19;break}return a.a(2);case 19:return a.a(3,28);case 20:if(c.father_name=t.fatherName,!d||d.father_name!==t.fatherName){a.n=21;break}return a.a(2);case 21:return a.a(3,28);case 22:if(c.living_status=t.livingStatus,!d||d.living_status!==t.livingStatus){a.n=23;break}return a.a(2);case 23:return a.a(3,28);case 24:if(c.death_time=t.deathTime,!d||d.death_time!==t.deathTime){a.n=25;break}return a.a(2);case 25:return a.a(3,28);case 26:if(c.father_id=t.fatherId,!d||d.father_id!==t.fatherId){a.n=27;break}return a.a(2);case 27:return a.a(3,28);case 28:return t.$emit("update:loadingDetail",!0),a.p=29,a.n=30,r(c);case 30:o=a.v,200===o.code?(t.$message.success("保存成功"),t.$emit("updateTreeData",{nodeId:l,updatedData:c,fieldType:e})):t.$message.error(o.message||"保存失败"),a.n=32;break;case 31:a.p=31,a.v,t.$message.error("保存失败");case 32:return a.p=32,t.$emit("update:loadingDetail",!1),a.f(32);case 33:return a.a(2)}},a,null,[[29,31,32,33]])}))()},handleRefreshDetail:function(){this.$emit("refreshDetail")},onDateChange:function(e){this.birthday=e,this.handleSaveMemberInfo("birthday")}})},Pa=Ia,Na=(0,b.A)(Pa,pa,ma,!1,null,"400499b3",null),La=Na.exports,Ma=function(){var e,t,a=this,i=a._self._c;return i("div",{directives:[{name:"show",rawName:"v-show",value:a.showBaseDetail,expression:"showBaseDetail"}],staticClass:"third-column"},[i("div",{staticClass:"detail-header"},[i("div",{staticClass:"flex justify-content-space-between align-center detail-header-bar"},[i("div",{staticClass:"flex flex-1 tabs"},[i("div",{staticClass:"item",class:1===a.detailTabs?" on":"",on:{click:function(e){a.detailTabs=1}}},[a._v("基本信息")]),i("div",{staticClass:"item hidden",class:2===a.detailTabs?" on":"",on:{click:function(e){a.detailTabs=2}}},[a._v("快捷录入")]),i("div",{staticClass:"item hidden",class:3===a.detailTabs?" on":"",on:{click:function(e){a.detailTabs=3}}},[a._v("帮助说明")]),i("div",{staticClass:"item hidden",class:4===a.detailTabs?" on":"",on:{click:function(e){a.detailTabs=4}}},[a._v("用户纠错")])]),i("div",{staticClass:"rotate-icon"},[i("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzhedie1 c-pointer-hover",on:{click:a.handleToggleDetail}})])]),i("detail-tabs-header",{attrs:{mainNodeInfo:a.mainNodeInfo,activeNodeInfo:a.activeNodeInfo},on:{handleSelectedNode:a.handleSelectedNode,handleAddWife:a.handleAddWife,handleDeleteWife:a.handleDeleteWife}})],1),i("div",{staticClass:"detail-content-wrapper"},[1===a.detailTabs?i("div",{staticClass:"flex"},[i("tab1-base-info",{attrs:{nodeInfo:a.activeNodeInfo,father:a.father,showText:(null===(e=a.rawDetail)||void 0===e?void 0:e.show_text)||""},on:{refresh:a.handleRefresh,updateTreeData:a.handleUpdateTreeData}})],1):a._e(),2===a.detailTabs?i("div",[i("tab2-quick-info",{attrs:{fastText:(null===(t=a.rawDetail)||void 0===t?void 0:t.fast_text)||""}})],1):a._e(),3===a.detailTabs?i("div",[i("div",{staticClass:"flex flex-direction-column flex-1",staticStyle:{height:"30vh","background-color":"#fff","padding-left":"10px"}},[a._v(" 帮助说明待补充")])]):a._e(),4===a.detailTabs?i("div",[i("div",{staticClass:"flex flex-direction-column flex-1",staticStyle:{height:"30vh","background-color":"#fff","padding-left":"10px"}},[a._v(" 用户纠错待补充")])]):a._e()])])},$a=[],Fa=function(){var e=this,t=e._self._c;return t("div",{staticClass:"header flex align-center"},[t("div",{staticClass:"inner"},[t("div",{class:["item",{selected:e.activeNodeInfo.id===e.mainNodeInfo.id}],on:{click:function(t){return e.selectNode(e.mainNodeInfo)}}},[t("div",{staticClass:"generation"},[e._v(e._s(e.mainNodeInfo.generation)+"世")]),t("div",{staticClass:"node"},[e._v(e._s(e.mainNodeInfo.full_name))])]),e._l(e.mainNodeInfo.wife,function(a,i){var n;return t("div",{key:a.id,class:["item wife",{selected:e.activeNodeInfo.id===a.id}],on:{click:function(t){return e.selectNode(a)}}},[e._v(" "+e._s(a.relation)+" : "+e._s(a.full_name)+" "),i<(null===(n=e.mainNodeInfo)||void 0===n||null===(n=n.wife)||void 0===n?void 0:n.length)-1?t("div",{staticClass:"exchange"},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarjiaohuan"})]):e._e(),e.selectedId===a.id?t("div",{staticClass:"delete",on:{click:function(t){return t.stopPropagation(),e.handleDeleteWife(a)}}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarcuo"})]):e._e()])}),t("div",{staticClass:"add",on:{click:e.handleAddWife}},[e._v("+添加配偶")])],2)])},Ga=[],Oa={name:"DetailTabsHeader",data:function(){return{selectedId:null}},props:{mainNodeInfo:{type:Object,default:function(){}},activeNodeInfo:{type:Object,default:function(){}}},watch:{activeNodeInfo:{handler:function(e){e&&e.id&&(this.selectedId=e.id)},immediate:!0}},methods:{handleAddWife:function(){this.$emit("handleAddWife")},handleDeleteWife:function(e){this.$emit("handleDeleteWife",e)},selectNode:function(e){if(this.selectedId!==e.id){this.selectedId=e.id;var t=e;(e.husband_id||this.mainNodeInfo.wife&&this.mainNodeInfo.wife.some(function(t){return t.id===e.id}))&&(t=(0,d.A)((0,d.A)({},e),{},{husband_id:e.husband_id||this.mainNodeInfo.id,generation:e.generation||this.mainNodeInfo.generation,father_id:e.father_id||this.mainNodeInfo.id})),this.$emit("handleSelectedNode",t)}}}},Ba=Oa,Va=(0,b.A)(Ba,Fa,Ga,!1,null,"37221de4",null),ja=Va.exports,Ra=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"tab-base-info flex-direction-row"},[e._m(0),t("div",{staticClass:"flex flex-1 flex-wrap"},[t("div",{staticClass:"flex flex-direction-row"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("姓氏")]),t("a-input",{on:{blur:function(t){return e.handleSave("first_name")}},model:{value:e.data.first_name,callback:function(t){e.$set(e.data,"first_name",t)},expression:"data.first_name"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("名 字")]),t("a-input",{on:{blur:function(t){return e.handleSave("name")}},model:{value:e.data.name,callback:function(t){e.$set(e.data,"name",t)},expression:"data.name"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("常用名")]),t("a-input",{staticStyle:{width:"120px"},on:{blur:function(t){return e.handleSave("real_name")}},model:{value:e.data.real_name,callback:function(t){e.$set(e.data,"real_name",t)},expression:"data.real_name"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item"},[t("div",{staticClass:"title"},[e._v("别 名")]),t("a-input",{staticStyle:{width:"120px"},on:{blur:function(t){return e.handleSave("other_name")}},model:{value:e.data.other_name,callback:function(t){e.$set(e.data,"other_name",t)},expression:"data.other_name"}})],1)]),t("div",{staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("性 别")]),t("a-select",{staticClass:"select-no-border",staticStyle:{width:"80px"},attrs:{disabled:!!e.data.husband_id},on:{change:function(t){return e.handleSave("sex")}},model:{value:e.data.sex,callback:function(t){e.$set(e.data,"sex",t)},expression:"data.sex"}},[t("a-select-option",{attrs:{value:"男"}},[e._v("男")]),t("a-select-option",{attrs:{value:"女"}},[e._v("女")])],1)],1),e.data.husband_id?e._e():t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("父母")]),t("a-select",{staticClass:"select-no-border",staticStyle:{width:"90px"},attrs:{noBorder:"",dropdownMatchSelectWidth:!1},model:{value:e.data.father_id,callback:function(t){e.$set(e.data,"father_id",t)},expression:"data.father_id"}},e._l(e.getParentsList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])}),1),t("a-select",{staticClass:"select-no-border select-left-border",staticStyle:{width:"70px"},on:{change:function(t){return e.handleSave("relation")}},model:{value:e.data.relation,callback:function(t){e.$set(e.data,"relation",t)},expression:"data.relation"}},e._l(e.relationList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])}),1)],1),e.data.husband_id?t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("父亲")]),t("a-input",{staticStyle:{width:"160px"},attrs:{placeholder:"请输入父亲姓名"},on:{blur:function(t){return e.handleSave("father_name")},pressEnter:function(t){return e.handleSave("father_name")}},model:{value:e.data.father_name,callback:function(t){e.$set(e.data,"father_name",t)},expression:"data.father_name"}}),t("a-select",{staticClass:"select-no-border select-left-border",staticStyle:{width:"70px"},on:{change:function(t){return e.handleSave("ranking_text")}},model:{value:e.data.ranking_text,callback:function(t){e.$set(e.data,"ranking_text",t)},expression:"data.ranking_text"}},e._l(e.getCurrentRankingList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1):e._e(),e.data.husband_id?t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("配偶关系")]),t("a-select",{staticClass:"select-no-border",staticStyle:{width:"160px"},on:{change:function(t){return e.handleSave("relation")}},model:{value:e.data.relation,callback:function(t){e.$set(e.data,"relation",t)},expression:"data.relation"}},e._l(e.wifeConstantList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1):e._e(),e.data.husband_id?e._e():t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("排行")]),t("a-select",{staticClass:"select-no-border",staticStyle:{width:"86px"},on:{change:function(t){return e.handleSave("ranking_text")}},model:{value:e.data.ranking_text,callback:function(t){e.$set(e.data,"ranking_text",t)},expression:"data.ranking_text"}},e._l(e.getCurrentRankingList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1),e.data.husband_id?e._e():t("div",{staticClass:"flex flex-direction-row align-center form-item"},[t("div",{staticClass:"title"},[e._v("婚 姻")]),t("a-select",{staticClass:"select-no-border select-left-border",staticStyle:{width:"74px"},on:{change:function(t){return e.handleSave("marital_status")}},model:{value:e.data.marital_status,callback:function(t){e.$set(e.data,"marital_status",t)},expression:"data.marital_status"}},e._l(e.marriageStatus,function(a){return t("a-select-option",{key:a.value,attrs:{value:a.value}},[e._v(e._s(a.label))])}),1)],1)]),t("div",{staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("学校")]),t("a-input",{staticStyle:{width:"270px"},on:{blur:function(t){return e.handleSave("school")}},model:{value:e.data.school,callback:function(t){e.$set(e.data,"school",t)},expression:"data.school"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("学历")]),t("a-select",{staticClass:"select-no-border select-left-border",staticStyle:{width:"270px"},on:{change:function(t){return e.handleSave("education")}},model:{value:e.data.education,callback:function(t){e.$set(e.data,"education",t)},expression:"data.education"}},e._l(e.educationList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1)]),t("div",{staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("单位")]),t("a-input",{staticStyle:{width:"270px"},on:{blur:function(t){return e.handleSave("company")}},model:{value:e.data.company,callback:function(t){e.$set(e.data,"company",t)},expression:"data.company"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("职位")]),t("a-input",{staticStyle:{width:"270px"},on:{blur:function(t){return e.handleSave("job")}},model:{value:e.data.job,callback:function(t){e.$set(e.data,"job",t)},expression:"data.job"}})],1)]),t("div",{staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("生于")]),t("DatePicker",{on:{change:e.onDateChange}},[t("a-input",{staticStyle:{width:"440px"},attrs:{readonly:"",placeholder:"请输入"},model:{value:e.data.birthday,callback:function(t){e.$set(e.data,"birthday",t)},expression:"data.birthday"}})],1)],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("状态")]),t("a-select",{staticClass:"select-no-border select-left-border",staticStyle:{width:"100px"},on:{change:function(t){return e.handleSave("living_status")}},model:{value:e.data.living_status,callback:function(t){e.$set(e.data,"living_status",t)},expression:"data.living_status"}},e._l(e.livingStatusList,function(a){return t("a-select-option",{key:a.id,attrs:{value:a.id}},[e._v(e._s(a.name))])}),1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.data.living_status,expression:"data.living_status === 2"}],staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("殁于")]),t("a-input",{staticStyle:{width:"440px"},attrs:{placeholder:"请输入"},on:{blur:function(t){return e.handleSave("death_time")}},model:{value:e.data.death_time,callback:function(t){e.$set(e.data,"death_time",t)},expression:"data.death_time"}})],1),t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("享年")]),t("a-select",{staticClass:"select-no-border",staticStyle:{width:"100px"},on:{change:function(t){return e.handleSave("age_at_death")}},model:{value:e.data.age_at_death,callback:function(t){e.$set(e.data,"age_at_death",t)},expression:"data.age_at_death"}},e._l(e.ageOptionList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1)]),t("div",{directives:[{name:"show",rawName:"v-show",value:2===e.data.living_status,expression:"data.living_status === 2"}],staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"},[t("div",{staticClass:"title"},[e._v("葬地")]),t("a-input",{staticStyle:{width:"610px"},on:{blur:function(t){return e.handleSave("cemetery_address")}},model:{value:e.data.cemetery_address,callback:function(t){e.$set(e.data,"cemetery_address",t)},expression:"data.cemetery_address"}})],1)]),t("div",{staticClass:"flex flex-direction-row mt10"},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8",staticStyle:{height:"56px"}},[t("div",{staticClass:"title",staticStyle:{height:"54px"}},[e._v("简介")]),t("a-textarea",{staticStyle:{width:"610px",resize:"none"},on:{blur:function(t){return e.handleSave("introduction")}},model:{value:e.data.introduction,callback:function(t){e.$set(e.data,"introduction",t)},expression:"data.introduction"}})],1)])])]),t("div",{staticClass:"tab-base-info flex-direction-row",staticStyle:{"padding-top":"34px"}},[t("div",{staticClass:"flex align-center w100p header"},[t("div",{staticClass:"f16"},[e._v("子女信息")]),t("div",{staticClass:"ml12"},[e._v("共")]),t("div",[t("a-select",{staticClass:"w100",model:{value:e.getSonsCounts,callback:function(t){e.getSonsCounts=t},expression:"getSonsCounts"}},e._l(e.generationList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1),t("div",{staticClass:"ml2"},[e._v("子")]),t("div",[t("a-select",{staticClass:"w100",model:{value:e.getDaughtersCounts,callback:function(t){e.getDaughtersCounts=t},expression:"getDaughtersCounts"}},e._l(e.generationList,function(a){return t("a-select-option",{key:a,attrs:{value:a}},[e._v(e._s(a))])}),1)],1),t("div",{staticClass:"ml2"},[e._v("女")]),e._m(1)])]),t("div",{staticClass:"tab-base-info flex",staticStyle:{"padding-top":"8px"}},[t("children-table",{attrs:{source:e.childrenList,nodeInfo:e.nodeInfo}})],1),t("div",{staticClass:"tab-base-info flex",staticStyle:{"padding-top":"12px"}},[t("div",{staticClass:"flex flex-direction-row align-center form-item flex-1",staticStyle:{height:"56px","background-color":"#f5f7fa"}},[e._m(2),t("div",{staticClass:"flex-1 ml8"},[e._v(e._s(e.showText))])])]),e._m(3)])},Ea=[function(){var e=this,t=e._self._c;return t("div",{staticStyle:{width:"104px"}},[t("div",{staticClass:"photo"},[t("div",{staticClass:"default"}),t("div",{staticClass:"close"},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbaricon-mianxing_fuzhi_guanbi"})]),t("div",{staticClass:"tips"},[e._v("点击更换")])]),t("div",{staticClass:"flex justify-center align-center bind-account c-pointer-hover"},[e._v("绑定用户")])])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex-1"},[t("div",{staticClass:"line"})])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"title",staticStyle:{height:"54px"}},[e._v("行传"),t("br"),e._v("预览")])},function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab-base-info flex",staticStyle:{"padding-top":"12px","padding-bottom":"12px"}},[t("div",{staticClass:"flex flex-direction-row align-center form-item mr8"})])}],za=a(46030),Ha=(a(13055),[{value:0,label:"未婚"},{value:1,label:"已婚"},{value:2,label:"离异"},{value:3,label:"丧偶"},{value:4,label:"未知"}]),Wa=["小学","初中","高中","专科","本科","硕士","博士"],Ya=function(){var e=this,t=e._self._c;return t("a-table",{staticStyle:{width:"100%"},attrs:{columns:e.columns,"data-source":e.list,size:"small",pagination:!1}},[t("template",{slot:"parent"},[t("div",[e._v(" 无 ")])]),t("template",{slot:"action"},[t("div",{staticClass:"flex justify-content-space-between"},[t("span",{staticClass:"c-pointer-hover"},[e._v("选择")]),t("span",{staticClass:"c-pointer-hover"},[e._v("上移")]),t("span",{staticClass:"c-pointer-hover"},[e._v("下移")]),t("span",{staticClass:"c-pointer-hover"},[e._v("删除")])])])],2)},qa=[],Ka=[{title:"姓",dataIndex:"first_name",key:"first_name"},{title:"名字",dataIndex:"name",key:"name"},{title:"性别",dataIndex:"sex",key:"sex"},{title:"父母",key:"parents",dataIndex:"parents",scopedSlots:{customRender:"parent"}},{title:"关系",key:"relation",dataIndex:"relation"},{title:"排行",key:"ranking_text",dataIndex:"ranking_text"},{title:"操作",key:"action",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],Za={name:"ChildrenTable",data:function(){return{columns:Ka,list:[]}},props:{source:{type:Array,default:function(){return[]}},nodeInfo:{type:Object,default:function(){}}},watch:{source:{handler:function(e){this.list=et()(e)},immediate:!0}},methods:{}},Xa=Za,Ua=(0,b.A)(Xa,Ya,qa,!1,null,"6a367d5e",null),Ja=Ua.exports,Qa=a(14277),ei=["无","一","二","三","四","五","六","七","八","九","十","十一","十二","十三","十四","十五","十六","十七","十八","十九","二十"],ti=["始祖","长子","次子","三子","四子","五子","六子","七子","八子","九子","十子","十一子","十二子","十三子","十四子","十五子","十六子","十七子","十八子","十九子","二十子","之子"],ai=[{id:"生",name:"生子"},{id:"出嗣",name:"出嗣"},{id:"承嗣",name:"承嗣"},{id:"出祧",name:"出祧"},{id:"兼祧",name:"兼祧"},{id:"抚子",name:"抚子"},{id:"养子",name:"养子"},{id:"继子",name:"继子"},{id:"赘子",name:"赘子"},{id:"义子",name:"义子"},{id:"奉祀",name:"奉祀"},{id:"无",name:"无"}],ii=["长女","次女","三女","四女","五女","六女","七女","八女","九女","十女","十一女","十二女","十三女","十四女","十五女","十六女","十七女","十八女","十九女","二十女","之女"],ni=[{id:1,name:"在世"},{id:2,name:"已故"}],si=a(10963),ri={name:"Tab1BaseInfo",components:{ChildrenTable:Ja,DatePicker:Aa},data:function(){return{marriageStatus:Ha,educationList:Wa,outputSetting:Qa.c,generationList:ei,rankingList:ti,relationList:ai,wifeConstantList:oa,livingStatusList:ni,femaleRankingList:ii,rankingOptionsList:[],ageOptionList:Array(151).fill(0).map(function(e,t){return t}),data:{},childrenList:[]}},props:{nodeInfo:{type:Object,default:function(){}},father:{type:Object,default:function(){}},showText:{type:String,default:""}},computed:(0,d.A)((0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),{},{getParentsList:function(){var e=this.father||{},t=e.id,a=void 0===t?-1:t,i=e.name,n=e.wife,s=void 0===n?[]:n,r=i||"-",l=s||[],d=[{id:a,name:r}];return l.forEach(function(e){d.push({id:e.id,name:"".concat(r,"|").concat(e.name)})}),d},getSonsCounts:function(){var e=this.childrenList.filter(function(e){return"男"===e.sex}).length;return 0===e?"无":(0,si.y)(e)},getDaughtersCounts:function(){var e=this.childrenList.filter(function(e){return"女"===e.sex}).length;return 0===e?"无":(0,si.y)(e)},getCurrentRankingList:function(){return"女"===this.data.sex?this.femaleRankingList:this.rankingList}}),watch:{nodeInfo:{handler:function(e){if(e){var t=et()(e);t.husband_id&&(t.sex="女"),0===t.father_id&&(t.father_id=-1),this.data=t,this.childrenList=t.children||[]}},immediate:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["SaveMemberInfo"])),{},{getRankingText:function(e){return(0,ca.g)(e)},handleSave:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i,n,r,l,d,c,o;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:if(i=t.SaveMemberInfo,n=t.data,r=t.nodeInfo,null!==n&&void 0!==n&&n.id){a.n=1;break}return t.$message.error("请选择要保存的节点"),a.a(2);case 1:if(l=r[e],d=n[e],l!==d){a.n=2;break}return a.a(2);case 2:return"sex"!==e||n.husband_id||t.updateRankingTextBySex(),c=(0,za.A)((0,za.A)({clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId},e,n[e]),"id",n.id),"sex"!==e||n.husband_id||(c.ranking_text=n.ranking_text),a.p=3,a.n=4,i(c);case 4:o=a.v,200===o.code?(t.$message.success("保存成功"),t.$emit("updateTreeData",{nodeId:n.id,updatedData:c,fieldType:e})):t.$message.error(o.message||"保存失败"),a.n=6;break;case 5:a.p=5,a.v,t.$message.error("保存失败");case 6:return a.a(2)}},a,null,[[3,5]])}))()},updateRankingTextBySex:function(){var e=this.data.ranking_text;"始祖"!==e&&("长子"===e&&"女"===this.data.sex?this.data.ranking_text="长女":"长女"===e&&"男"===this.data.sex?this.data.ranking_text="长子":e&&e.includes("子")&&"女"===this.data.sex?this.data.ranking_text=e.replace("子","女"):e&&e.includes("女")&&"男"===this.data.sex?this.data.ranking_text=e.replace("女","子"):"之子"===e&&"女"===this.data.sex?this.data.ranking_text="之女":"之女"===e&&"男"===this.data.sex&&(this.data.ranking_text="之子"))},onDateChange:function(e){this.data.birthday=e,this.handleSave("birthday")}})},li=ri,di=(0,b.A)(li,Ra,Ea,!1,null,"1f6b363a",null),ci=di.exports,oi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"tab2-quick-info"},[t("a-textarea",{staticStyle:{resize:"none"},attrs:{rows:4,autoSize:{minRows:10,maxRows:10}},model:{value:e.showText,callback:function(t){e.showText=t},expression:"showText"}}),t("div",{staticClass:"quick-info-box flex"},[t("a-button",{staticClass:"mt4",on:{click:e.handleSave}},[e._v("保存")])],1)],1)},hi=[],ui={name:"Tab2QuickInfo",data:function(){return{showText:"谭@世岐111，又名老四，【字号：世蛸】，【履历：北京大学，博士，国防科技研究院1，工程师】，【简介：这是一个简介】，葬后山，生子谭国瑚2，\n配刘@大力，生于二〇〇六年，【履历：青蛙大学，超本，国防，干掉小日子】，【简介：这是一个很小的简介】，嗣子谭邦"}},methods:{handleSave:function(){this.$message.info("该功能暂未实现")}}},fi=ui,vi=(0,b.A)(fi,oi,hi,!1,null,"89964e6e",null),pi=vi.exports,mi={name:"MemberDetailInfo",components:{DetailTabsHeader:ja,Tab1BaseInfo:ci,Tab2QuickInfo:pi},props:{showBaseDetail:{type:Boolean,default:!1},mainNodeInfo:{type:Object,default:function(){return{}}},activeNodeInfo:{type:Object,default:function(){return{}}},father:{type:Object,default:function(){return{}}},rawDetail:{type:Object,default:function(){return{}}}},data:function(){return{detailTabs:1}},methods:{handleToggleDetail:function(){this.$emit("toggleDetail")},handleSelectedNode:function(e){this.$emit("selectedNode",e),this.$emit("updateTreeSelection",e)},handleAddWife:function(){this.$emit("addWife")},handleDeleteWife:function(e){this.$emit("deleteWife",e)},handleRefresh:function(){this.$emit("refresh")},handleUpdateTreeData:function(e){this.$emit("updateTreeData",e)}}},xi=mi,gi=(0,b.A)(xi,Ma,$a,!1,null,"076cf053",null),Ci=gi.exports,yi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-direction-column first-column text-center"},[t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleToggleBase}},[e.showBase||e.showBaseDetail?[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarzhankai-xia"})]:[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshouqi"})]],2),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleAddAncestor}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbara-icon_xiongmei"}),t("div",[e._v("+远祖")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleAddWife}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarpeiou"}),t("div",[e._v("+配偶")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleAddBrother}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbara-icon_xiongmei"}),t("div",[e._v("+兄妹")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleAddChild}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbara-icon_ernv"}),t("div",[e._v("+儿女")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleDeleteNode}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarshanchu1"}),t("div",[e._v("删除")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleGuoji}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfenzhijiedian"}),t("div",[e._v("过继")])]),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleBiaoji}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarstar"}),t("div",[e._v("标记")])]),t("div",{staticClass:"mt8 c-pointer"},[t("a-popover",{attrs:{title:"",placement:"leftTop"}},[t("template",{slot:"content"},[t("p",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleFenFang(1)}}},[e._v("分房")]),t("p",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleFenFang(2)}}},[e._v("分屋")]),t("p",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleFenFang(3)}}},[e._v("分支")]),t("p",{staticClass:"c-pointer-hover",on:{click:function(t){return e.handleFenFang(4)}}},[e._v("分派")])]),t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbarfangzi"}),t("div",[e._v("分房")])],2)],1),t("div",{staticClass:"mt8 c-pointer",on:{click:e.handleTongji}},[t("i",{staticClass:"cus-edit-toolbar-icon icon-edit-toolbartongjifenxi"}),t("div",[e._v("统计")])])])},_i=[],bi={name:"MemberActionMenu",props:{showBase:{type:Boolean,default:!0},showBaseDetail:{type:Boolean,default:!1}},data:function(){return{actionTypes:tt}},methods:{handleToggleBase:function(){this.$emit("toggleBase")},handleAddAncestor:function(){this.$emit("action",tt.PX_RIGHT_OPTION_ADD_ANCESTOR)},handleAddWife:function(){this.$emit("action",tt.PX_RIGHT_OPTION_ADD_WIFE)},handleAddBrother:function(){this.$emit("action",tt.PX_RIGHT_OPTION_ADD_BROTHER)},handleAddChild:function(){this.$emit("action",tt.PX_RIGHT_OPTION_ADD_CHILD)},handleDeleteNode:function(){this.$emit("action",tt.PX_RIGHT_OPTION_DELETE_NODE)},handleGuoji:function(){this.$emit("showModal","guoji")},handleBiaoji:function(){this.$emit("showModal","biaoji")},handleFenFang:function(e){this.$emit("fenFang",e)},handleTongji:function(){this.$emit("showModal","tongji")}}},wi=bi,ki=(0,b.A)(wi,yi,_i,!1,null,"621be1a4",null),Si=ki.exports,Di={name:"PXRightContent",components:{WifeChildrenInfo:va,BindModal:ra,ZaoZiModal:ea,TongjiModal:Kt,BiaoJiModal:Et,ShezhuangModal:Gt,FenFangModal:Pt,GuojiModal:mt,AddAncestor:dt,MemberBaseInfo:La,MemberDetailInfo:Ci,MemberActionMenu:Si},data:function(){return{loadingDetail:!1,nodeInfo:{},activeNodeInfo:{},mainNodeInfo:{},rawDetail:{},showBase:!0,showBaseDetail:!1,showAddAncestor:!1,showGuojiModal:!1,showFenFangModal:!1,showSheZhuangModal:!1,showBiaoJiModal:!1,showTongjiModal:!1,showZaoziModal:!1,showBindModal:!1,actionTypes:tt,selectTagType:"",refreshDetailTimer:null}},computed:(0,d.A)({},(0,h.aH)({currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),props:{selectedNode:{type:Object,default:function(){}},selectedNodeId:{type:[String,Number],default:""},fatherId:{type:[Number,String],default:0},father:{type:Object,default:function(){}}},watch:{selectedNode:{handler:function(e){e?e.husband_id?(this.setMainNodeInfoFromTree(e.husband_id),this.GetWifeDetail(e.id,0)):(this.mainNodeInfo=et()(e),this.GetDetail(e.id,e.father_id||0)):(this.nodeInfo={},this.activeNodeInfo={},this.mainNodeInfo={},this.rawDetail={})},immediate:!0,deep:!0},father:{handler:function(){},immediate:!0,deep:!0},activeNodeInfo:{handler:function(){},immediate:!0,deep:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["RefreshPedigreeMemberList","RefreshPedigreeMemberListKeepExpanded","SetQuickOperationsType","GetMemberDetail","DeletedMember","GetNodeById"])),{},{showBaseInfo:function(){this.showBase&&(this.lastShowBase=this.showBase),this.showBaseDetail&&(this.lastShowBaseDetail=this.showBaseDetail),this.showBaseDetail||this.showBase?(this.showBase=!1,this.showBaseDetail=!1):(this.lastShowBase&&(this.showBase=!0,this.lastShowBase=!1),this.lastShowBaseDetail&&(this.showBaseDetail=!0,this.lastShowBaseDetail=!1))},handleShowBaseMore:function(){this.showBaseDetail=!this.showBaseDetail,this.showBase=!this.showBase},GetDetail:function(e,t){var a=this;return(0,l.A)((0,s.A)().m(function i(){var n,r,l,c,o,h,u;return(0,s.A)().w(function(i){while(1)switch(i.n){case 0:return n=a.GetMemberDetail,r={id:e,father_id:t,clan_id:a.currentSelectedClanId,pedigree_id:a.currentSelectedPedigreeId},a.rawDetail={show_text:"",fast_text:""},a.loadingDetail=!0,i.n=1,n(r);case 1:l=i.v,a.loadingDetail=!1,200===(null===l||void 0===l?void 0:l.code)&&(a.rawDetail=l.data||{show_text:"",fast_text:""},(null===(c=l.data)||void 0===c||null===(c=c.info)||void 0===c||null===(c=c.wife)||void 0===c?void 0:c.length)>0&&(l.data.info.wife=l.data.info.wife.map(function(e){return(0,d.A)((0,d.A)({},e),{},{key:e.id})})),(null===(o=l.data)||void 0===o||null===(o=o.info)||void 0===o||null===(o=o.children)||void 0===o?void 0:o.length)>0&&(l.data.info.children=l.data.info.children.map(function(e){return(0,d.A)((0,d.A)({},e),{},{key:e.id})})),a.nodeInfo=null===(h=l.data)||void 0===h?void 0:h.info,a.activeNodeInfo=null===(u=l.data)||void 0===u?void 0:u.info);case 2:return i.a(2)}},i)}))()},RefreshDetail:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:e.refreshDetailTimer&&clearTimeout(e.refreshDetailTimer),e.refreshDetailTimer=setTimeout((0,l.A)((0,s.A)().m(function t(){var a,i;return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:if(null===(a=e.activeNodeInfo)||void 0===a||!a.husband_id){t.n=2;break}return t.n=1,e.GetWifeDetail(e.activeNodeInfo.id,0);case 1:t.n=3;break;case 2:return i={id:e.selectedNode.id,fatherId:e.selectedNode.father_id||0},t.n=3,e.GetDetail(i.id,i.fatherId);case 3:e.refreshDetailTimer=null;case 4:return t.a(2)}},t)})),100);case 1:return t.a(2)}},t)}))()},getItemClass:function(){return this.showBase?"cus-right-content open-base":this.showBaseDetail?"cus-right-content open-base-detail":"cus-right-content"},handleClick:function(e){var t=this.SetQuickOperationsType;switch(e){case tt.PX_RIGHT_OPTION_ADD_WIFE:case tt.PX_RIGHT_OPTION_ADD_CHILD:case tt.PX_RIGHT_OPTION_ADD_BROTHER:t(e);break;case tt.PX_RIGHT_OPTION_ADD_ANCESTOR:this.showAddAncestor=!0;break;case tt.PX_RIGHT_OPTION_DELETE_NODE:this.$emit("deleteNode");break}},handleFenFang:function(e){this.selectTagType=e,this.showFenFangModal=!0},handleShowModal:function(e){switch(e){case"guoji":this.showGuojiModal=!0;break;case"biaoji":this.showBiaoJiModal=!0;break;case"tongji":this.showTongjiModal=!0;break;case"shezhuang":this.showSheZhuangModal=!0;break;case"zaozi":this.showZaoziModal=!0;break}},handleSelectedNode:function(e){this.activeNodeInfo=et()(e),e.husband_id?this.GetWifeDetail(e.id,0):(this.GetDetail(e.id,e.father_id||0),this.mainNodeInfo=et()(e)),this.$emit("updateTreeSelection",e),this.$emit("handleSelectedNode",e.id,e)},handleAddWife:function(){var e=this;return(0,l.A)((0,s.A)().m(function t(){return(0,s.A)().w(function(t){while(1)switch(t.n){case 0:e.handleClick(e.actionTypes.PX_RIGHT_OPTION_ADD_WIFE);case 1:return t.a(2)}},t)}))()},handleDeleteWife:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:t.$confirm({title:"确认删除",content:"确定要删除配偶 ".concat(e.full_name||e.name," 吗？"),onOk:function(){var a=(0,l.A)((0,s.A)().m(function a(){var i,n;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return a.p=0,i={clan_id:t.currentSelectedClanId,pedigree_id:t.currentSelectedPedigreeId,id:e.id},a.n=1,t.DeletedMember(i);case 1:if(n=a.v,200!==n.code){a.n=6;break}return t.$message.success("删除成功"),a.p=2,a.n=3,t.RefreshPedigreeMemberListKeepExpanded();case 3:a.n=5;break;case 4:a.p=4,a.v,t.$message.warning("删除成功，但刷新数据失败，请手动刷新页面");case 5:t.activeNodeInfo.id===e.id&&(t.activeNodeInfo=et()(t.nodeInfo),t.GetDetail(t.nodeInfo.id,t.nodeInfo.father_id||0)),a.n=7;break;case 6:t.$message.error(n.message||"删除失败");case 7:a.n=9;break;case 8:a.p=8,a.v,t.$message.error("删除失败");case 9:return a.a(2)}},a,null,[[2,4],[0,8]])}));function i(){return a.apply(this,arguments)}return i}()});case 1:return a.a(2)}},a)}))()},GetWifeDetail:function(e){var t=arguments,a=this;return(0,l.A)((0,s.A)().m(function i(){var n,r,l,d,c;return(0,s.A)().w(function(i){while(1)switch(i.n){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:0,r=a.GetMemberDetail,l={id:e,father_id:n||0,clan_id:a.currentSelectedClanId,pedigree_id:a.currentSelectedPedigreeId},a.rawDetail={show_text:"",fast_text:""},a.loadingDetail=!0,i.p=1,i.n=2,r(l);case 2:d=i.v,a.loadingDetail=!1,200===(null===d||void 0===d?void 0:d.code)&&(a.rawDetail=d.data||{show_text:"",fast_text:""},a.activeNodeInfo=(null===(c=d.data)||void 0===c?void 0:c.info)||a.activeNodeInfo),i.n=4;break;case 3:i.p=3,i.v,a.loadingDetail=!1;case 4:return i.a(2)}},i,null,[[1,3]])}))()},setMainNodeInfoFromTree:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return a.p=0,a.n=1,t.GetNodeById(e);case 1:if(i=a.v,!i){a.n=2;break}t.mainNodeInfo=et()(i),a.n=3;break;case 2:return a.n=3,t.GetMainNodeInfo(e);case 3:a.n=5;break;case 4:return a.p=4,a.v,a.n=5,t.GetMainNodeInfo(e);case 5:return a.a(2)}},a,null,[[0,4]])}))()},GetMainNodeInfo:function(e){var t=this;return(0,l.A)((0,s.A)().m(function a(){var i;return(0,s.A)().w(function(a){while(1)switch(a.n){case 0:return a.p=0,a.n=1,t.GetNodeById(e);case 1:i=a.v,i&&(t.mainNodeInfo=et()(i)),a.n=3;break;case 2:a.p=2,a.v;case 3:return a.a(2)}},a,null,[[0,2]])}))()},handleUpdateTreeData:function(e){var t=e.nodeId,a=e.updatedData,i=e.fieldType;this.$emit("updateTreeNodeData",{nodeId:t,updatedData:a,fieldType:i}),this.updateLocalData(t,a,i)},updateLocalData:function(e,t,a){if(this.activeNodeInfo&&this.activeNodeInfo.id===e){var i=(0,d.A)({},this.activeNodeInfo);if(Object.keys(t).forEach(function(e){if("clan_id"!==e&&"pedigree_id"!==e&&"id"!==e){var a=e;"rankingText"===e&&(a="ranking_text"),i[a]=t[e]}}),t.first_name||t.name){var n=t.first_name||i.first_name||"",s=t.name||i.name||"";i.full_name=n+s}this.activeNodeInfo=i}if(this.selectedNode&&this.selectedNode.id===e){var r=(0,d.A)({},this.selectedNode);if(Object.keys(t).forEach(function(e){if("clan_id"!==e&&"pedigree_id"!==e&&"id"!==e){var a=e;"rankingText"===e&&(a="ranking_text"),r[a]=t[e]}}),t.first_name||t.name){var l=t.first_name||r.first_name||"",c=t.name||r.name||"";r.full_name=l+c}this.selectedNode=r}if(this.rawDetail&&this.rawDetail.info&&this.rawDetail.info.id===e){var o=(0,d.A)({},this.rawDetail.info);if(Object.keys(t).forEach(function(e){if("clan_id"!==e&&"pedigree_id"!==e&&"id"!==e){var a=e;"rankingText"===e&&(a="ranking_text"),o[a]=t[e]}}),t.first_name||t.name){var h=t.first_name||o.first_name||"",u=t.name||o.name||"";o.full_name=h+u}this.rawDetail=(0,d.A)((0,d.A)({},this.rawDetail),{},{info:o})}},handleUpdateTreeSelection:function(e){this.$emit("updateTreeSelection",e)}}),beforeDestroy:function(){this.refreshDetailTimer&&(clearTimeout(this.refreshDetailTimer),this.refreshDetailTimer=null)}},Ti=Di,Ai=(0,b.A)(Ti,Ue,Je,!1,null,"5cdcc3d8",null),Ii=Ai.exports,Pi=a(94699),Ni=a(8534),Li=a(52160),Mi=function(e,t){var a,i=(0,Li.A)(e);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(n.id===t)return n;if(n.children&&n.children.length>0){var s=Mi(n.children,t);if(s)return s}}}catch(r){i.e(r)}finally{i.f()}return null};function $i(e){var t=e.generation,a=e.rankingText,i=void 0===a?"":a;this.id=(new Date).getTime(),this.fullName="添加节点",this.generation=t,this.rankingText=i}function Fi(e){e.forEach(function(e){e.title=e.full_name||"",e.key=e.id,e.writeMode=2,e.children&&e.children.length>0?Fi(e.children):e.children=[]})}var Gi={components:{RightContent:Ii,LeftContent:Xe,TupuTree:Oe,Generation:Le,ClanTree:Pi.A,ClanPreview:pe,pageTop:De},data:function(){return{treeData:[],loading:!1,expandedKeys:[],generationList:[1,2,3,4,5,6,7,8,9,10],currentSelectedKey:"",currentSelectedNode:null,currentSelectedGeneration:-999,currentSelectedNodeFatherId:"",currentSelectedNodeFatherNode:null}},computed:(0,d.A)({},(0,h.aH)({pedigreeMemberListLoading:function(e){return e.px.pedigreeMemberListLoading},currentPedigreeMemberList:function(e){return e.px.currentPedigreeMemberList},currentSelectedClanId:function(e){return e.family.currentSelectedClanId},currentSelectedPedigreeId:function(e){return e.px.currentSelectedPedigreeId}})),watch:{pedigreeMemberListLoading:{handler:function(e){this.loading=e},immediate:!0},currentPedigreeMemberList:{handler:function(e,t){if(e){var a=[e];Fi(a);var i=(0,Ni.w)(a);if(this.treeData=a,t&&0!==this.expandedKeys.length||(this.expandedKeys=this.getDefaultExpandedKeys(a,3)),e.generation){this.currentSelectedGeneration=e.generation;var n=this.getMinGeneration(a),s=this.getMaxGeneration(a),r=n,l=r+9,d=s+3,c=Math.max(l,d);this.generationList=Array(c-r+1).fill(0).map(function(e,t){return t+r})}if((null===i||void 0===i?void 0:i.length)>0){var o=Mi(a,i[0]);o&&(this.currentSelectedKey=o.id,this.currentSelectedNode=o,this.currentSelectedNodeFatherId=o.father_id||0,o.father_id&&(this.currentSelectedNodeFatherNode=Mi(a,this.currentSelectedNodeFatherId)))}}else this.treeData=[],this.generationList=[],this.currentSelectedGeneration=-999},immediate:!0}},methods:(0,d.A)((0,d.A)({},(0,h.i0)(["DeletedMember","GetNodeById","RefreshPedigreeMemberList"])),{},{getItemClass:function(e){return"".concat(e)==="".concat(this.currentSelectedKey)?"text selected":"text"},handleSelectedNode:function(e,t){this.currentSelectedKey=e,this.currentSelectedNode=t,this.currentSelectedGeneration=t.generation;var a=this.getMinGeneration(this.treeData),i=this.getMaxGeneration(this.treeData),n=a,s=n+9,r=Math.max(i+3,t.generation+3),l=Math.max(s,r);this.generationList=Array(l-n+1).fill(0).map(function(e,t){return t+n}),this.currentSelectedNodeFatherId=t.father_id||-1,t.father_id&&(this.currentSelectedNodeFatherNode=Mi(this.treeData,this.currentSelectedNodeFatherId))},handleAddBrother:function(e,t){this.currentSelectedKey=e,this.currentSelectedGeneration=t.generation},handleAddChild:function(e,t){},handleDeleteNode:function(){var e=this.DeletedMember,t=this.RefreshPedigreeMemberList,a=this.GetNodeById,i=this.currentSelectedPedigreeId,n=this.currentSelectedNode,d={clan_id:this.currentSelectedClanId,pedigree_id:i,member_id:this.currentSelectedKey},c=this;this.$confirm({title:"",content:"确定删除「".concat(n.full_name,"」吗？"),okText:"确定",cancelText:"取消",onOk:function(){var i=(0,l.A)((0,s.A)().m(function i(){var l,o,h,u;return(0,s.A)().w(function(i){while(1)switch(i.n){case 0:return i.n=1,e(d);case 1:if(l=i.v,200!==(null===l||void 0===l?void 0:l.code)){i.n=8;break}if(!n.father_id){i.n=3;break}return i.n=2,a(n.father_id);case 2:o=i.v,c.currentSelectedKey=o.id,c.currentSelectedNode=o;case 3:return c.$message.success("操作成功"),h=(0,r.A)(c.expandedKeys),u=n.generation||3,i.p=4,i.n=5,t(u);case 5:c.expandedKeys=h,i.n=7;break;case 6:i.p=6,i.v,c.$message.warning("删除成功，但刷新数据失败，请手动刷新页面");case 7:i.n=9;break;case 8:c.$message.error(l.message||"删除失败");case 9:return i.a(2)}},i,null,[[4,6]])}));function o(){return i.apply(this,arguments)}return o}()})},onContextMenuClick:function(e,t){},handleTreeItemSelect:function(e,t){this.currentSelectedKey="".concat(e),this.currentSelectedGeneration=t,$i({generation:t})},handleSelectedNodeFromRightContent:function(e,t){},handleUpdateTreeSelection:function(e){if(e.husband_id){this.currentSelectedKey=e.id;var t=e.husband_id,a=Mi(this.treeData,t);a&&(this.currentSelectedNode=a,this.currentSelectedGeneration=a.generation,this.currentSelectedNodeFatherId=a.father_id||0,a.father_id&&(this.currentSelectedNodeFatherNode=Mi(this.treeData,a.father_id)))}else this.currentSelectedKey=e.id,this.currentSelectedNode=e,this.currentSelectedGeneration=e.generation,this.currentSelectedNodeFatherId=e.father_id||0,e.father_id&&(this.currentSelectedNodeFatherNode=Mi(this.treeData,e.father_id))},handleWifeSelected:function(e,t){this.currentSelectedKey=e,this.currentSelectedNode=t,this.currentSelectedGeneration=t.generation,this.currentSelectedNodeFatherId=t.husband_id,t.husband_id&&(this.currentSelectedNodeFatherNode=Mi(this.treeData,t.husband_id))},getMaxGeneration:function(e){var t=0,a=function(e){e&&Array.isArray(e)&&e.forEach(function(e){e.generation&&e.generation>t&&(t=e.generation),e.children&&e.children.length>0&&a(e.children)})};return a(e),t},getMinGeneration:function(e){var t=1/0,a=function(e){e&&Array.isArray(e)&&e.forEach(function(e){e.generation&&e.generation<t&&(t=e.generation),e.children&&e.children.length>0&&a(e.children)})};return a(e),t===1/0?1:t},getDefaultExpandedKeys:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=[],i=this.getMinGeneration(e),n=i+t-1,s=function(e){e&&Array.isArray(e)&&e.forEach(function(e){e.generation&&e.generation<=n&&a.push(e.id),e.children&&e.children.length>0&&s(e.children)})};return s(e),a},handleUpdateTreeNodeData:function(e){var t=e.nodeId,a=e.updatedData,i=function(e){if(!e||!Array.isArray(e))return!1;for(var n,s=function(){var n=e[r];if(n.id===t){if(Object.keys(a).forEach(function(e){if("clan_id"!==e&&"pedigree_id"!==e&&"id"!==e){var t=e;"rankingText"===e&&(t="ranking_text"),n[t]=a[e]}}),a.first_name||a.name){var s=a.first_name||n.first_name||"",l=a.name||n.name||"";n.full_name=s+l}return{v:!0}}if(n.children&&i(n.children))return{v:!0}},r=0;r<e.length;r++)if(n=s(),n)return n.v;return!1};i(this.treeData)&&this.$forceUpdate()}})},Oi=Gi,Bi=(0,b.A)(Oi,i,n,!1,null,"5bb6a296",null),Vi=Bi.exports},94354:function(e,t,a){a.d(t,{A2:function(){return h},F8:function(){return c},Sr:function(){return l},tD:function(){return f}});var i=a(55736),n=a(40400),s=a(32122),r={getAreaList:"/web/site/get-area-list",getDynastyData:"/web/site/date/dynasty-data",getYearDynastyDate:"/web/site/get-year-dynasty-date",getMonthData:"/web/site/date/lunar-month-data"};function l(e){return d.apply(this,arguments)}function d(){return d=(0,n.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:return e.a(2,(0,s.Ay)({url:r.getAreaList,method:"get",params:t}))}},e)})),d.apply(this,arguments)}function c(){return o.apply(this,arguments)}function o(){return o=(0,n.A)((0,i.A)().m(function e(){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:return e.a(2,(0,s.Ay)({url:r.getDynastyData,method:"get"}))}},e)})),o.apply(this,arguments)}function h(e){return u.apply(this,arguments)}function u(){return u=(0,n.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:return e.a(2,(0,s.Ay)({url:r.getYearDynastyDate,method:"get",params:t}))}},e)})),u.apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return v=(0,n.A)((0,i.A)().m(function e(t){return(0,i.A)().w(function(e){while(1)switch(e.n){case 0:return e.a(2,(0,s.Ay)({url:r.getMonthData,method:"get",params:t}))}},e)})),v.apply(this,arguments)}}}]);